import{r as m,j as e,m as d}from"./app-NvwZH2M5.js";import{A as j}from"./action-modal-BFcX26gy.js";import{F as _}from"./form-modal-CQpRHBaj.js";import{t as s}from"./index-BPHZml-b.js";/* empty css            */import"./proxy-BMjQ1kge.js";import"./index-CNOMy24s.js";function S({isOpen:u,closeModal:o,academicYear:t,attendanceModes:y}){const[l,i]=m.useState({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),[p,n]=m.useState(!1);m.useEffect(()=>{i(t?{start_year:t.start_year,attendance_mode:t.attendance_mode,note:t.note||""}:{start_year:new Date().getFullYear(),attendance_mode:"",note:""})},[t]);const c=a=>{const{name:r,value:h}=a.target;i(b=>({...b,[r]:h}))},x=a=>{a.preventDefault(),t?f():n(!0)},f=()=>{n(!1);const a={...l};t?d.post(`/academic-years/${t.id}`,{...a,_method:"PUT"},{onSuccess:()=>{o(),s.success("Academic year updated successfully."),d.reload()},onError:r=>{r.start_year?s.error("Failed to update academic year: "+r.start_year):s.error("Failed to update academic year")}}):d.post("/academic-years",a,{onSuccess:()=>{o(),s.success("Academic year created successfully."),d.reload()},onError:r=>{r.start_year?s.error("Failed to create academic year: "+r.start_year):s.error("Failed to create academic year")}})};return u?e.jsxs(e.Fragment,{children:[e.jsxs(_,{isOpen:u,onClose:o,title:t?"Edit Academic Year":"Adding Academic Year",onSubmit:x,children:[e.jsxs("div",{className:"mb-3 flex flex-wrap justify-between",children:[e.jsx("label",{htmlFor:"start_year",className:"block text-sm font-medium text-gray-700",children:"Start year"}),e.jsx("input",{type:"number",id:"start_year",name:"start_year",value:l.start_year,onChange:c,className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"attendance_mode",className:"block text-sm font-medium text-gray-700",children:"Attendance Mode"}),e.jsxs("select",{name:"attendance_mode",value:l.attendance_mode,onChange:c,className:"w-full rounded border p-2",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Mode --"}),y.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:"Notes (optional)"}),e.jsx("textarea",{name:"note",value:l.note,onChange:c,className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:o,className:"mr-2 rounded bg-gray-500 px-4 py-2 text-white hover:cursor-pointer",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-white hover:cursor-pointer",children:t?"Update":"Create"})]})]}),e.jsx(j,{isOpen:p,title:"Confirmation",message:"Are you sure you want to create new academic year?",buttons:[{label:"Cancel",onClick:()=>n(!1),variant:"neutral"},{label:"Confirm",onClick:()=>{f(),n(!1)},variant:"primary"}],onClose:()=>n(!1)})]}):null}export{S as default};
