import{q as g,r as a,j as t,$ as D,m as d}from"./app-eqB1mQkF.js";import{A as R}from"./action-modal-MHVk-2qL.js";import{P as _}from"./pagination-W6fJbJSa.js";import{T as F}from"./table-DCmgl5s5.js";import{A as I}from"./app-layout-DEjiUEQP.js";import{t as k,T as O}from"./index-Du0f3mTH.js";import T from"./form-Duu4TTwk.js";/* empty css            */import"./proxy-6ECs9z9j.js";import"./app-logo-icon-D0pnLMN9.js";import"./button-WeOkyu_c.js";import"./index-BvIodxfw.js";import"./index-BJ0PphGc.js";import"./index-CaZxKr8s.js";import"./form-modal-BEKCTc9w.js";const L=[{title:"Pengguna",href:"/users"}];function te(){var j;const{users:c,roles:y,statuses:N,filters:o}=g().props,{flash:r}=g().props;a.useEffect(()=>{r!=null&&r.success&&k.success(r.success),r!=null&&r.error&&k.error(r.error)},[r]);const[S,h]=a.useState(!1),[m,C]=a.useState(null),[u,b]=a.useState([]),[n,i]=a.useState(null),f=(e=null)=>{C(e),h(!0)},v=async e=>{d.delete(`/users/${e}`,{onSuccess:()=>d.reload()})},w=e=>{b(s=>s.includes(e)?s.filter(p=>p!==e):[...s,e])},U=()=>{const e=c.data.filter(l=>u.includes(l.id)),s=`Name,Username,Role,Phone,Email,Status
`,p=e.map(l=>`${l.full_name},${l.username},${l.role.name},${l.phone},${l.email},${l.status}`).join(`
`),A=new Blob([s,p],{type:"text/csv"}),P=URL.createObjectURL(A),x=document.createElement("a");x.href=P,x.download="users.csv",x.click()},$=e=>{d.get(route("users.index"),{sort:e,direction:o.direction==="asc"?"desc":"asc"},{preserveState:!0})},E=[{key:"full_name",label:"Full Name",sortable:!0},{key:"nip",label:"NIP",sortable:!0},{key:"username",label:"Username",sortable:!0},{key:"role_id",label:"Role",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}];return t.jsxs(I,{breadcrumbs:L,children:[t.jsx(D,{title:"Users"}),t.jsx(O,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",placeholder:"Search users...",defaultValue:o.search||"",onChange:e=>d.get(route("users.index"),{search:e.target.value},{preserveState:!0}),className:"w-64 rounded border px-3 py-1"}),t.jsx("button",{onClick:U,className:"rounded bg-indigo-600 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Export Selected"})]}),t.jsx("button",{onClick:()=>f(null),className:"rounded bg-green-600 px-3 py-1 text-sm font-medium text-white transition hover:cursor-pointer hover:bg-green-700",children:"Tambah Pengguna"})]}),t.jsx(F,{headers:E,data:c.data,sortColumn:o.sort??"",sortDirection:o.direction==="asc"||o.direction==="desc"?o.direction:"asc",onSort:$,onSelectAll:e=>b(e?c.data.map(s=>s.id):[]),selectedIds:u,rowRender:e=>{var s;return t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"w-[10px] p-3 text-sm",children:t.jsx("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>w(e.id)})}),t.jsx("td",{className:"p-3 text-sm",children:e.full_name}),t.jsx("td",{className:"p-3 text-sm",children:e.nip}),t.jsx("td",{className:"p-3 text-sm",children:e.username}),t.jsx("td",{className:"p-3 text-sm",children:((s=e.role)==null?void 0:s.name)||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.phone||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.email||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.status}),t.jsxs("td",{className:"flex gap-2 p-3 text-sm",children:[t.jsx("button",{onClick:()=>f(e),className:"rounded bg-blue-500 px-3 py-1 font-medium text-white hover:cursor-pointer",children:"Edit"}),t.jsx("button",{onClick:()=>i(e),className:"rounded bg-red-500 px-3 py-1 font-medium text-white hover:cursor-pointer",children:"Delete"})]})]},e.id)}}),t.jsx(_,{links:c.links}),t.jsx(T,{isOpen:S,onClose:()=>h(!1),user:m?{...m,role_id:((j=m.role)==null?void 0:j.id)??null}:null,roles:y,statuses:N}),t.jsx(R,{isOpen:!!n,onClose:()=>i(null),title:"Confirm Deletion",message:t.jsxs("span",{children:["Are you sure you want to delete user ",t.jsx("strong",{children:n==null?void 0:n.full_name}),"?"]}),buttons:[{label:"Cancel",onClick:()=>i(null),variant:"neutral"},{label:"Delete",onClick:()=>{n&&(v(n.id),i(null))},variant:"danger"}]})]})]})}export{te as default};
