import{u as M,r as o,j as t,H as E,a as b}from"./app-BJHuwbIp.js";import{P as I}from"./pagination-BCtNy-AS.js";import{T as O}from"./table-BSL3DVY6.js";import{A as R}from"./app-layout-B9ZBD9jD.js";import{T as _,t as $}from"./index-CTCOoqy_.js";import D from"./form-Cc37gdoJ.js";/* empty css            */import"./createLucideIcon-uKi6-sMQ.js";import"./button-BeC3aU0h.js";import"./index-BvYYMDcy.js";import"./index-CvTaArB4.js";import"./index-7Nuz5ywz.js";import"./app-logo-icon-CtJCNUYm.js";import"./action-modal-DEZMf6zW.js";import"./proxy-DCWqdkIa.js";import"./form-modal-C4JgGXhd.js";const H=[{title:"Tahun Akademik",href:"/academic-years"}];function ee(){const{academicYears:r,attendanceModes:g,filters:l}=M().props,[f,m]=o.useState(!1),[k,j]=o.useState(null),[a,u]=o.useState([]),[p,y]=o.useState("start_year"),[i,h]=o.useState("desc"),x=(e=null)=>{j(e),m(!0)},S=e=>{u(s=>s.includes(e)?s.filter(d=>d!==e):[...s,e])},N=()=>{if(a.length===0)return;const e=r.data.filter(n=>a.includes(n.id)),s=`Title,Status
`,d=e.map(n=>`${n.title},${n.status}`).join(`
`),A=new Blob([s,d],{type:"text/csv"}),T=URL.createObjectURL(A),c=document.createElement("a");c.href=T,c.download="academic-years.csv",c.click(),$.success(`Berhasil mengekspor ${e.length} data tahun akademik`,{description:"File CSV telah didownload otomatis"})},w=e=>{b.get("/academic-years",{...l||{},search:e.target.value},{preserveState:!0,replace:!0})},C=e=>{e===p?h(i==="desc"?"asc":"desc"):(y(e),h("desc")),b.get("/academic-years",{...l,sort:e,direction:i},{preserveState:!0,replace:!0})},v=[{key:"title",label:"Judul",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"attendance_mode",label:"Mode Kehadiran",sortable:!0},{key:"note",label:"Catatan",sortable:!0},{key:"actions",label:"Aksi",sortable:!1}];return t.jsxs(R,{breadcrumbs:H,children:[t.jsx(E,{title:"Tahun Akademik"}),t.jsx(_,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",defaultValue:l.search||"",onChange:w,placeholder:"Cari berdasarkan tahun...",className:"w-64 rounded border px-3 py-1"}),t.jsx("button",{disabled:a.length===0,onClick:N,className:`rounded bg-indigo-600 px-3 py-1 text-sm font-medium text-white hover:bg-indigo-700 ${a.length===0?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,children:"Ekspor data yang dipilih"})]}),t.jsx("button",{onClick:()=>x(),className:"rounded bg-green-600 px-3 py-1 text-sm font-medium text-white transition hover:cursor-pointer hover:bg-green-700",children:"Tambah Tahun Akademik"})]}),t.jsx(O,{headers:v,data:r.data,sortColumn:p,sortDirection:i,onSort:C,onSelectAll:e=>u(e?r.data.map(s=>s.id):[]),selectedIds:a,emptyMessage:"No academic years found.",rowRender:e=>t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"w-[10px] p-3 text-sm",children:t.jsx("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>S(e.id)})}),t.jsx("td",{className:"p-3 text-sm",children:e.title}),t.jsx("td",{className:"p-3 text-sm",children:e.status}),t.jsx("td",{className:"p-3 text-sm",children:e.attendance_mode}),t.jsx("td",{className:"p-3 text-sm",children:e.note?e.note.length>70?e.note.substring(0,70)+"...":e.note:"-"}),t.jsx("td",{className:"flex gap-2 p-3",children:t.jsx("button",{onClick:()=>x(e),className:"rounded bg-blue-500 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Edit"})})]},e.id)}),t.jsx(I,{links:r.links}),t.jsx(D,{isOpen:f,closeModal:()=>m(!1),academicYear:k,attendanceModes:g})]})]})}export{ee as default};
