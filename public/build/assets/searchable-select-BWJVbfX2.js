import{r as t,j as s,b as N}from"./app-CoovjHBY.js";function E({value:w,onChange:x,placeholder:g="Search...",endpoint:f,initialOption:l}){const[u,r]=t.useState(""),[h,n]=t.useState([]),[v,o]=t.useState(!1),[b,m]=t.useState(!1),[c,d]=t.useState(l||null),i=t.useRef(null);t.useEffect(()=>{l&&(d(l),r(l.full_name))},[l]);const p=async e=>{if(!f||e.length<2){n([]),o(!1);return}m(!0);try{const a=await N.get(f,{params:{query:e},withCredentials:!0});n(a.data),o(!0)}catch(a){console.error("Error fetching options:",a),n([])}finally{m(!1)}},y=e=>{const a=e.target.value;r(a),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{p(a)},300)},S=e=>{d(e),r(e.full_name),x(e.id),o(!1)},j=()=>{d(null),r(""),x(null),n([])};return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center border rounded",children:[s.jsx("input",{type:"text",value:u,onChange:y,placeholder:g,className:"flex-1 px-3 py-2 outline-none",onFocus:()=>u.length>=2&&p(u)}),c&&s.jsx("button",{type:"button",onClick:j,className:"px-2 text-gray-500 hover:text-red-500",children:"Ã—"})]}),v&&s.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:b?s.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Loading..."}):h.length===0?s.jsx("div",{className:"py-2 px-3 text-gray-500",children:"No results found"}):h.map(e=>s.jsx("div",{onClick:()=>S(e),className:`px-3 py-2 hover:bg-gray-100 cursor-pointer ${(c==null?void 0:c.id)===e.id?"bg-blue-50":""}`,children:e.full_name},e.id))})]})}export{E as S};
