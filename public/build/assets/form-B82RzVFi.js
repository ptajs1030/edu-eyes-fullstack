import{r as u,j as e,m as n}from"./app-wAfF6O0U.js";import{F as f}from"./form-modal-_OgbivCh.js";import{t as d}from"./index-Dmk9n43l.js";/* empty css            */import"./proxy-DJbimMge.js";import"./index-DDrSGAaB.js";function _({isOpen:h,onClose:c,subject:r}){const[t,l]=u.useState({name:"",curriculum_year:"",is_archived:!1});u.useEffect(()=>{l(r?{name:r.name,curriculum_year:r.curriculum_year,is_archived:r.is_archived}:{name:"",curriculum_year:"",is_archived:!1})},[r]);const m=i=>{const{name:a,value:s}=i.target;l(o=>({...o,[a]:s}))},x=i=>{const{name:a,checked:s}=i.target;l(o=>({...o,[a]:s}))},p=i=>{i.preventDefault(),r!=null&&r.id?n.put(`/subjects/${r.id}`,{...t},{preserveScroll:!0,onSuccess:()=>{c(),n.reload()},onError:a=>{const s=Object.values(a).join(`
`);d.error(`Failed to update subject: ${s}`)}}):n.post("/subjects",{...t},{preserveScroll:!0,onSuccess:()=>{c(),n.reload()},onError:a=>{const s=Object.values(a).join(`
`);d.error(`Failed to add new subject: ${s}`)}})};return e.jsxs(f,{isOpen:h,onClose:c,title:r?"Edit Subject":"Add New Subject",onSubmit:p,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:t.name,onChange:m,className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"curriculum_year",className:"block text-sm font-medium text-gray-700",children:"Curriculum Year"}),e.jsx("input",{id:"curriculum_year",name:"curriculum_year",type:"text",value:t.curriculum_year,onChange:m,className:"w-full rounded border p-2",required:!0})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx("input",{type:"checkbox",id:"is_archived",name:"is_archived",checked:t.is_archived,onChange:x,className:"h-4 w-4 rounded border-gray-300 text-blue-600 transition-all focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 focus:ring-offset-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"Archive this subject"}),e.jsx("span",{className:"mt-0.5 block text-xs text-gray-500",children:"Archived subjects will be hidden from default views but remain accessible"})]})]})}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:c,className:"mr-2 rounded bg-gray-500 px-4 py-2 text-white hover:cursor-pointer",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-white hover:cursor-pointer",children:r?"Update":"Create"})]})]})}export{_ as default};
