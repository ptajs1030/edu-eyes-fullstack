<<<<<<<< HEAD:public/build/assets/attendanceHistory-BgWQZSM7.js
import{u as H,r,j as e,H as I,a as o}from"./app-DiACb4PV.js";import{A as K}from"./app-layout-Df7YWau7.js";import{t as j,T as O}from"./index-8c_HFqwD.js";import{m as B,s as F}from"./constants-BwyCeSHr.js";import P from"./editShiftModal-bR8Tilgj.js";import R from"./editSubjectModal-dOE3pQh3.js";import z from"./shiftAttendanceTable-DcDK2Bfq.js";import L from"./subjectAttendanceTable-lLdmKtbm.js";/* empty css            */import"./button-BVf90HrK.js";import"./index-L24Pu3MU.js";import"./index-BQu7hZY4.js";import"./index-BDGSQU1v.js";import"./createLucideIcon-BLh1dqaJ.js";import"./app-logo-icon-C2JrAlQh.js";import"./form-modal-gXPksTWf.js";import"./proxy-Bmbl_dri.js";import"./searchable-select-Crk60qk1.js";import"./parseISO-C9VBp7jN.js";import"./id-PlgGTalb.js";import"./use-resolve-button-type-CPNlPNuD.js";import"./use-is-mounted-BI9KCMjV.js";import"./transition-B0lHBqAD.js";const W=()=>[{title:"Siswa",href:"/students"},{title:"Histori kehadiran"}];function me({student:a,academicYears:b,filters:n,dayOffOptions:h,attendanceMode:p,shiftAttendances:f=[],shiftStatistics:_={},subjectAttendances:v=[],subjectStatistics:g={}}){const{flash:t}=H().props,[S,c]=r.useState(!1),[N,u]=r.useState(!1),[i,y]=r.useState(null),[d,k]=r.useState(null);r.useEffect(()=>{t!=null&&t.success&&j.success(t.success),t!=null&&t.error&&j.error(t.error)},[t]);const m=(s,l)=>{o.get(route("students.attendance",a.id),{...n,[s]:l},{preserveState:!0})},E=s=>{y(s),c(!0)},w=s=>{k(s),u(!0)},A=s=>{const l={clock_in_hour:s.clock_in_hour_formatted||null,clock_out_hour:s.clock_out_hour_formatted||null,status:s.status,minutes_of_late:s.minutes_of_late||null,note:s.note||null,day_off_reason:s.day_off_reason||null,leave_reason:s.leave_reason||null};o.patch(route("students.attendance.shift.save",i==null?void 0:i.id),l,{preserveScroll:!0,onSuccess:()=>{c(!1),o.reload()}})},C=s=>{const l={submit_hour:s.submit_hour_formatted||null,status:s.status,note:s.note||null,day_off_reason:s.day_off_reason||null,leave_reason:s.leave_reason||null};o.patch(route("students.attendance.subject.save",d==null?void 0:d.id),l,{preserveScroll:!0,onSuccess:()=>{u(!1),o.reload()}})},T=p==="per-shift"?_:g;return e.jsxs(K,{breadcrumbs:W(),children:[e.jsx(I,{title:`Riwayat Kehadiran - ${a.full_name}`}),e.jsx(O,{position:"top-right",richColors:!0}),e.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Informasi Siswa"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Nama"}),e.jsx("p",{children:a.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Kelas"}),e.jsx("p",{children:a.classroom.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Wali Kelas"}),e.jsx("p",{children:a.classroom.main_teacher.full_name})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Filter"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tahun Ajaran"}),e.jsxs("select",{value:n.academic_year_id,onChange:s=>m("academic_year_id",s.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Pilih Tahun Ajaran"}),b.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bulan"}),e.jsx("select",{value:n.month,onChange:s=>m("month",s.target.value),className:"w-full rounded border p-2",children:B.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tahun"}),e.jsx("input",{type:"number",value:n.year,onChange:s=>m("year",s.target.value),className:"w-full rounded border p-2"})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Statistik Kehadiran (Bulan Ini)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-7",children:Object.entries(T).map(([s,l])=>{var x;return e.jsxs("div",{className:"rounded bg-gray-100 p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold",children:l}),e.jsx("p",{className:"capitalize",children:(x=F.shift.find(M=>M.value===s))==null?void 0:x.label})]},s)})})]}),p==="per-shift"?e.jsx(z,{shiftAttendances:f,onEdit:E}):e.jsx(L,{subjectAttendances:v,onEdit:w}),S&&e.jsx(P,{attendance:i,dayOffOptions:h,onClose:()=>c(!1),onSubmit:A}),N&&e.jsx(R,{attendance:d,dayOffOptions:h,onClose:()=>u(!1),onSubmit:C})]})]})}export{me as default};
========
import{u as H,r,j as e,H as I,a as o}from"./app-6uGljjzj.js";import{A as K}from"./app-layout-DkSmV0H7.js";import{t as j,T as O}from"./index-U4pvGxcC.js";import{m as B,s as F}from"./constants-BwyCeSHr.js";import P from"./editShiftModal-BJjz6QNv.js";import R from"./editSubjectModal-C17FuLnz.js";import z from"./shiftAttendanceTable-Bxnk5sdb.js";import L from"./subjectAttendanceTable-CVooIrYT.js";/* empty css            */import"./button-B_98bQe4.js";import"./index-CTMnhQDf.js";import"./index-2XKtYTwm.js";import"./index-NI8aqM-6.js";import"./createLucideIcon-uIMYACeP.js";import"./app-logo-icon-BTIryjTO.js";import"./form-modal-DbpPJhek.js";import"./proxy-Bth6GOvD.js";import"./searchable-select-2OjQ1Yrc.js";import"./parseISO-C9VBp7jN.js";import"./id-PlgGTalb.js";import"./use-resolve-button-type-BriCs1Tq.js";import"./use-is-mounted-n8FTGiK4.js";import"./transition-Cvmzu9kt.js";const W=()=>[{title:"Siswa",href:"/students"},{title:"Histori kehadiran"}];function me({student:a,academicYears:b,filters:n,dayOffOptions:h,attendanceMode:p,shiftAttendances:f=[],shiftStatistics:_={},subjectAttendances:v=[],subjectStatistics:g={}}){const{flash:t}=H().props,[S,c]=r.useState(!1),[N,u]=r.useState(!1),[i,y]=r.useState(null),[d,k]=r.useState(null);r.useEffect(()=>{t!=null&&t.success&&j.success(t.success),t!=null&&t.error&&j.error(t.error)},[t]);const m=(s,l)=>{o.get(route("students.attendance",a.id),{...n,[s]:l},{preserveState:!0})},E=s=>{y(s),c(!0)},w=s=>{k(s),u(!0)},A=s=>{const l={clock_in_hour:s.clock_in_hour_formatted||null,clock_out_hour:s.clock_out_hour_formatted||null,status:s.status,minutes_of_late:s.minutes_of_late||null,note:s.note||null,day_off_reason:s.day_off_reason||null,leave_reason:s.leave_reason||null};o.patch(route("students.attendance.shift.save",i==null?void 0:i.id),l,{preserveScroll:!0,onSuccess:()=>{c(!1),o.reload()}})},C=s=>{const l={submit_hour:s.submit_hour_formatted||null,status:s.status,note:s.note||null,day_off_reason:s.day_off_reason||null,leave_reason:s.leave_reason||null};o.patch(route("students.attendance.subject.save",d==null?void 0:d.id),l,{preserveScroll:!0,onSuccess:()=>{u(!1),o.reload()}})},T=p==="per-shift"?_:g;return e.jsxs(K,{breadcrumbs:W(),children:[e.jsx(I,{title:`Riwayat Kehadiran - ${a.full_name}`}),e.jsx(O,{position:"top-right",richColors:!0}),e.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Informasi Siswa"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Nama"}),e.jsx("p",{children:a.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Kelas"}),e.jsx("p",{children:a.classroom.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Wali Kelas"}),e.jsx("p",{children:a.classroom.main_teacher.full_name})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Filter"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tahun Ajaran"}),e.jsxs("select",{value:n.academic_year_id,onChange:s=>m("academic_year_id",s.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Pilih Tahun Ajaran"}),b.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bulan"}),e.jsx("select",{value:n.month,onChange:s=>m("month",s.target.value),className:"w-full rounded border p-2",children:B.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tahun"}),e.jsx("input",{type:"number",value:n.year,onChange:s=>m("year",s.target.value),className:"w-full rounded border p-2"})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Statistik Kehadiran (Bulan Ini)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-7",children:Object.entries(T).map(([s,l])=>{var x;return e.jsxs("div",{className:"rounded bg-gray-100 p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold",children:l}),e.jsx("p",{className:"capitalize",children:(x=F.shift.find(M=>M.value===s))==null?void 0:x.label})]},s)})})]}),p==="per-shift"?e.jsx(z,{shiftAttendances:f,onEdit:E}):e.jsx(L,{subjectAttendances:v,onEdit:w}),S&&e.jsx(P,{attendance:i,dayOffOptions:h,onClose:()=>c(!1),onSubmit:A}),N&&e.jsx(R,{attendance:d,dayOffOptions:h,onClose:()=>u(!1),onSubmit:C})]})]})}export{me as default};
>>>>>>>> 29ae11e9c19a2dcef45cfaec61ce114727ce3ea1:public/build/assets/attendanceHistory-DyPdDNuP.js
