import{r,j as a,a as S}from"./app-BillQ9bE.js";import{F as j}from"./form-modal-CVk7aJtt.js";import{S as y}from"./searchable-select-B68CV7yV.js";import{t as N}from"./index-FnkFZ88c.js";/* empty css            */import"./proxy-CnLOCDya.js";import"./index-D34kFPAx.js";function D({isOpen:s,onClose:m,classroom:e}){const[l,d]=r.useState({name:"",level:1,main_teacher_id:null}),[b,u]=r.useState(null),[p,x]=r.useState(0),[f,o]=r.useState({}),[w,i]=r.useState(!1);r.useEffect(()=>{s&&(o({}),i(!1),e?(d({name:e.name,level:e.level,main_teacher_id:e.main_teacher_id}),e.main_teacher?u({id:e.main_teacher_id,full_name:e.main_teacher.full_name}):u(null)):(d({name:"",level:1,main_teacher_id:null}),u(null)),x(t=>t+1))},[s,e]);const c=(t,h)=>{d(n=>({...n,[t]:h})),f[t]&&o(n=>({...n,[t]:""}))},v=t=>{t.preventDefault(),o({}),i(!0);const h={...l,_method:e!=null&&e.id?"PUT":"POST"},n=e!=null&&e.id?`/classrooms/${e.id}`:"/classrooms";S.post(n,h,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{i(!1),m()},onError:g=>{i(!1);const _=Object.values(g).join(`
`);N.error(`Failed to update classroom: ${_}`)}})};return a.jsxs(j,{isOpen:s,onClose:m,title:e?"Edit Kelas":"Tambahkan Kelas Baru",onSubmit:v,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:"Level"}),a.jsx("input",{id:"level",name:"level",type:"number",min:"1",value:l.level,onChange:t=>c("level",parseInt(t.target.value)||1),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nama Kelas"}),a.jsx("input",{id:"name",name:"name",type:"text",maxLength:70,value:l.name,onChange:t=>c("name",t.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"main_teacher_id",className:"block text-sm font-medium text-gray-700",children:"Wali Murid"}),a.jsx(y,{value:l.main_teacher_id,onChange:t=>c("main_teacher_id",t?Number(t):null),placeholder:"Search teacher by name...",endpoint:route("teachers.search"),initialOption:b,showInitialOptions:!0,maxInitialOptions:10},p)]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx("button",{type:"button",onClick:m,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:e?"Update":"Create"})]})]})}export{D as default};
