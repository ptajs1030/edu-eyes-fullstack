import{u as A,r,j as t,H as C,a as p}from"./app-BaxTmDlu.js";import{P as w}from"./pagination-D26EKPgl.js";import{T as M}from"./table-D0StAHoM.js";import{A as T}from"./app-layout-CIdFSPDP.js";import{T as v}from"./index-CeayDw-m.js";import I from"./form-Bxj1U6mi.js";import"./createLucideIcon-bQ3nhTL-.js";import"./button-BDDt3Av7.js";import"./index-Bma8VsUe.js";import"./index-C7ndTtDB.js";import"./index-DG_OHa-w.js";import"./app-logo-icon-Cqsi6NhR.js";import"./action-modal-Bktpyl8s.js";import"./proxy-F3E20T2o.js";import"./form-modal-CVnwxnel.js";const _=[{title:"Tahun Akademik",href:"/academic-years"}];function G(){const{academicYears:s,attendanceModes:x,filters:o}=A().props,[h,n]=r.useState(!1),[b,g]=r.useState(null),[d,i]=r.useState([]),[c,f]=r.useState("start_year"),[l,m]=r.useState("desc"),u=(e=null)=>{g(e),n(!0)},j=e=>{i(a=>a.includes(e)?a.filter(N=>N!==e):[...a,e])},k=e=>{p.get("/academic-years",{...o||{},search:e.target.value},{preserveState:!0,replace:!0})},y=e=>{e===c?m(l==="desc"?"asc":"desc"):(f(e),m("desc")),p.get("/academic-years",{...o,sort:e,direction:l},{preserveState:!0,replace:!0})};console.log(s.data.length),console.log(s.data.length!==0);const S=[{key:"title",label:"Judul",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"attendance_mode",label:"Mode Kehadiran",sortable:!0},{key:"note",label:"Catatan",sortable:!0},{key:"actions",label:"Aksi",sortable:!1}];return t.jsxs(T,{breadcrumbs:_,children:[t.jsx(C,{title:"Tahun Akademik"}),t.jsx(v,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"text",defaultValue:o.search||"",onChange:k,placeholder:"Cari berdasarkan tahun...",className:"w-64 rounded border px-3 py-1 text-sm"})}),t.jsx("button",{disabled:s.data.length!==0,onClick:()=>u(),className:`rounded bg-green-600 px-3 py-1 text-sm font-medium text-white transition ${s.data.length!==0?"cursor-not-allowed opacity-50":"hover:cursor-pointer hover:bg-green-700"} `,children:"Tambah Tahun Akademik"})]}),t.jsx(M,{headers:S,data:s.data,sortColumn:c,sortDirection:l,onSort:y,onSelectAll:e=>i(e?s.data.map(a=>a.id):[]),selectedIds:d,emptyMessage:"No academic years found.",rowRender:e=>t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"w-[10px] p-3 text-sm",children:t.jsx("input",{type:"checkbox",checked:d.includes(e.id),onChange:()=>j(e.id)})}),t.jsx("td",{className:"p-3 text-sm",children:e.title}),t.jsx("td",{className:"p-3 text-sm",children:e.status}),t.jsx("td",{className:"p-3 text-sm",children:e.attendance_mode}),t.jsx("td",{className:"p-3 text-sm",children:e.note?e.note.length>70?e.note.substring(0,70)+"...":e.note:"-"}),t.jsx("td",{className:"flex gap-2 p-3",children:t.jsx("button",{onClick:()=>u(e),className:"rounded bg-blue-500 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Edit"})})]},e.id)}),t.jsx(w,{links:s.links}),t.jsx(I,{isOpen:h,closeModal:()=>n(!1),academicYear:b,attendanceModes:x})]})]})}export{G as default};
