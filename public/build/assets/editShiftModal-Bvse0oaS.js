import{r as n,j as e}from"./app-B60Ir9-g.js";import{F as h}from"./form-modal-DnOqLXe8.js";import{S as f}from"./searchable-select-BJIUbtuH.js";import{s as x}from"./constants-DiZSaSre.js";import{f as g,p}from"./parseISO-C9VBp7jN.js";import"./proxy-BVwraoBL.js";const w=({attendance:r,dayOffOptions:d,onClose:i,onSubmit:u})=>{const[t,m]=n.useState(r||{});n.useEffect(()=>{r&&m({...r})},[r]);const c=a=>{const s=d.find(o=>o.id===parseInt(a));m(o=>({...o,day_off_reason:s==null?void 0:s.description,day_off_reason_id:s==null?void 0:s.id}))},l=(a,s)=>{m(o=>a==="status"&&s!=="day_off"||a==="status"&&s!=="leave"?{...o,[a]:s,day_off_reason:null,leave_reason:null,day_off_reason_id:void 0}:{...o,[a]:s})},b=a=>{a.preventDefault(),u(t)};return r?e.jsxs(h,{isOpen:!0,onClose:i,title:"Ubah Data Kehadiran",onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal"}),e.jsx("input",{type:"text",value:r.submit_date?g(p(r.submit_date),"dd MMM yyyy"):"",disabled:!0,className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Shift"}),e.jsx("input",{type:"text",value:`${r.shifting_name} (${r.shifting_start_hour_formatted} - ${r.shifting_end_hour_formatted})`,disabled:!0,className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Jam Masuk"}),e.jsx("input",{type:"time",value:t.clock_in_hour_formatted||"",onChange:a=>l("clock_in_hour_formatted",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 p-2 shadow-sm",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Jam Pulang"}),e.jsx("input",{type:"time",value:t.clock_out_hour_formatted||"",onChange:a=>l("clock_out_hour_formatted",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 p-2 shadow-sm",disabled:!0})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("select",{value:t.status||"",onChange:a=>l("status",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",children:x.shift.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),t.status==="day_off"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pilih Hari Libur"}),e.jsx(f,{value:(()=>{const a=d.find(s=>s.description===t.day_off_reason);return a?a.id.toString():""})(),onChange:c,placeholder:"Pilih alasan...",endpoint:route("dayOff.search"),initialOption:(()=>{const a=d.find(s=>s.description===t.day_off_reason);return a?{id:a.id,full_name:a.description}:void 0})(),showInitialOptions:!0})]}),t.status==="leave"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alasan Izin"}),e.jsx("input",{type:"text",value:t.leave_reason||"",onChange:a=>l("leave_reason",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",placeholder:"Tulis alasan izin..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Menit Terlambat"}),e.jsx("input",{type:"number",min:"0",value:t.minutes_of_late||"",onChange:a=>l("minutes_of_late",parseInt(a.target.value)||0),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catatan"}),e.jsx("textarea",{value:t.note||"",onChange:a=>l("note",a.target.value),rows:3,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:i,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:"Simpan"})]})]}):null};export{w as default};
