import{r as c,j as t,m as l}from"./app-Ckvr5Gbd.js";import{F as _}from"./form-modal-D9sQsWOn.js";import{S as j}from"./searchable-select-C3fdPYAw.js";import{t as x}from"./index-CklFFX-e.js";/* empty css            */import"./proxy-C42ECR5J.js";import"./index-B7x2BxMT.js";function E({isOpen:b,onClose:r,classroom:e}){const[n,i]=c.useState({name:"",level:1,main_teacher_id:null}),[v,s]=c.useState(null);c.useEffect(()=>{e?(i({name:e.name,level:e.level,main_teacher_id:e.main_teacher_id}),e.main_teacher?s({id:e.main_teacher_id,full_name:e.main_teacher.full_name}):s(null)):(i({name:"",level:1,main_teacher_id:null}),s(null))},[e]);const m=(a,h)=>{i(d=>({...d,[a]:h}))},f=a=>{a.preventDefault();const{main_teacher:h,...d}=n,p={...d,_method:e!=null&&e.id?"PUT":"POST"};e!=null&&e.id?l.post(`/classrooms/${e.id}`,p,{preserveScroll:!0,onSuccess:()=>{r(),l.reload()},onError:o=>{const u=Object.values(o).join(`
`);x.error(`Failed to update classroom: ${u}`)}}):l.post("/classrooms",p,{preserveScroll:!0,onSuccess:()=>{r(),l.reload()},onError:o=>{const u=Object.values(o).join(`
`);x.error(`Failed to add new classroom: ${u}`)}})};return t.jsxs(_,{isOpen:b,onClose:r,title:e?"Edit Classroom":"Add New Classroom",onSubmit:f,children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Classroom Name"}),t.jsx("input",{id:"name",name:"name",type:"text",value:n.name,onChange:a=>m("name",a.target.value),className:"w-full rounded border p-2",required:!0})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:"Level"}),t.jsx("input",{id:"level",name:"level",type:"number",min:"1",value:n.level,onChange:a=>m("level",parseInt(a.target.value)||1),className:"w-full rounded border p-2",required:!0})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"main_teacher_id",className:"block text-sm font-medium text-gray-700",children:"Main Teacher"}),t.jsx(j,{value:n.main_teacher_id,onChange:a=>m("main_teacher_id",a?Number(a):null),placeholder:"Search teacher by name...",endpoint:route("teachers.search"),initialOption:v,showInitialOptions:!0,maxInitialOptions:10})]}),t.jsxs("div",{className:"flex justify-end",children:[t.jsx("button",{type:"button",onClick:r,className:"mr-2 rounded bg-gray-500 px-4 py-2 text-white hover:cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-white hover:cursor-pointer",children:e?"Update":"Create"})]})]})}export{E as default};
