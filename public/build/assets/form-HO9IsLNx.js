import{r as i,j as e,a as c}from"./app-CyshOikY.js";import{F as x}from"./form-modal-4FT4Be0w.js";import{t as v}from"./index-BUAJzwt7.js";/* empty css            */import"./proxy-oNfkOipB.js";import"./index-CI7l1avO.js";function g({isOpen:p,onClose:o,setting:t}){const[r,s]=i.useState({key:"",value:"",title:""});i.useEffect(()=>{s(t?{key:t.key,value:t.value,title:t.title||"",type:t.type||"text"}:{key:"",value:"",title:"",type:"text"})},[t]);const m=u=>{const{name:l,value:a,type:n}=u.target;r.type==="number"&&l==="value"?(a===""||/^\d+$/.test(a))&&s(d=>({...d,[l]:a})):s(d=>({...d,[l]:a}))},y=u=>{if(u.preventDefault(),!(t!=null&&t.id)){o();return}const l={...r,_method:"PUT"};c.post(`/school-settings/${t.id}`,l,{preserveScroll:!0,onSuccess:()=>{o(),c.reload()},onError:a=>{const n=Object.values(a).join(`
`);v.error(`Failed to update setting: ${n}`)}})};return e.jsxs(x,{isOpen:p,onClose:o,title:"Edit Pengaturan",onSubmit:y,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"key",className:"block text-sm font-medium text-gray-700",children:"Key"}),e.jsx("input",{id:"key",name:"key",type:"text",value:r.title||r.key,readOnly:!0,className:"w-full rounded border bg-gray-100 p-2"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"value",className:"block text-sm font-medium text-gray-700",children:["Value",(r.key==="late_tolerance"||r.key==="early_tolerance")&&" (Menit)"]}),r.type==="text"?e.jsx("textarea",{id:"value",name:"value",value:r.value,onChange:m,className:"w-full rounded border p-2",required:!0,rows:5}):e.jsx("input",{id:"value",name:"value",type:"text",value:r.value,onChange:m,className:"w-full rounded border p-2",required:!0,pattern:"\\d*"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:o,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:"Update"})]})]})}export{g as default};
