import{r as c,j as e,a as i}from"./app-CvAnSinX.js";import{A as j}from"./action-modal-Bdoc7ZDB.js";import{F as _}from"./form-modal-DQ3KyQRy.js";import{t as s}from"./index-DnWO26yp.js";/* empty css            */import"./proxy-DE-vQ-Zk.js";import"./index-kQ2Xj6en.js";function S({isOpen:u,closeModal:o,academicYear:t,attendanceModes:y}){const[l,d]=c.useState({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),[p,n]=c.useState(!1);c.useEffect(()=>{d(t?{start_year:t.start_year,attendance_mode:t.attendance_mode,note:t.note||""}:{start_year:new Date().getFullYear(),attendance_mode:"",note:""})},[t]);const m=a=>{const{name:r,value:h}=a.target;d(b=>({...b,[r]:h}))},x=a=>{a.preventDefault(),t?f():n(!0)},f=()=>{n(!1);const a={...l};t?i.post(`/academic-years/${t.id}`,{...a,_method:"PUT"},{onSuccess:()=>{o(),s.success("Academic year updated successfully."),i.reload()},onError:r=>{r.start_year?s.error("Failed to update academic year: "+r.start_year):s.error("Failed to update academic year")}}):i.post("/academic-years",a,{onSuccess:()=>{o(),s.success("Academic year created successfully."),i.reload()},onError:r=>{r.start_year?s.error("Failed to create academic year: "+r.start_year):s.error("Failed to create academic year")}})};return u?e.jsxs(e.Fragment,{children:[e.jsxs(_,{isOpen:u,onClose:o,title:t?"Edit Tahun Akademik":"Tambah Tahun Akademik",onSubmit:x,children:[e.jsxs("div",{className:"mb-3 flex flex-wrap justify-between",children:[e.jsx("label",{htmlFor:"start_year",className:"block text-sm font-medium text-gray-700",children:"Start year"}),e.jsx("input",{type:"number",id:"start_year",name:"start_year",value:l.start_year,onChange:m,className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"attendance_mode",className:"block text-sm font-medium text-gray-700",children:"Attendance Mode"}),e.jsxs("select",{name:"attendance_mode",value:l.attendance_mode,onChange:m,className:"w-full rounded border p-2",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Mode --"}),y.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:"Catatan (optional)"}),e.jsx("textarea",{name:"note",value:l.note,onChange:m,className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:o,className:"mr-2 rounded bg-gray-500 px-4 py-2 text-white hover:cursor-pointer",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-white hover:cursor-pointer",children:t?"Update":"Simpan"})]})]}),e.jsx(j,{isOpen:p,title:"Confirmation",message:"Are you sure you want to create new academic year?",buttons:[{label:"Cancel",onClick:()=>n(!1),variant:"neutral"},{label:"Confirm",onClick:()=>{f(),n(!1)},variant:"primary"}],onClose:()=>n(!1)})]}):null}export{S as default};
