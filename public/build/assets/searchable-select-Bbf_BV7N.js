<<<<<<<< HEAD:public/build/assets/searchable-select-CzritEmG.js
import{r as s,j as r,D as V}from"./app-CyshOikY.js";function I({value:g,onChange:d,placeholder:S="Search...",endpoint:p,initialOption:a,showInitialOptions:i=!1,maxInitialOptions:b=10,disabled:l=!1,required:j=!1}){const[v,u]=s.useState(""),[y,f]=s.useState([]),[N,c]=s.useState(!1),[E,w]=s.useState(!1),[n,o]=s.useState(a||null),m=s.useRef(null),h=s.useRef(null);s.useEffect(()=>{a&&(o(a),u(a.full_name))},[a]),s.useEffect(()=>{g===null&&n&&(o(null),u(""))},[g]),s.useEffect(()=>{const e=t=>{h.current&&!h.current.contains(t.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const x=async e=>{if(p){w(!0);try{const _=(await V.get(p,{params:{query:e},withCredentials:!0})).data.slice(0,b);f(_),c(!0)}catch(t){console.error("Error fetching options:",t),f([])}finally{w(!1)}}},C=e=>{if(l)return;const t=e.target.value;if(u(t),n&&t!==n.full_name&&(o(null),d(null)),m.current&&clearTimeout(m.current),i&&t===""){x("");return}m.current=setTimeout(()=>{t.length>=1||i&&t.length===0?x(t):(f([]),c(!1))},300)},L=e=>{o(e),u(e.full_name),d(e.id),c(!1)},R=()=>{o(null),u(""),d(null),f([]),c(!1)},k=()=>{l||i&&v===""&&x("")};return r.jsxs("div",{className:"relative",ref:h,children:[r.jsxs("div",{className:`flex mt-1 items-center block border p-2 border-gray-300 rounded-md shadow-sm ${l?"bg-gray-100 cursor-not-allowed":"bg-white"}`,children:[r.jsx("input",{type:"text",value:v,onChange:C,placeholder:S,onFocus:k,disabled:l,className:"flex-1 outline-none w-full",required:j}),n&&!l&&r.jsx("button",{type:"button",onClick:R,className:"px-2 text-gray-500 hover:text-red-500",children:"×"})]}),!l&&N&&r.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:E?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Loading..."}):y.length===0?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"No results found"}):y.map(e=>r.jsx("div",{onClick:()=>L(e),className:`px-3 py-2 hover:bg-gray-100 cursor-pointer ${(n==null?void 0:n.id)===e.id?"bg-blue-50":""}`,children:e.full_name},e.id))})]})}export{I as S};
========
import{r as s,j as r,D as V}from"./app-DGEpaMO1.js";function I({value:g,onChange:d,placeholder:S="Search...",endpoint:p,initialOption:a,showInitialOptions:i=!1,maxInitialOptions:b=10,disabled:l=!1,required:j=!1}){const[v,u]=s.useState(""),[y,f]=s.useState([]),[N,c]=s.useState(!1),[E,w]=s.useState(!1),[n,o]=s.useState(a||null),m=s.useRef(null),h=s.useRef(null);s.useEffect(()=>{a&&(o(a),u(a.full_name))},[a]),s.useEffect(()=>{g===null&&n&&(o(null),u(""))},[g]),s.useEffect(()=>{const e=t=>{h.current&&!h.current.contains(t.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const x=async e=>{if(p){w(!0);try{const _=(await V.get(p,{params:{query:e},withCredentials:!0})).data.slice(0,b);f(_),c(!0)}catch(t){console.error("Error fetching options:",t),f([])}finally{w(!1)}}},C=e=>{if(l)return;const t=e.target.value;if(u(t),n&&t!==n.full_name&&(o(null),d(null)),m.current&&clearTimeout(m.current),i&&t===""){x("");return}m.current=setTimeout(()=>{t.length>=1||i&&t.length===0?x(t):(f([]),c(!1))},300)},L=e=>{o(e),u(e.full_name),d(e.id),c(!1)},R=()=>{o(null),u(""),d(null),f([]),c(!1)},k=()=>{l||i&&v===""&&x("")};return r.jsxs("div",{className:"relative",ref:h,children:[r.jsxs("div",{className:`flex mt-1 items-center block border p-2 border-gray-300 rounded-md shadow-sm ${l?"bg-gray-100 cursor-not-allowed":"bg-white"}`,children:[r.jsx("input",{type:"text",value:v,onChange:C,placeholder:S,onFocus:k,disabled:l,className:"flex-1 outline-none w-full",required:j}),n&&!l&&r.jsx("button",{type:"button",onClick:R,className:"px-2 text-gray-500 hover:text-red-500",children:"×"})]}),!l&&N&&r.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:E?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Loading..."}):y.length===0?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"No results found"}):y.map(e=>r.jsx("div",{onClick:()=>L(e),className:`px-3 py-2 hover:bg-gray-100 cursor-pointer ${(n==null?void 0:n.id)===e.id?"bg-blue-50":""}`,children:e.full_name},e.id))})]})}export{I as S};
>>>>>>>> 3fb362c529c4cbbe7c0ae280f60cfcd094c1e65f:public/build/assets/searchable-select-Bbf_BV7N.js
