<<<<<<<< HEAD:public/build/assets/edit-CIToiRNv.js
import{C as W,r as h,u as $,j as e,H as z,a as P}from"./app-sxI5phRt.js";import{S as I}from"./student-assignment-modal-BBnQQ86b.js";import{A as O}from"./app-layout-gVWl4Knz.js";import{g as N,i as q}from"./academic-year-utils-Dz9eUY6J.js";import{t as r,T as F}from"./index-3SOvTXV5.js";/* empty css            */import"./button-DgfB8Fa3.js";import"./index-6He9QOFr.js";import"./index-C8TJexM_.js";import"./index-D9ZANrDr.js";import"./createLucideIcon-BshVdAbN.js";import"./app-logo-icon-D07B7uoj.js";const R=[{title:"Ujian",href:"/exams"},{title:"Edit Ujian",href:""}];function ne({exam:i,subjects:j,academicYears:x,classrooms:v}){var y;const{data:a,setData:m,put:_,processing:f}=W({subject_id:i.subject_id,name:i.name,type:i.type||"",date:i.date,student_assignments:(i.student_assignments||[]).map(s=>({student_id:s.student_id,student_name:s.student_name,nis:s.nis,class_name:s.class_name,class_id:s.class_id,score:s.score,is_scored:s.is_scored}))}),[w,g]=h.useState(!1),[k,S]=h.useState(i.name.length),[L,M]=h.useState((i.type||"").length),C=(s,t)=>{const l=N(t);return!q(s,l)},u=x.find(s=>s.id===i.academic_year_id),n=C(u,x),p=N(x),{errors:d,flash:c}=$().props;h.useEffect(()=>{c!=null&&c.success&&r.success(c.success),c!=null&&c.error&&r.error(c.error),d&&Object.keys(d).length>0&&Object.values(d).forEach(t=>{r.error(t)})},[c,d]);const T=s=>{if(s.preventDefault(),!Array.isArray(a.student_assignments)||a.student_assignments.length===0){r.error("Minimal harus memilih 1 siswa untuk exam ini");return}const t=r.loading("Memperbarui exam...");_(`/exams/${i.id}`,{onSuccess:()=>{r.dismiss(t)},onError:l=>{r.dismiss(t),l.student_assignments?r.error("Terjadi kesalahan pada data siswa yang dipilih"):l.name?r.error("Nama ujian tidak valid"):l.subject_id?r.error("Mata pelajaran harus dipilih"):r.error("Terjadi kesalahan validasi data")},onFinish:()=>{r.dismiss(t)}})},A=s=>{const t=s.target.value;t.length<=70&&(m("name",t),S(t.length))},E=s=>{const t=s.target.value;t.length<=70&&(m("type",t),M(t.length))},B=s=>{const t=a.student_assignments.map(o=>o.student_id),l=s.filter(o=>!t.includes(o.student_id));m("student_assignments",[...a.student_assignments,...l.map(o=>({student_id:o.student_id,student_name:o.student_name,nis:o.nis,class_name:o.class_name,class_id:o.class_id,score:o.score??null,is_scored:o.is_scored??!1}))]),g(!1),r.success(`${l.length} siswa berhasil ditambahkan`)},U=(s,t=!1)=>{t&&!window.confirm("Siswa ini sudah memiliki nilai. Menghapus siswa akan menghilangkan data nilai tersebut. Apakah Anda yakin ingin melanjutkan?")||(m("student_assignments",a.student_assignments.filter(l=>l.student_id!==s)),r.success("Siswa berhasil dihapus dari exam"))},b=x.find(s=>s.id===i.academic_year_id)||i.academic_year,H=a.student_assignments.filter(s=>s.is_scored).length,D=a.student_assignments.length;return e.jsxs(O,{breadcrumbs:R,children:[e.jsx(z,{title:`Edit Ujian - ${i.name}`}),e.jsx(F,{position:"top-right",richColors:!0}),!n&&e.jsx("div",{className:"m-6 mb-4 rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"mr-2 h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.99-.833-2.46 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-yellow-800",children:["Tahun ajaran ",u==null?void 0:u.title," sudah lewat dari tahun ajaran aktif (",p==null?void 0:p.title,")."]}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Data hanya dapat dilihat dan tidak dapat diubah."})]})]})}),e.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-6 text-2xl font-semibold text-gray-900",children:["Edit Ujian: ",i.name]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tahun Ajaran"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:(b==null?void 0:b.title)||"Loading...",disabled:!0,className:"w-full cursor-not-allowed rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 text-gray-600",readOnly:!0}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-xs text-amber-600",children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.99-.833-2.46 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Tahun ajaran tidak dapat diubah setelah exam dibuat"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Mata Pelajaran *"}),n?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:a.subject_id,onChange:s=>m("subject_id",parseInt(s.target.value)),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Pilih mata pelajaran"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Dropdown, taken from table subjects"}),d.subject_id&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.subject_id})]}):e.jsx("div",{className:"w-full cursor-not-allowed rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 text-gray-600",children:((y=j.find(s=>s.id===a.subject_id))==null?void 0:y.name)||"Tidak diketahui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Nama Ujian *"}),e.jsx("input",{type:"text",value:a.name,onChange:A,className:`w-full rounded-lg border border-gray-300 px-4 py-2 ${n?"focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none":"cursor-not-allowed bg-gray-100 text-gray-600"}`,placeholder:"Masukkan nama ujian",required:!0,disabled:!n}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["String, max 70 char (",k,"/70)"]}),d.name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tipe (optional)"}),e.jsx("input",{type:"text",value:a.type,onChange:E,className:`w-full rounded-lg border border-gray-300 px-4 py-2 ${n?"focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none":"cursor-not-allowed bg-gray-100 text-gray-600"}`,placeholder:"Contoh: Ulangan Harian, Quiz, UTS, UAS",disabled:!n}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["String, max 70 char (optional) (",L,"/70)"]}),d.type&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tanggal Pelaksanaan *"}),e.jsx("input",{type:"date",value:a.date,onChange:s=>m("date",s.target.value),className:`w-full rounded-lg border border-gray-300 px-4 py-2 ${n?"focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none":"cursor-not-allowed bg-gray-100 text-gray-600"}`,required:!0,disabled:!n}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select date (dateonly) in calendar"}),d.date&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.date})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Student Assignments"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[H," dari ",D," siswa sudah dinilai"]})]}),n?e.jsx("p",{className:"max-w-md text-right text-sm text-red-600",children:"⚠️ Warning: Menghapus siswa yang sudah dinilai akan menghilangkan data skor mereka!"}):e.jsx("p",{className:"max-w-md text-right text-sm text-red-600",children:"⚠️ Tahun ajaran sudah lewat, tidak dapat mengubah data siswa"})]}),a.student_assignments.length>0?e.jsx("div",{className:"mb-4 overflow-hidden rounded-lg border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"NIS"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Kelas"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-900",children:"Status Nilai"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Action"})]})}),e.jsx("tbody",{children:a.student_assignments.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.student_name,s.is_scored&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800",children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Sudah Dinilai"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.nis||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.class_name}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.is_scored?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"inline-flex rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800",children:"Sudah Dinilai"}),e.jsxs("span",{className:"mt-1 text-xs text-gray-600",children:["Nilai: ",s.score]})]}):e.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-800",children:"Belum Dinilai"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("button",{type:"button",onClick:()=>U(s.student_id,s.is_scored),className:`flex items-center gap-1 rounded px-2 py-1 text-xs text-white ${n?"bg-red-500 hover:bg-red-600 hover:opacity-90":"cursor-not-allowed bg-red-300"}`,title:s.is_scored?"Hati-hati: Siswa ini sudah memiliki nilai!":"Hapus siswa dari exam",disabled:!n,children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})})]},s.student_id))})]})}):e.jsx("div",{className:"mb-4 rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada siswa yang di-assign ke exam ini"})}),n&&e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Siswa"]})]}),n&&e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-6",children:[e.jsx("button",{type:"button",onClick:()=>P.get("/exams"),className:"rounded-lg border border-gray-300 bg-white px-6 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:f||!n,className:"rounded-lg bg-blue-600 px-6 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:f?"Memperbarui...":"Update"})]})]})]}),n&&e.jsx(I,{isOpen:w,onClose:()=>g(!1),onSubmit:B,classrooms:v,assignedStudentIds:a.student_assignments.map(s=>s.student_id)})]})}export{ne as default};
========
import{C as W,r as h,u as $,j as e,H as z,a as P}from"./app-CMV-yYZ_.js";import{S as I}from"./student-assignment-modal-DwmnREv1.js";import{A as O}from"./app-layout-DNRiKue-.js";import{g as N,i as q}from"./academic-year-utils-Dz9eUY6J.js";import{t as r,T as F}from"./index-CfTTW-PA.js";/* empty css            */import"./button-CC3FwLZQ.js";import"./index-Bha_FR3o.js";import"./index-DSk08Zci.js";import"./index-DSfEvC60.js";import"./createLucideIcon-BVVfRUjU.js";import"./app-logo-icon-CRXqWH6Q.js";const R=[{title:"Ujian",href:"/exams"},{title:"Edit Ujian",href:""}];function ne({exam:i,subjects:j,academicYears:x,classrooms:v}){var y;const{data:a,setData:m,put:_,processing:f}=W({subject_id:i.subject_id,name:i.name,type:i.type||"",date:i.date,student_assignments:(i.student_assignments||[]).map(s=>({student_id:s.student_id,student_name:s.student_name,nis:s.nis,class_name:s.class_name,class_id:s.class_id,score:s.score,is_scored:s.is_scored}))}),[w,g]=h.useState(!1),[k,S]=h.useState(i.name.length),[L,M]=h.useState((i.type||"").length),C=(s,t)=>{const l=N(t);return!q(s,l)},u=x.find(s=>s.id===i.academic_year_id),n=C(u,x),p=N(x),{errors:d,flash:c}=$().props;h.useEffect(()=>{c!=null&&c.success&&r.success(c.success),c!=null&&c.error&&r.error(c.error),d&&Object.keys(d).length>0&&Object.values(d).forEach(t=>{r.error(t)})},[c,d]);const T=s=>{if(s.preventDefault(),!Array.isArray(a.student_assignments)||a.student_assignments.length===0){r.error("Minimal harus memilih 1 siswa untuk exam ini");return}const t=r.loading("Memperbarui exam...");_(`/exams/${i.id}`,{onSuccess:()=>{r.dismiss(t)},onError:l=>{r.dismiss(t),l.student_assignments?r.error("Terjadi kesalahan pada data siswa yang dipilih"):l.name?r.error("Nama ujian tidak valid"):l.subject_id?r.error("Mata pelajaran harus dipilih"):r.error("Terjadi kesalahan validasi data")},onFinish:()=>{r.dismiss(t)}})},A=s=>{const t=s.target.value;t.length<=70&&(m("name",t),S(t.length))},E=s=>{const t=s.target.value;t.length<=70&&(m("type",t),M(t.length))},B=s=>{const t=a.student_assignments.map(o=>o.student_id),l=s.filter(o=>!t.includes(o.student_id));m("student_assignments",[...a.student_assignments,...l.map(o=>({student_id:o.student_id,student_name:o.student_name,nis:o.nis,class_name:o.class_name,class_id:o.class_id,score:o.score??null,is_scored:o.is_scored??!1}))]),g(!1),r.success(`${l.length} siswa berhasil ditambahkan`)},U=(s,t=!1)=>{t&&!window.confirm("Siswa ini sudah memiliki nilai. Menghapus siswa akan menghilangkan data nilai tersebut. Apakah Anda yakin ingin melanjutkan?")||(m("student_assignments",a.student_assignments.filter(l=>l.student_id!==s)),r.success("Siswa berhasil dihapus dari exam"))},b=x.find(s=>s.id===i.academic_year_id)||i.academic_year,H=a.student_assignments.filter(s=>s.is_scored).length,D=a.student_assignments.length;return e.jsxs(O,{breadcrumbs:R,children:[e.jsx(z,{title:`Edit Ujian - ${i.name}`}),e.jsx(F,{position:"top-right",richColors:!0}),!n&&e.jsx("div",{className:"m-6 mb-4 rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"mr-2 h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.99-.833-2.46 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-yellow-800",children:["Tahun ajaran ",u==null?void 0:u.title," sudah lewat dari tahun ajaran aktif (",p==null?void 0:p.title,")."]}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Data hanya dapat dilihat dan tidak dapat diubah."})]})]})}),e.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-6 text-2xl font-semibold text-gray-900",children:["Edit Ujian: ",i.name]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tahun Ajaran"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:(b==null?void 0:b.title)||"Loading...",disabled:!0,className:"w-full cursor-not-allowed rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 text-gray-600",readOnly:!0}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-xs text-amber-600",children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.99-.833-2.46 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Tahun ajaran tidak dapat diubah setelah exam dibuat"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Mata Pelajaran *"}),n?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:a.subject_id,onChange:s=>m("subject_id",parseInt(s.target.value)),className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Pilih mata pelajaran"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Dropdown, taken from table subjects"}),d.subject_id&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.subject_id})]}):e.jsx("div",{className:"w-full cursor-not-allowed rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 text-gray-600",children:((y=j.find(s=>s.id===a.subject_id))==null?void 0:y.name)||"Tidak diketahui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Nama Ujian *"}),e.jsx("input",{type:"text",value:a.name,onChange:A,className:`w-full rounded-lg border border-gray-300 px-4 py-2 ${n?"focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none":"cursor-not-allowed bg-gray-100 text-gray-600"}`,placeholder:"Masukkan nama ujian",required:!0,disabled:!n}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["String, max 70 char (",k,"/70)"]}),d.name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tipe (optional)"}),e.jsx("input",{type:"text",value:a.type,onChange:E,className:`w-full rounded-lg border border-gray-300 px-4 py-2 ${n?"focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none":"cursor-not-allowed bg-gray-100 text-gray-600"}`,placeholder:"Contoh: Ulangan Harian, Quiz, UTS, UAS",disabled:!n}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["String, max 70 char (optional) (",L,"/70)"]}),d.type&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tanggal Pelaksanaan *"}),e.jsx("input",{type:"date",value:a.date,onChange:s=>m("date",s.target.value),className:`w-full rounded-lg border border-gray-300 px-4 py-2 ${n?"focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none":"cursor-not-allowed bg-gray-100 text-gray-600"}`,required:!0,disabled:!n}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select date (dateonly) in calendar"}),d.date&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:d.date})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Student Assignments"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[H," dari ",D," siswa sudah dinilai"]})]}),n?e.jsx("p",{className:"max-w-md text-right text-sm text-red-600",children:"⚠️ Warning: Menghapus siswa yang sudah dinilai akan menghilangkan data skor mereka!"}):e.jsx("p",{className:"max-w-md text-right text-sm text-red-600",children:"⚠️ Tahun ajaran sudah lewat, tidak dapat mengubah data siswa"})]}),a.student_assignments.length>0?e.jsx("div",{className:"mb-4 overflow-hidden rounded-lg border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"NIS"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Kelas"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-900",children:"Status Nilai"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Action"})]})}),e.jsx("tbody",{children:a.student_assignments.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.student_name,s.is_scored&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800",children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Sudah Dinilai"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.nis||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.class_name}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.is_scored?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"inline-flex rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800",children:"Sudah Dinilai"}),e.jsxs("span",{className:"mt-1 text-xs text-gray-600",children:["Nilai: ",s.score]})]}):e.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-800",children:"Belum Dinilai"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("button",{type:"button",onClick:()=>U(s.student_id,s.is_scored),className:`flex items-center gap-1 rounded px-2 py-1 text-xs text-white ${n?"bg-red-500 hover:bg-red-600 hover:opacity-90":"cursor-not-allowed bg-red-300"}`,title:s.is_scored?"Hati-hati: Siswa ini sudah memiliki nilai!":"Hapus siswa dari exam",disabled:!n,children:[e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})})]},s.student_id))})]})}):e.jsx("div",{className:"mb-4 rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada siswa yang di-assign ke exam ini"})}),n&&e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Siswa"]})]}),n&&e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-6",children:[e.jsx("button",{type:"button",onClick:()=>P.get("/exams"),className:"rounded-lg border border-gray-300 bg-white px-6 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:f||!n,className:"rounded-lg bg-blue-600 px-6 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:f?"Memperbarui...":"Update"})]})]})]}),n&&e.jsx(I,{isOpen:w,onClose:()=>g(!1),onSubmit:B,classrooms:v,assignedStudentIds:a.student_assignments.map(s=>s.student_id)})]})}export{ne as default};
>>>>>>>> 10824676ed68294191d12fcb998912785234112b:public/build/assets/edit-CaQ_tFH3.js
