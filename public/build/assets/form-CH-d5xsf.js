import{r as c,j as e,a as n}from"./app-DWRHr6as.js";import{F as g}from"./form-modal-DDkN0-mX.js";import{t as f}from"./index-gTd6Qzk2.js";/* empty css            */import"./proxy-CwirBayR.js";import"./index-DeQgTDoU.js";function w({isOpen:s,onClose:o,subject:r}){const[d,u]=c.useState(!1),[l,m]=c.useState({name:"",curriculum_year:"",is_archived:!1});c.useEffect(()=>{s&&r&&!d?(m({name:r.name,curriculum_year:r.curriculum_year,is_archived:r.is_archived}),u(!0)):s&&!r&&!d&&(m({name:"",curriculum_year:"",is_archived:!1}),u(!0))},[r,s,d]),c.useEffect(()=>{s||u(!1)},[s]);const x=i=>{const{name:a,value:t}=i.target;m(h=>({...h,[a]:t}))},b=i=>{const{name:a,checked:t}=i.target;m(h=>({...h,[a]:t}))},p=i=>{i.preventDefault(),r!=null&&r.id?n.put(`/subjects/${r.id}`,{...l},{preserveScroll:!0,onSuccess:()=>{o(),n.reload()},onError:a=>{const t=Object.values(a).join(`
`);f.error(`Failed to update subject: ${t}`)}}):n.post("/subjects",{...l},{preserveScroll:!0,onSuccess:()=>{o(),n.reload()},onError:a=>{const t=Object.values(a).join(`
`);f.error(`Failed to add new subject: ${t}`)}})};return e.jsxs(g,{isOpen:s,onClose:o,title:r?"Edit Mata Pelajaran":"Tambah Mata Pelajaran",onSubmit:p,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("input",{id:"name",name:"name",type:"text",maxLength:70,value:l.name,onChange:x,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"curriculum_year",className:"block text-sm font-medium text-gray-700",children:"Nama Kurikulum"}),e.jsx("input",{id:"curriculum_year",name:"curriculum_year",type:"text",maxLength:70,value:l.curriculum_year,onChange:x,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx("input",{type:"checkbox",id:"is_archived",name:"is_archived",checked:l.is_archived,onChange:b,className:"h-4 w-4 rounded border-gray-300 text-blue-600 transition-all focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 focus:ring-offset-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"Archive this subject"}),e.jsx("span",{className:"mt-0.5 block text-xs text-gray-500",children:"Archived subjects will be hidden from default views but remain accessible"})]})]})}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:o,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:r?"Update":"Simpan"})]})]})}export{w as default};
