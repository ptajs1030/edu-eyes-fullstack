import{r as h,j as n,R as W,b as Se,u as we,H as _e,a as Ne}from"./app-BMCcA4gU.js";import{S as be}from"./searchable-select-U7i5R3En.js";import{A as Ee}from"./app-layout-CmufaJdi.js";import{t as Y,T as Pe}from"./index-CWoY2duQ.js";import{$ as pe,a as Te,w as $e,e as Ie,o as O,b as Ce}from"./use-resolve-button-type-B6M61dAd.js";import{K as X,L as z,f as Fe,y as re,n as ae,o as K,_ as xe,s as se,O as fe,u as te,t as Ae}from"./use-is-mounted-D_WQoJ_R.js";/* empty css            */import"./button-DSFSHTny.js";import"./index-ls6TQrSA.js";import"./index-BQN3R4d4.js";import"./index-BIXoL2bP.js";import"./createLucideIcon-UzT6EnFx.js";import"./app-logo-icon-bBarrMFh.js";function Me({value:e,onChange:t,placeholder:o="Search...",options:s}){const[c,m]=h.useState(""),[d,p]=h.useState(!1),N=h.useRef(null),w=s.filter(u=>u.name.toLowerCase().includes(c.toLowerCase())&&!e.includes(u.id)),x=s.filter(u=>e.includes(u.id));h.useEffect(()=>{const u=f=>{N.current&&!N.current.contains(f.target)&&p(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const g=u=>{t([...e,u.id]),m(""),p(!1)},j=u=>{t(e.filter(f=>f!==u))};return n.jsxs("div",{className:"relative",ref:N,children:[n.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:x.map(u=>n.jsxs("div",{className:"flex items-center rounded bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[n.jsx("span",{children:u.name}),n.jsx("button",{type:"button",onClick:()=>j(u.id),className:"ml-1 text-gray-500 hover:text-red-500 hover:cursor-pointer",children:"×"})]},u.id))}),n.jsx("div",{className:"flex border border-gray-300 rounded",children:n.jsx("input",{type:"text",value:c,onChange:u=>m(u.target.value),placeholder:o,className:"flex-1 px-3 py-2 outline-none",onFocus:()=>p(!0)})}),d&&n.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:w.length===0?n.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Tidak ditemukan"}):w.map(u=>n.jsx("div",{onClick:()=>g(u),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:u.name},u.id))})]})}let Oe="span";var ge=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ge||{});function ke(e,t){var o;let{features:s=1,...c}=e,m={ref:t,"aria-hidden":(s&2)===2?!0:(o=c["aria-hidden"])!=null?o:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return z()({ourProps:m,theirProps:c,slot:{},defaultTag:Oe,name:"Hidden"})}let ve=X(ke),De=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Le=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var F=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(F||{}),ee=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ee||{}),Re=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Re||{});function Ge(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(De)).sort((t,o)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}function Ue(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Le)).sort((t,o)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ke=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Ke||{}),Be=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Be||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let He=["textarea","input"].join(",");function Je(e){var t,o;return(o=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,He))!=null?o:!1}function V(e,t=o=>o){return e.slice().sort((o,s)=>{let c=t(o),m=t(s);if(c===null||m===null)return 0;let d=c.compareDocumentPosition(m);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function H(e,t,{sorted:o=!0,relativeTo:s=null,skipElements:c=[]}={}){let m=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,d=Array.isArray(e)?o?V(e):e:t&64?Ue(e):Ge(e);c.length>0&&d.length>1&&(d=d.filter(u=>!c.some(f=>f!=null&&"current"in f?(f==null?void 0:f.current)===u:f===u))),s=s??m.activeElement;let p=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),N=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,d.indexOf(s))-1;if(t&4)return Math.max(0,d.indexOf(s))+1;if(t&8)return d.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),w=t&32?{preventScroll:!0}:{},x=0,g=d.length,j;do{if(x>=g||x+g<=0)return 0;let u=N+x;if(t&16)u=(u+g)%g;else{if(u<0)return 3;if(u>=g)return 1}j=d[u],j==null||j.focus(w),x+=p}while(j!==m.activeElement);return t&6&&Je(j)&&j.select(),2}function We({onFocus:e}){let[t,o]=h.useState(!0),s=Fe();return t?W.createElement(ve,{as:"button",type:"button",features:ge.Focusable,onFocus:c=>{c.preventDefault();let m,d=50;function p(){if(d--<=0){m&&cancelAnimationFrame(m);return}if(e()){if(cancelAnimationFrame(m),!s.current)return;o(!1);return}m=requestAnimationFrame(p)}m=requestAnimationFrame(p)}}):null}const ye=h.createContext(null);function Ve(){return{groups:new Map,get(e,t){var o;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let c=(o=s.get(t))!=null?o:0;s.set(t,c+1);let m=Array.from(s.keys()).indexOf(t);function d(){let p=s.get(t);p>1?s.set(t,p-1):s.delete(t)}return[m,d]}}}function qe({children:e}){let t=h.useRef(Ve());return h.createElement(ye.Provider,{value:t},e)}function je(e){let t=h.useContext(ye);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let o=h.useId(),[s,c]=t.current.get(e,o);return h.useEffect(()=>c,[]),s}var Xe=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Xe||{}),ze=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ze||{}),Qe=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Qe||{});let Ze={0(e,t){var o;let s=V(e.tabs,x=>x.current),c=V(e.panels,x=>x.current),m=s.filter(x=>{var g;return!((g=x.current)!=null&&g.hasAttribute("disabled"))}),d={...e,tabs:s,panels:c};if(t.index<0||t.index>s.length-1){let x=te(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>te(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(m.length===0)return d;let g=te(x,{0:()=>s.indexOf(m[0]),1:()=>s.indexOf(m[m.length-1])});return{...d,selectedIndex:g===-1?e.selectedIndex:g}}let p=s.slice(0,t.index),N=[...s.slice(t.index),...p].find(x=>m.includes(x));if(!N)return d;let w=(o=s.indexOf(N))!=null?o:e.selectedIndex;return w===-1&&(w=e.selectedIndex),{...d,selectedIndex:w}},1(e,t){if(e.tabs.includes(t.tab))return e;let o=e.tabs[e.selectedIndex],s=V([...e.tabs,t.tab],m=>m.current),c=e.selectedIndex;return e.info.current.isControlled||(c=s.indexOf(o),c===-1&&(c=e.selectedIndex)),{...e,tabs:s,selectedIndex:c}},2(e,t){return{...e,tabs:e.tabs.filter(o=>o!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:V([...e.panels,t.panel],o=>o.current)}},4(e,t){return{...e,panels:e.panels.filter(o=>o!==t.panel)}}},de=h.createContext(null);de.displayName="TabsDataContext";function q(e){let t=h.useContext(de);if(t===null){let o=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,q),o}return t}let ce=h.createContext(null);ce.displayName="TabsActionsContext";function me(e){let t=h.useContext(ce);if(t===null){let o=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,me),o}return t}function Ye(e,t){return te(t.type,Ze,e,t)}let et="div";function tt(e,t){let{defaultIndex:o=0,vertical:s=!1,manual:c=!1,onChange:m,selectedIndex:d=null,...p}=e;const N=s?"vertical":"horizontal",w=c?"manual":"auto";let x=d!==null,g=se({isControlled:x}),j=re(t),[u,f]=h.useReducer(Ye,{info:g,selectedIndex:d??o,tabs:[],panels:[]}),k=h.useMemo(()=>({selectedIndex:u.selectedIndex}),[u.selectedIndex]),R=se(m||(()=>{})),E=se(u.tabs),S=h.useMemo(()=>({orientation:N,activation:w,...u}),[N,w,u]),P=K(_=>(f({type:1,tab:_}),()=>f({type:2,tab:_}))),A=K(_=>(f({type:3,panel:_}),()=>f({type:4,panel:_}))),T=K(_=>{I.current!==_&&R.current(_),x||f({type:0,index:_})}),I=se(x?e.selectedIndex:u.selectedIndex),D=h.useMemo(()=>({registerTab:P,registerPanel:A,change:T}),[]);ae(()=>{f({type:0,index:d??o})},[d]),ae(()=>{if(I.current===void 0||u.tabs.length<=0)return;let _=V(u.tabs,M=>M.current);_.some((M,L)=>u.tabs[L]!==M)&&T(_.indexOf(u.tabs[I.current]))});let Q={ref:j},U=z();return W.createElement(qe,null,W.createElement(ce.Provider,{value:D},W.createElement(de.Provider,{value:S},S.tabs.length<=0&&W.createElement(We,{onFocus:()=>{var _,M;for(let L of E.current)if(((_=L.current)==null?void 0:_.tabIndex)===0)return(M=L.current)==null||M.focus(),!0;return!1}}),U({ourProps:Q,theirProps:p,slot:k,defaultTag:et,name:"Tabs"}))))}let rt="div";function nt(e,t){let{orientation:o,selectedIndex:s}=q("Tab.List"),c=re(t),m=h.useMemo(()=>({selectedIndex:s}),[s]),d=e,p={ref:c,role:"tablist","aria-orientation":o};return z()({ourProps:p,theirProps:d,slot:m,defaultTag:rt,name:"Tabs.List"})}let st="button";function at(e,t){var o,s;let c=h.useId(),{id:m=`headlessui-tabs-tab-${c}`,disabled:d=!1,autoFocus:p=!1,...N}=e,{orientation:w,activation:x,selectedIndex:g,tabs:j,panels:u}=q("Tab"),f=me("Tab"),k=q("Tab"),[R,E]=h.useState(null),S=h.useRef(null),P=re(S,t,E);ae(()=>f.registerTab(S),[f,S]);let A=je("tabs"),T=j.indexOf(S);T===-1&&(T=A);let I=T===g,D=K(v=>{var r;let l=v();if(l===ee.Success&&x==="auto"){let i=(r=Ce(S))==null?void 0:r.activeElement,a=k.tabs.findIndex(b=>b.current===i);a!==-1&&f.change(a)}return l}),Q=K(v=>{let r=j.map(l=>l.current).filter(Boolean);if(v.key===O.Space||v.key===O.Enter){v.preventDefault(),v.stopPropagation(),f.change(T);return}switch(v.key){case O.Home:case O.PageUp:return v.preventDefault(),v.stopPropagation(),D(()=>H(r,F.First));case O.End:case O.PageDown:return v.preventDefault(),v.stopPropagation(),D(()=>H(r,F.Last))}if(D(()=>te(w,{vertical(){return v.key===O.ArrowUp?H(r,F.Previous|F.WrapAround):v.key===O.ArrowDown?H(r,F.Next|F.WrapAround):ee.Error},horizontal(){return v.key===O.ArrowLeft?H(r,F.Previous|F.WrapAround):v.key===O.ArrowRight?H(r,F.Next|F.WrapAround):ee.Error}}))===ee.Success)return v.preventDefault()}),U=h.useRef(!1),_=K(()=>{var v;U.current||(U.current=!0,(v=S.current)==null||v.focus({preventScroll:!0}),f.change(T),Ae(()=>{U.current=!1}))}),M=K(v=>{v.preventDefault()}),{isFocusVisible:L,focusProps:B}=pe({autoFocus:p}),{isHovered:Z,hoverProps:oe}=Te({isDisabled:d}),{pressed:ne,pressProps:le}=$e({disabled:d}),ie=h.useMemo(()=>({selected:I,hover:Z,active:ne,focus:L,autofocus:p,disabled:d}),[I,Z,L,ne,p,d]),ue=xe({ref:P,onKeyDown:Q,onMouseDown:M,onClick:_,id:m,role:"tab",type:Ie(e,R),"aria-controls":(s=(o=u[T])==null?void 0:o.current)==null?void 0:s.id,"aria-selected":I,tabIndex:I?0:-1,disabled:d||void 0,autoFocus:p},B,oe,le);return z()({ourProps:ue,theirProps:N,slot:ie,defaultTag:st,name:"Tabs.Tab"})}let ot="div";function lt(e,t){let{selectedIndex:o}=q("Tab.Panels"),s=re(t),c=h.useMemo(()=>({selectedIndex:o}),[o]),m=e,d={ref:s};return z()({ourProps:d,theirProps:m,slot:c,defaultTag:ot,name:"Tabs.Panels"})}let it="div",ut=fe.RenderStrategy|fe.Static;function dt(e,t){var o,s,c,m;let d=h.useId(),{id:p=`headlessui-tabs-panel-${d}`,tabIndex:N=0,...w}=e,{selectedIndex:x,tabs:g,panels:j}=q("Tab.Panel"),u=me("Tab.Panel"),f=h.useRef(null),k=re(f,t);ae(()=>u.registerPanel(f),[u,f]);let R=je("panels"),E=j.indexOf(f);E===-1&&(E=R);let S=E===x,{isFocusVisible:P,focusProps:A}=pe(),T=h.useMemo(()=>({selected:S,focus:P}),[S,P]),I=xe({ref:k,id:p,role:"tabpanel","aria-labelledby":(s=(o=g[E])==null?void 0:o.current)==null?void 0:s.id,tabIndex:S?N:-1},A),D=z();return!S&&((c=w.unmount)==null||c)&&!((m=w.static)!=null&&m)?W.createElement(ve,{"aria-hidden":"true",...I}):D({ourProps:I,theirProps:w,slot:T,defaultTag:it,features:ut,visible:S,name:"Tabs.Panel"})}let ct=X(at),mt=X(tt),ht=X(nt),bt=X(lt),ft=X(dt),J=Object.assign(ct,{Group:mt,List:ht,Panels:bt,Panel:ft});const pt=(e,t)=>[{title:"Kelas",href:"/classrooms"},{title:e,href:`/classrooms/${t}`},{title:"Jadwal",href:""}];function It({classroom:e,days:t,shiftings:o,teachers:s,academicYear:c,subjectSchedulesByDay:m,subjects:d}){const{data:p,setData:N,post:w,processing:x}=Se({days:t}),[g,j]=h.useState(()=>le(m)),[u,f]=h.useState(!1),[k,R]=h.useState(c.attendance_mode==="per-shift"?0:1),[E,S]=h.useState(null),{flash:P}=we().props,A=c.attendance_mode==="per-shift",T=c.attendance_mode==="per-subject",I=h.useMemo(()=>ie(s),[s]);h.useEffect(()=>{P!=null&&P.success&&Y.success(P.success),P!=null&&P.error&&Y.error(P.error)},[P]),h.useEffect(()=>{R(A?0:1)},[c.attendance_mode]);const D=r=>{r===0&&A||r===1&&T?R(r):Y.warning(`Current attendance mode is "${c.attendance_mode}". Switch mode in Academic Year settings to access this feature.`)},Q=(r,l)=>{const i=[...p.days];i[r]={...i[r],shifting_id:l,teachers:l?i[r].teachers:[],selected_teachers:l?i[r].selected_teachers:[]},N("days",i)},U=(r,l)=>{const i=[...p.days],a=l.filter(y=>y!==null).map(Number),b=a.map(y=>{var $;return{id:y,name:(($=s.find(G=>G.id===y))==null?void 0:$.full_name)||"Unknown"}});i[r]={...i[r],teachers:a,selected_teachers:b},N("days",i)},_=(r,l)=>{const i={...g[r][l]};S({day:r,index:l,original:i})},M=(r,l)=>{E&&(j(i=>{const a=[...i[r]];return a[l]=E.original,{...i,[r]:a}}),S(null))},L=r=>{j(l=>({...l,[r]:[...l[r]||[],{subject_id:null,teacher_id:null,start_hour:"",end_hour:"",editable:!0}]}))},B=(r,l,i,a)=>{j(b=>{const y=[...b[r]];return y[l]={...y[l],[i]:a},{...b,[r]:y}})},Z=(r,l)=>{j(i=>{const a=[...i[r]];return a.splice(l,1),{...i,[r]:a}})},oe=r=>{r.preventDefault(),w(route("classrooms.schedule.shift.save",e.id))},ne=r=>{r.preventDefault();const l=ue(g),i=v(l);if(i.length>0){i.forEach(a=>Y.error(a));return}f(!0),Ne.post(route("classrooms.schedule.subject.save",e.id),{schedules:l},{onError:a=>{Object.values(a).flat().forEach(b=>Y.error(b))},onSuccess:()=>{window.location.reload()},onFinish:()=>{f(!1)}})};function le(r){var i;const l={};for(let a=1;a<=7;a++)l[a]=((i=r[a])==null?void 0:i.map(b=>({id:b.id,subject_id:b.subject_id,teacher_id:b.teacher_id,start_hour:b.start_hour,end_hour:b.end_hour})))||[];return l}function ie(r){return r.map(l=>({id:l.id,name:l.full_name}))}function ue(r){return Object.entries(r).flatMap(([l,i])=>i.map(a=>({id:a.id||void 0,day:parseInt(l),subject_id:a.subject_id??null,teacher_id:a.teacher_id??null,start_hour:a.start_hour??"",end_hour:a.end_hour??""}))).sort((l,i)=>l.day-i.day||l.start_hour.localeCompare(i.start_hour))}function v(r){const l=[],i={};return r.forEach((a,b)=>{a.day||l.push(`Schedule at index ${b+1} is missing day`),a.subject_id||l.push(`Schedule on day ${a.day} is missing subject`),a.teacher_id||l.push(`Schedule on day ${a.day} is missing teacher`),(!a.start_hour||!a.end_hour)&&l.push(`Schedule on day ${a.day} is missing start or end time`),a.end_hour<=a.start_hour&&l.push(`Day ${a.day}: End time must be after start time`),i[a.day]||(i[a.day]=[]),i[a.day].push(a)}),Object.entries(i).forEach(([a,b])=>{b.sort((y,$)=>y.start_hour.localeCompare($.start_hour));for(let y=1;y<b.length;y++){const $=b[y-1],G=b[y];G.start_hour<$.end_hour&&l.push(`Day ${a}: Schedule overlaps between ${$.start_hour}-${$.end_hour} and ${G.start_hour}-${G.end_hour}`)}}),l}return n.jsxs(Ee,{breadcrumbs:pt(e.name,e.id),children:[n.jsx(_e,{title:`Jadwal - ${e.name}`}),n.jsx(Pe,{position:"top-right",richColors:!0}),n.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[n.jsxs("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("h1",{className:"text-2xl font-bold",children:["Jadwal: ",e.name]}),n.jsx("button",{type:"submit",form:k===0?"shift-form":"subject-form",disabled:k===0?x:u,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-blue-700 disabled:opacity-50",children:x||u?"Menyimpan...":"Simpan Jadwal"})]}),n.jsxs(J.Group,{selectedIndex:k,onChange:D,children:[n.jsx(J.List,{className:"mb-6 flex rounded-lg bg-blue-100 p-1",children:["By Shifting","By Subject"].map(r=>n.jsx(J,{disabled:r==="By Shifting"&&!A||r==="By Subject"&&!T,className:({selected:l})=>`flex-1 rounded-lg py-3 text-center text-sm font-medium transition-all hover:cursor-pointer ${l?"bg-white text-blue-700 shadow":"text-gray-600 hover:bg-blue-200"} ${r==="By Shifting"&&!A||r==="By Subject"&&!T?"cursor-not-allowed opacity-50":""}`,children:r},r))}),n.jsxs(J.Panels,{children:[n.jsx(J.Panel,{children:n.jsx("form",{id:"shift-form",onSubmit:oe,className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:p.days.map((r,l)=>n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"mb-3 text-lg font-semibold text-gray-800",children:r.day_name}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Shifting:"}),n.jsxs("select",{value:r.shifting_id||"",onChange:i=>Q(l,i.target.value?parseInt(i.target.value):null),className:"w-full rounded-md border border-gray-300 bg-gray-50 p-2 text-sm focus:border-blue-500 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- No Schedule --"}),o.map(i=>n.jsxs("option",{value:i.id,children:[i.name," (",i.start_hour," - ",i.end_hour,")"]},i.id))]})]}),r.shifting_id&&n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Teacher responsible:"}),n.jsx(Me,{value:r.teachers,onChange:i=>U(l,i),placeholder:"Search teachers...",options:I})]})]},r.day))})}),n.jsx(J.Panel,{children:T?n.jsx("form",{id:"subject-form",onSubmit:ne,className:"space-y-6",children:[1,2,3,4,5,6,7].map(r=>{var l,i;return n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:["Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu","Minggu"][r-1]}),n.jsx("button",{type:"button",onClick:()=>L(r),className:"inline-flex items-center rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-green-700",children:"+ Tambah"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-1",children:(l=g[r])==null?void 0:l.map((a,b)=>{var G,he;const y=(E==null?void 0:E.day)===r&&(E==null?void 0:E.index)===b,$=!a.id;return n.jsx("div",{className:"relative rounded-md border border-gray-300 bg-gray-50 p-4",children:n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Jam Mulai"}),n.jsx("input",{type:"time",value:a.start_hour,onChange:C=>B(r,b,"start_hour",C.target.value),className:`mt-1 w-full rounded-md border border-gray-300 p-2 text-sm shadow-sm ${!y&&!$?"bg-gray-100":"bg-white"}`,disabled:!y&&!$})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Jam Selesai"}),n.jsx("input",{type:"time",value:a.end_hour,onChange:C=>B(r,b,"end_hour",C.target.value),className:`mt-1 w-full rounded-md border border-gray-300 p-2 text-sm shadow-sm ${!y&&!$?"bg-gray-100":"bg-white"}`,disabled:!y&&!$})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Mata Pelajaran"}),n.jsx(be,{value:a.subject_id,onChange:C=>B(r,b,"subject_id",C),placeholder:"Pilih mata pelajaran...",endpoint:route("subjects.search"),initialOption:a.subject_id?{id:a.subject_id,full_name:((G=d.find(C=>C.id===a.subject_id))==null?void 0:G.name)||""}:void 0,showInitialOptions:!0,disabled:!y&&!$})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pengajar"}),n.jsx(be,{value:a.teacher_id,onChange:C=>B(r,b,"teacher_id",C),placeholder:"Select teacher...",endpoint:route("teachers.search"),initialOption:a.teacher_id?{id:a.teacher_id,full_name:((he=s.find(C=>C.id===a.teacher_id))==null?void 0:he.full_name)||""}:void 0,showInitialOptions:!0,disabled:!y&&!$})]}),n.jsx("div",{className:"mt-1 flex h-full items-center justify-start space-x-2 pt-6 md:pt-0",children:$?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>Z(r,b),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>S(null),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-blue-700",children:"Done"})]}):y?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>M(r,b),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>S(null),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer",children:"Done"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>_(r,b),className:"rounded-md bg-yellow-400 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-yellow-600",children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>Z(r,b),className:"rounded-md bg-red-500 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-red-700",children:"Remove"})]})})]})},b)})}),((i=g[r])==null?void 0:i.length)===0&&n.jsx("div",{className:"py-4 text-center text-gray-500",children:"No subjects scheduled for this day"})]},r)})}):n.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-8 text-center",children:n.jsxs("div",{className:"mx-auto max-w-md",children:[n.jsx("div",{className:"mb-4 text-5xl",children:"⚠️"}),n.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Attendance Mode Mismatch"}),n.jsx("p",{className:"text-gray-600",children:'Currently active attendance mode is "Per Shift". Switch to "Per Subject" mode in Academic Year settings to use this feature.'})]})})})]})]})]})]})}export{It as default};
