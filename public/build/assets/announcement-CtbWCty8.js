import{j as e,r as o,u as I,H as L,a as i}from"./app-B87CX-uN.js";import{m as N}from"./proxy-Dqxz1pWf.js";import{A as P}from"./app-layout-DVONSsSU.js";import{c as U}from"./createLucideIcon-CiHbDcRM.js";import{C as $}from"./chevron-down-CRL22Vwy.js";import{T as z,t as y}from"./index-AvwoBn1a.js";/* empty css            */import"./button-CrdDLOym.js";import"./index-DHivLiSQ.js";import"./index-DkjqYkWd.js";import"./app-logo-icon-Dm0YTdU5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],H=U("ChevronUp",D);function R({isDeleteModalOpen:c,setIsDeleteModalOpen:s,handleDelete:a,announcementToDelete:r}){return c&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm bg-black/30 z-50",children:e.jsxs(N.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.1},className:"bg-white p-6 rounded-lg w-full max-w-xl shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Konfirmasi Penghapusan"}),e.jsxs("p",{children:["Apakah Anda yakin ingin menghapus ",e.jsx("strong",{children:r==null?void 0:r.title}),"?"]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-300 rounded hover:cursor-pointer",children:"Batal"}),e.jsx("button",{onClick:()=>{r&&a(r.id),s(!1)},className:"px-4 py-2 bg-red-500 text-white rounded hover:cursor-pointer",children:"Confirm"})]})]})})}const T=({options:c,onSortChange:s})=>{const[a,r]=o.useState(!1),x=n=>{s(n.sort,n.direction),r(!1)};return e.jsxs("div",{className:"relative inline-block text-left",children:[e.jsxs("button",{onClick:()=>r(!a),className:"inline-flex items-center gap-1 text-blue-600 hover:underline text-sm",children:["Sort",a?e.jsx(H,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"})]}),a&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:c.map((n,u)=>e.jsx("button",{onClick:()=>x(n.value),className:"w-full px-4 py-2 text-sm text-left hover:bg-gray-100",children:n.label},u))})]})},B=[{title:"Announcements",href:"/announcements"}];function ee(){var f;const c=[{label:"Title (A-Z)",value:{sort:"title",direction:"asc"}},{label:"Title (Z-A)",value:{sort:"title",direction:"desc"}},{label:"Created At (Newest)",value:{sort:"created_at",direction:"desc"}},{label:"Created At (Oldest)",value:{sort:"created_at",direction:"asc"}}],{announcements:s,filters:a}=I().props,[r,x]=o.useState(!1),[n,u]=o.useState(null),[m,b]=o.useState([]),[v,g]=o.useState(!1),[w,C]=o.useState(null),j=(t=null)=>{u(t),x(!0)},S=async t=>{i.delete(`/announcements/${t}`,{onSuccess:()=>{y.success("Announcement deleted successfully."),i.reload()},onError:()=>{y.error("Failed to delete announcement.")}})},k=t=>{b(l=>l.includes(t)?l.filter(p=>p!==t):[...l,t])},A=()=>{const t=s.data.filter(d=>m.includes(d.id)),l=`Title,Content
`,p=t.map(d=>`${d.title},${d.content}`).join(`
`),E=new Blob([l,p],{type:"text/csv"}),M=URL.createObjectURL(E),h=document.createElement("a");h.href=M,h.download="announcements.csv",h.click()},O=t=>{i.get("/announcements",{...a||{},search:t.target.value},{preserveState:!0,replace:!0})},_=(t,l)=>{i.get("/announcements",{...a,sort:t,direction:l},{preserveState:!0,replace:!0})};return e.jsxs(P,{breadcrumbs:B,children:[e.jsx(L,{title:"Announcements"}),e.jsx(z,{position:"top-right",richColors:!0}),e.jsxs("div",{className:"flex flex-col gap-6 p-6 bg-white text-black shadow-lg rounded-xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",defaultValue:a.search||"",onChange:O,placeholder:"Search by title...",className:"border px-3 py-1 rounded w-64"}),e.jsx(T,{options:c,onSortChange:_}),e.jsx("button",{onClick:A,className:"bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:cursor-pointer",children:"Export Selected"})]}),e.jsx("button",{onClick:()=>j(),className:"bg-green-600 text-white rounded px-3 py-1 text-sm hover:bg-green-700 transition hover:cursor-pointer",children:"Add Announcement"})]}),e.jsxs("table",{className:"w-full border-collapse bg-white text-black shadow-sm rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-gray-800 border-b",children:[e.jsx("th",{className:"p-4",children:e.jsx("input",{type:"checkbox",onChange:t=>b(t.target.checked?s.data.map(l=>l.id):[])})}),e.jsx("th",{className:"p-4 text-sm font-semibold",children:"Picture"}),e.jsx("th",{className:"p-4 text-sm font-semibold",children:"Title"}),e.jsx("th",{className:"p-4 text-sm font-semibold",children:"Content"}),e.jsx("th",{className:"p-4 text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:((f=s==null?void 0:s.data)==null?void 0:f.length)>0?s.data.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-3",children:e.jsx("input",{type:"checkbox",checked:m.includes(t.id),onChange:()=>k(t.id)})}),e.jsx("td",{className:"p-3",children:t.picture?e.jsx("img",{src:t.picture,alt:"announcement",className:"w-16 h-16 object-cover rounded-full"}):"No Picture"}),e.jsx("td",{className:"p-3",children:t.title}),e.jsx("td",{className:"p-3",children:t.content}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsx("button",{onClick:()=>j(t),className:"bg-blue-500 text-sm text-white px-3 py-1 rounded hover:cursor-pointer",children:"Edit"}),e.jsx("button",{onClick:()=>{C(t),g(!0)},className:"bg-red-500 text-sm text-white px-3 py-1 rounded hover:cursor-pointer",children:"Delete"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-600",children:"No announcements found."})})})]}),e.jsx("div",{className:"flex justify-center mt-4 gap-2",children:s.links.map((t,l)=>e.jsx("button",{onClick:()=>t.url&&i.visit(t.url),disabled:!t.url,className:`px-3 py-1 text-sm rounded hover:cursor-pointer ${t.active?"bg-blue-500 text-white":"bg-gray-100 text-black"}`,dangerouslySetInnerHTML:{__html:t.label}},l))})]}),e.jsx(R,{isDeleteModalOpen:v,setIsDeleteModalOpen:g,handleDelete:S,announcementToDelete:w})]})}export{ee as default};
