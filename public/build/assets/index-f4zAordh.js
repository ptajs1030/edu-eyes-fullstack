import{q as f,r as a,j as t,$ as D,m as d}from"./app-bIUQvqtZ.js";import{A as R}from"./action-modal-DdXphHgW.js";import{P as F}from"./pagination-xpUDtwVS.js";import{T as O}from"./table-Baytnrgd.js";import{A as _}from"./app-layout-C2Uuligb.js";import{t as j,T as I}from"./index-Bn8CJl1W.js";import P from"./form-C4d_P10r.js";/* empty css            */import"./proxy-QDkRZyY6.js";import"./app-logo-icon-CzshL9m8.js";import"./button-D5YYBATS.js";import"./index-B1E3LdvP.js";import"./index-CvTdS8VK.js";import"./index-BRJgGegD.js";import"./form-modal-0gHPX4Ff.js";const T=[{title:"Users",href:"/users"}];function ee(){const{users:c,roles:g,statuses:k,filters:l}=f().props,{flash:r}=f().props;a.useEffect(()=>{r!=null&&r.success&&j.success(r.success),r!=null&&r.error&&j.error(r.error)},[r]);const[y,x]=a.useState(!1),[N,S]=a.useState(null),[m,h]=a.useState([]),[n,i]=a.useState(null),b=(e=null)=>{S(e),x(!0)},C=async e=>{d.delete(`/users/${e}`,{onSuccess:()=>d.reload()})},v=e=>{h(s=>s.includes(e)?s.filter(u=>u!==e):[...s,e])},w=()=>{const e=c.data.filter(o=>m.includes(o.id)),s=`Name,Username,Role,Phone,Email,Status
`,u=e.map(o=>`${o.full_name},${o.username},${o.role.name},${o.phone},${o.email},${o.status}`).join(`
`),A=new Blob([s,u],{type:"text/csv"}),E=URL.createObjectURL(A),p=document.createElement("a");p.href=E,p.download="users.csv",p.click()},U=e=>{d.get(route("users.index"),{sort:e,direction:l.direction==="asc"?"desc":"asc"},{preserveState:!0})},$=[{key:"full_name",label:"Full Name",sortable:!0},{key:"username",label:"Username",sortable:!0},{key:"role_id",label:"Role",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}];return t.jsxs(_,{breadcrumbs:T,children:[t.jsx(D,{title:"Users"}),t.jsx(I,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",placeholder:"Search users...",defaultValue:l.search||"",onChange:e=>d.get(route("users.index"),{search:e.target.value},{preserveState:!0}),className:"w-64 rounded border px-3 py-1"}),t.jsx("button",{onClick:w,className:"rounded bg-indigo-600 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Export Selected"})]}),t.jsx("button",{onClick:()=>b(null),className:"rounded bg-green-600 px-3 py-1 text-sm font-medium text-white transition hover:cursor-pointer hover:bg-green-700",children:"Add User"})]}),t.jsx(O,{headers:$,data:c.data,sortColumn:l.sort??"",sortDirection:l.direction==="asc"||l.direction==="desc"?l.direction:"asc",onSort:U,onSelectAll:e=>h(e?c.data.map(s=>s.id):[]),selectedIds:m,rowRender:e=>{var s;return t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"w-[10px] p-3 text-sm",children:t.jsx("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>v(e.id)})}),t.jsx("td",{className:"p-3 text-sm",children:e.full_name}),t.jsx("td",{className:"p-3 text-sm",children:e.username}),t.jsx("td",{className:"p-3 text-sm",children:((s=e.role)==null?void 0:s.name)||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.phone||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.email||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.status}),t.jsxs("td",{className:"flex gap-2 p-3 text-sm",children:[t.jsx("button",{onClick:()=>b(e),className:"rounded bg-blue-500 px-3 py-1 font-medium text-white hover:cursor-pointer",children:"Edit"}),t.jsx("button",{onClick:()=>i(e),className:"rounded bg-red-500 px-3 py-1 font-medium text-white hover:cursor-pointer",children:"Delete"})]})]},e.id)}}),t.jsx(F,{links:c.links}),t.jsx(P,{isOpen:y,onClose:()=>x(!1),user:N,roles:g,statuses:k}),t.jsx(R,{isOpen:!!n,onClose:()=>i(null),title:"Confirm Deletion",message:t.jsxs("span",{children:["Are you sure you want to delete user ",t.jsx("strong",{children:n==null?void 0:n.full_name}),"?"]}),buttons:[{label:"Cancel",onClick:()=>i(null),variant:"neutral"},{label:"Delete",onClick:()=>{n&&(C(n.id),i(null))},variant:"danger"}]})]})]})}export{ee as default};
