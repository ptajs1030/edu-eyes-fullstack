import{r as h,j as e,m as n}from"./app-eqB1mQkF.js";import{F as N}from"./form-modal-BEKCTc9w.js";import{S as w}from"./searchable-select-RKRxVVVS.js";import{t as b}from"./index-Du0f3mTH.js";/* empty css            */import"./proxy-6ECs9z9j.js";import"./index-CaZxKr8s.js";function T({isOpen:f,onClose:t,student:l,classrooms:g,sexes:_,statuses:v,religions:j}){const[r,i]=h.useState({parent_id:null,class_id:null,full_name:"",nis:"",entry_year:new Date().getFullYear(),gender:"",status:"",religion:"",birth_place:"",date_of_birth:"",address:""}),[d,o]=h.useState(null);h.useEffect(()=>{l?(i({parent_id:l.parent_id,class_id:l.class_id,full_name:l.full_name,nis:l.nis||"",entry_year:l.entry_year,gender:l.gender,status:l.status,religion:l.religion,birth_place:l.birth_place,date_of_birth:l.date_of_birth,address:l.address}),l.parent?o({id:l.parent_id,full_name:l.parent.full_name}):o(null)):(i({parent_id:null,class_id:null,full_name:"",nis:"",entry_year:new Date().getFullYear(),gender:"",status:"",religion:"",birth_place:"",date_of_birth:"",address:""}),o(null))},[l]);const s=(a,p)=>{i(m=>({...m,[a]:p}))},y=a=>{a.preventDefault(),r.status||(r.status="active");const{parent:p,...m}=r,x={...m,_method:l!=null&&l.id?"PUT":"POST"};l!=null&&l.id?n.post(`/students/${l.id}`,x,{preserveScroll:!0,onSuccess:()=>{t(),n.reload()},onError:c=>{const u=Object.values(c).join(`
`);b.error(`Failed to update student: ${u}`)}}):n.post("/students",x,{preserveScroll:!0,onSuccess:()=>{t(),n.reload()},onError:c=>{const u=Object.values(c).join(`
`);b.error(`Failed to add new student: ${u}`)}})};return e.jsxs(N,{isOpen:f,onClose:t,title:l?"Edit Student":"Add New Student",onSubmit:y,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("input",{id:"full_name",name:"full_name",type:"text",value:r.full_name,onChange:a=>s("full_name",a.target.value),className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nis",className:"block text-sm font-medium text-gray-700",children:"NIS"}),e.jsx("input",{id:"nis",name:"nis",type:"text",value:r.nis??"",onChange:a=>s("nis",a.target.value),className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"parent_id",className:"block text-sm font-medium text-gray-700",children:"Orang Tua/Wali"}),e.jsx(w,{value:r.parent_id??null,onChange:a=>s("parent_id",a?Number(a):null),placeholder:"Search parent by name...",endpoint:route("parents.search"),initialOption:d?{id:d.id,full_name:d.full_name}:void 0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"class_id",className:"block text-sm font-medium text-gray-700",children:"Kelas"}),e.jsxs("select",{id:"class_id",name:"class_id",value:r.class_id||"",onChange:a=>s("class_id",a.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"Select Classroom"}),g.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Jenis Kelamin"}),e.jsxs("select",{id:"gender",name:"gender",value:r.gender,onChange:a=>s("gender",a.target.value),className:"w-full rounded border p-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),_.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"religion",className:"block text-sm font-medium text-gray-700",children:"Agama"}),e.jsxs("select",{id:"religion",name:"religion",value:r.religion,onChange:a=>s("religion",a.target.value),className:"w-full rounded border p-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Religion"}),j.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"entry_year",className:"block text-sm font-medium text-gray-700",children:"Tahun Masuk"}),e.jsx("input",{id:"entry_year",name:"entry_year",type:"number",min:"1900",max:new Date().getFullYear()+1,value:r.entry_year,onChange:a=>i({...r,entry_year:parseInt(a.target.value)||new Date().getFullYear()}),className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),l?e.jsx("select",{id:"status",name:"status",value:r.status,onChange:a=>s("status",a.target.value),className:"w-full rounded border p-2",required:!0,children:v.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}):e.jsx("input",{type:"text",value:"active",disabled:!0,className:"w-full rounded border bg-gray-100 px-3 py-2"})]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"birth_place",className:"block text-sm font-medium text-gray-700",children:"Tempat Lahir"}),e.jsx("input",{id:"birth_place",name:"birth_place",type:"text",value:r.birth_place,onChange:a=>s("birth_place",a.target.value),className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"date_of_birth",className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),e.jsx("input",{id:"date_of_birth",name:"date_of_birth",type:"date",value:r.date_of_birth,onChange:a=>s("date_of_birth",a.target.value),className:"w-full rounded border p-2",required:!0})]})]}),e.jsx("div",{className:"mb-3"}),e.jsx("div",{className:"mb-3"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Alamat"}),e.jsx("textarea",{name:"address",value:r.address,onChange:a=>s("address",a.target.value),className:"w-full rounded border p-2",required:!0,rows:3})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:t,className:"mr-2 rounded bg-gray-500 px-4 py-2 text-white hover:cursor-pointer",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-white hover:cursor-pointer",children:l?"Update":"Create"})]})]})}export{T as default};
