import{r as t,j as r,a as R}from"./app-Bd0Qs-Vz.js";function F({value:k,onChange:x,placeholder:y="Search...",endpoint:h,initialOption:n,showInitialOptions:o=!1,maxInitialOptions:b=10}){const[p,a]=t.useState(""),[g,l]=t.useState([]),[S,c]=t.useState(!1),[j,v]=t.useState(!1),[u,d]=t.useState(n||null),f=t.useRef(null),i=t.useRef(null);t.useEffect(()=>{n&&(d(n),a(n.full_name))},[n]),t.useEffect(()=>{const e=s=>{i.current&&!i.current.contains(s.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const m=async e=>{if(h){v(!0);try{const L=(await R.get(h,{params:{query:e},withCredentials:!0})).data.slice(0,b);l(L),c(!0)}catch(s){console.error("Error fetching options:",s),l([])}finally{v(!1)}}},N=e=>{const s=e.target.value;if(a(s),f.current&&clearTimeout(f.current),o&&s===""){m("");return}f.current=setTimeout(()=>{s.length>=1||o&&s.length===0?m(s):(l([]),c(!1))},300)},w=e=>{d(e),a(e.full_name),x(e.id),c(!1)},E=()=>{d(null),a(""),x(null),l([])},C=()=>{o&&p===""&&m("")};return r.jsxs("div",{className:"relative",ref:i,children:[r.jsxs("div",{className:"flex items-center border rounded",children:[r.jsx("input",{type:"text",value:p,onChange:N,placeholder:y,className:"flex-1 px-3 py-2 outline-none",onFocus:C}),u&&r.jsx("button",{type:"button",onClick:E,className:"px-2 text-gray-500 hover:text-red-500",children:"Ã—"})]}),S&&r.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:j?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Loading..."}):g.length===0?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"No results found"}):g.map(e=>r.jsx("div",{onClick:()=>w(e),className:`px-3 py-2 hover:bg-gray-100 cursor-pointer ${(u==null?void 0:u.id)===e.id?"bg-blue-50":""}`,children:e.full_name},e.id))})]})}export{F as S};
