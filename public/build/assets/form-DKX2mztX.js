import{r as c,j as e,a as m}from"./app-x9ITRrwy.js";import{F as g}from"./form-modal-B1vkh4cH.js";import{t as u}from"./index-BZrGXtxQ.js";/* empty css            */import"./proxy-BLEjzyUF.js";import"./index-Cq_yryd7.js";function k({isOpen:p,onClose:l,user:s,roles:b,statuses:h}){const[r,n]=c.useState({full_name:"",username:"",phone:"",email:"",nip:"",job:"",position:"",address:"",password:"",password_confirmation:"",role_id:null,status:"active"});c.useEffect(()=>{n(s?{id:s.id,full_name:s.full_name,username:s.username,phone:s.phone||"",email:s.email||"",nip:s.nip||"",job:s.job||"",position:s.position||"",address:s.address||"",password:"",password_confirmation:"",role_id:s.role_id,status:s.status}:{full_name:"",username:"",phone:"",email:"",nip:"",job:"",position:"",address:"",password:"",password_confirmation:"",role_id:null,status:"active"})},[s]);const o=(a,d)=>{n(t=>({...t,[a]:d}))},x=a=>{a.preventDefault();const d={...r,_method:s!=null&&s.id?"PUT":"POST"};s!=null&&s.id?m.post(`/users/${s.id}`,d,{preserveScroll:!0,onSuccess:()=>{l(),m.reload()},onError:t=>{const i=Object.values(t).join(`
`);u.error(`Failed to update user: ${i}`)}}):m.post("/users",d,{preserveScroll:!0,onSuccess:()=>{l(),m.reload()},onError:t=>{const i=Object.values(t).join(`
`);u.error(`Failed to add new user: ${i}`)}})};return e.jsxs(g,{isOpen:p,onClose:l,title:s?"Edit User":"Add New User",onSubmit:x,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap*"}),e.jsx("input",{id:"full_name",name:"full_name",type:"text",value:r.full_name,onChange:a=>o("full_name",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username*"}),e.jsx("input",{id:"username",name:"username",type:"text",value:r.username,onChange:a=>o("username",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:r.phone,onChange:a=>o("phone",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",value:r.email,onChange:a=>o("email",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nip",className:"block text-sm font-medium text-gray-700",children:"NIP"}),e.jsx("input",{id:"nip",name:"nip",type:"text",value:r.nip,onChange:a=>o("nip",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700",children:"Jabatan (Guru)"}),e.jsx("input",{id:"position",name:"position",type:"text",value:r.position,onChange:a=>o("position",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"job",className:"block text-sm font-medium text-gray-700",children:"Pekerjaan (Orang Tua)"}),e.jsx("input",{id:"job",name:"job",type:"text",value:r.job,onChange:a=>o("job",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Alamat"}),e.jsx("textarea",{name:"address",value:r.address,onChange:a=>o("address",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",rows:3})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"role_id",className:"block text-sm font-medium text-gray-700",children:"Role*"}),e.jsxs("select",{id:"role_id",name:"role_id",value:r.role_id||"",onChange:a=>o("role_id",a.target.value?parseInt(a.target.value):null),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),b.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status*"}),e.jsx("select",{id:"status",name:"status",value:r.status,onChange:a=>o("status",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:h.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),e.jsx("input",{id:"password",name:"password",type:"password",value:r.password,onChange:a=>o("password",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",placeholder:s?"Leave blank to keep current password":""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password*"}),e.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:"password",value:r.password_confirmation,onChange:a=>o("password_confirmation",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:l,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:s?"Update":"Create"})]})]})}export{k as default};
