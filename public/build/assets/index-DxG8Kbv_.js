import{u as M,r,j as t,H as E,a as g}from"./app-DILUMODj.js";import{P as $}from"./pagination-CLQj04zo.js";import{T as I}from"./table-Dyl9oyY4.js";import{A as O}from"./app-layout-C7YzT-KX.js";import{T as R,t as _}from"./index-kiHhjHCH.js";import D from"./form-B-btWBq5.js";import"./createLucideIcon-CNiEGURe.js";import"./button-BodouoRR.js";import"./index-CaK9bMaE.js";import"./index-CFvD6c4Y.js";import"./index-D2K6XBRW.js";import"./app-logo-icon-Z6POH9h5.js";import"./action-modal-DGspp6KW.js";import"./proxy-yJxII8k4.js";import"./form-modal-FpMO2c1k.js";const H=[{title:"Tahun Akademik",href:"/academic-years"}];function Y(){const{academicYears:s,attendanceModes:b,filters:n}=M().props,[f,u]=r.useState(!1),[k,j]=r.useState(null),[o,m]=r.useState([]),[p,y]=r.useState("start_year"),[d,h]=r.useState("desc"),x=(e=null)=>{j(e),u(!0)},S=e=>{m(a=>a.includes(e)?a.filter(i=>i!==e):[...a,e])},N=()=>{if(o.length===0)return;const e=s.data.filter(l=>o.includes(l.id)),a=`Title,Status
`,i=e.map(l=>`${l.title},${l.status}`).join(`
`),A=new Blob([a,i],{type:"text/csv"}),T=URL.createObjectURL(A),c=document.createElement("a");c.href=T,c.download="academic-years.csv",c.click(),_.success(`Berhasil mengekspor ${e.length} data tahun akademik`,{description:"File CSV telah didownload otomatis"})},w=e=>{g.get("/academic-years",{...n||{},search:e.target.value},{preserveState:!0,replace:!0})},C=e=>{e===p?h(d==="desc"?"asc":"desc"):(y(e),h("desc")),g.get("/academic-years",{...n,sort:e,direction:d},{preserveState:!0,replace:!0})};console.log(s.data.length),console.log(s.data.length!==0);const v=[{key:"title",label:"Judul",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"attendance_mode",label:"Mode Kehadiran",sortable:!0},{key:"note",label:"Catatan",sortable:!0},{key:"actions",label:"Aksi",sortable:!1}];return t.jsxs(O,{breadcrumbs:H,children:[t.jsx(E,{title:"Tahun Akademik"}),t.jsx(R,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",defaultValue:n.search||"",onChange:w,placeholder:"Cari berdasarkan tahun...",className:"w-64 rounded border px-3 py-1"}),t.jsx("button",{disabled:o.length===0,onClick:N,className:`rounded bg-indigo-600 px-3 py-1 text-sm font-medium text-white hover:bg-indigo-700 ${o.length===0?"cursor-not-allowed opacity-50":"hover:cursor-pointer"}`,children:"Ekspor data yang dipilih"})]}),t.jsx("button",{disabled:s.data.length!==0,onClick:()=>x(),className:`rounded bg-green-600 px-3 py-1 text-sm font-medium text-white transition ${s.data.length!==0?"cursor-not-allowed opacity-50":"hover:cursor-pointer hover:bg-green-700"} `,children:"Tambah Tahun Akademik"})]}),t.jsx(I,{headers:v,data:s.data,sortColumn:p,sortDirection:d,onSort:C,onSelectAll:e=>m(e?s.data.map(a=>a.id):[]),selectedIds:o,emptyMessage:"No academic years found.",rowRender:e=>t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"w-[10px] p-3 text-sm",children:t.jsx("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>S(e.id)})}),t.jsx("td",{className:"p-3 text-sm",children:e.title}),t.jsx("td",{className:"p-3 text-sm",children:e.status}),t.jsx("td",{className:"p-3 text-sm",children:e.attendance_mode}),t.jsx("td",{className:"p-3 text-sm",children:e.note?e.note.length>70?e.note.substring(0,70)+"...":e.note:"-"}),t.jsx("td",{className:"flex gap-2 p-3",children:t.jsx("button",{onClick:()=>x(e),className:"rounded bg-blue-500 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Edit"})})]},e.id)}),t.jsx($,{links:s.links}),t.jsx(D,{isOpen:f,closeModal:()=>u(!1),academicYear:k,attendanceModes:b})]})]})}export{Y as default};
