import{u as j,r as o,j as e,H as y,L as b,a as N}from"./app-YETZAg4y.js";import{A as _}from"./app-layout-DaLKK63t.js";import{t as m,T as v}from"./index-ChOrAw9A.js";import w from"./editAttendance-ClwTQwzj.js";/* empty css            */import"./button-BAef8qTG.js";import"./index-BQb3bJN9.js";import"./index-D4bAXWsF.js";import"./index-BiQrQyqe.js";import"./createLucideIcon-CaT7R7pY.js";import"./app-logo-icon-XnikUJh8.js";import"./form-modal-DYOy7ftS.js";import"./proxy-DQrp2gNY.js";const k=s=>[{title:"Events",href:"/events"},{title:s}];function $({event:s,attendances:c,canEditAttendance:i}){const{flash:r}=j().props,[x,d]=o.useState(null),[p,n]=o.useState(!1);r!=null&&r.success?m.success(r.success):r!=null&&r.error&&m.error(r.error);const u=t=>{N.patch(route("events.attendance.update",s.id),t,{preserveScroll:!0,onSuccess:()=>{n(!1),d(null)},onError:()=>{}})},h=t=>{switch(t){case"present":return"bg-green-100 text-green-800 border-green-200";case"present_in_tolerance":return"bg-blue-100 text-blue-800 border-blue-200";case"late":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"alpha":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=t=>{switch(t){case"present":return"Hadir";case"present_in_tolerance":return"Hadir (Toleransi)";case"late":return"Terlambat";case"alpha":return"Alpha";default:return"Belum Diisi"}},f=s.participants.map(t=>{const a=c.find(l=>l.student.id===t.student.id);return{student:t.student,attendance:a||{status:"not_set",clock_in_hour:null,clock_out_hour:null,minutes_of_late:null,note:null,submit_date:""}}});return e.jsxs(_,{breadcrumbs:k(s.name),children:[e.jsx(y,{title:`Detail Event - ${s.name}`}),e.jsx(v,{position:"top-right",richColors:!0}),e.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:s.name}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Tanggal"}),e.jsxs("p",{className:"mt-1",children:[new Date(s.start_date).toLocaleDateString("id-ID")," - ",new Date(s.end_date).toLocaleDateString("id-ID")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Waktu"}),e.jsxs("p",{className:"mt-1",children:[s.start_hour," - ",s.end_hour]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"PIC"}),e.jsx("p",{className:"mt-1",children:s.event_pics.map(t=>t.user.full_name).join(", ")||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Deskripsi"}),e.jsx("p",{className:"mt-1",children:s.description||"-"})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Daftar Kehadiran"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",s.participants.length," peserta"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NIS"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kelas"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jam Masuk"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jam Keluar"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Keterlambatan"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Catatan"}),i&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:f.map(({student:t,attendance:a})=>{var l;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:t.full_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.nis||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:((l=t.classroom)==null?void 0:l.name)||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${h(a.status)}`,children:g(a.status)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.clock_in_hour||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.clock_out_hour||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.minutes_of_late?`${a.minutes_of_late} menit`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.note||"-"}),i&&e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("button",{onClick:()=>{d({student:t,...a}),n(!0)},className:"rounded bg-blue-500 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Edit"})})]},t.id)})})]})}),!i&&c.length===0&&e.jsx("div",{className:"mt-4 rounded-lg bg-yellow-50 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"mr-2 h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Data kehadiran belum tersedia. Edit kehadiran akan tersedia setelah event dimulai."})]})})]}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx(b,{href:route("events.index"),className:"rounded-md bg-gray-200 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-gray-300",children:"Kembali ke Daftar Event"})})]}),p&&x&&e.jsx(w,{attendance:x,onClose:()=>{n(!1),d(null)},onSubmit:u})]})}export{$ as default};
