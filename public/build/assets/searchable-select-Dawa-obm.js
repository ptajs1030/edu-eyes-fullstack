import{r as s,j as r,f as k}from"./app-BoAFDmgT.js";function I({value:_,onChange:x,placeholder:w="Search...",endpoint:g,initialOption:a,showInitialOptions:f=!1,maxInitialOptions:S=10,disabled:n=!1}){const[p,l]=s.useState(""),[v,u]=s.useState([]),[b,c]=s.useState(!1),[j,y]=s.useState(!1),[o,d]=s.useState(a||null),i=s.useRef(null),m=s.useRef(null);s.useEffect(()=>{a&&(d(a),l(a.full_name))},[a]),s.useEffect(()=>{const e=t=>{m.current&&!m.current.contains(t.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const h=async e=>{if(g){y(!0);try{const R=(await k.get(g,{params:{query:e},withCredentials:!0})).data.slice(0,S);u(R),c(!0)}catch(t){console.error("Error fetching options:",t),u([])}finally{y(!1)}}},N=e=>{if(n)return;const t=e.target.value;if(l(t),i.current&&clearTimeout(i.current),f&&t===""){h("");return}i.current=setTimeout(()=>{t.length>=1||f&&t.length===0?h(t):(u([]),c(!1))},300)},E=e=>{d(e),l(e.full_name),x(e.id),c(!1)},C=()=>{d(null),l(""),x(null),u([])},L=()=>{n||f&&p===""&&h("")};return r.jsxs("div",{className:"relative",ref:m,children:[r.jsxs("div",{className:`flex mt-1 items-center block border p-2 border-gray-300 rounded-md shadow-sm ${n?"bg-gray-100 cursor-not-allowed":"bg-white"}`,children:[r.jsx("input",{type:"text",value:p,onChange:N,placeholder:w,onFocus:L,disabled:n,className:"flex-1 outline-none w-full"}),o&&!n&&r.jsx("button",{type:"button",onClick:C,className:"px-2 text-gray-500 hover:text-red-500",children:"Ã—"})]}),!n&&b&&r.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:j?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Loading..."}):v.length===0?r.jsx("div",{className:"py-2 px-3 text-gray-500",children:"No results found"}):v.map(e=>r.jsx("div",{onClick:()=>E(e),className:`px-3 py-2 hover:bg-gray-100 cursor-pointer ${(o==null?void 0:o.id)===e.id?"bg-blue-50":""}`,children:e.full_name},e.id))})]})}export{I as S};
