import{r as l,j as e,a as i}from"./app-D0tApk96.js";import{A as v}from"./action-modal-DR4-rMEo.js";import{F as w}from"./form-modal-CS4PftC1.js";import{t as b}from"./index-KDpwIayY.js";/* empty css            */import"./proxy-DqYHIfr1.js";import"./index-DHckISMr.js";function E({isOpen:r,closeModal:d,academicYear:t,attendanceModes:y}){const[m,u]=l.useState({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),[c,f]=l.useState(!1),[p,s]=l.useState(!1);l.useEffect(()=>{r&&t&&!c?(u({start_year:t.start_year,attendance_mode:t.attendance_mode,note:t.note||""}),f(!0)):r&&!t&&!c&&(u({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),f(!0))},[t,r,c]),l.useEffect(()=>{r||f(!1)},[r]);const h=a=>{const{name:o,value:n}=a.target;u(j=>({...j,[o]:n}))},g=a=>{a.preventDefault(),t?x():s(!0)},x=()=>{s(!1);const a={...m};t?i.post(`/academic-years/${t.id}`,{...a,_method:"PUT"},{onSuccess:()=>{d(),i.reload()},onError:o=>{const n=Object.values(o).join(`
`);b.error("Failed to update academic year: "+n)}}):i.post("/academic-years",a,{onSuccess:()=>{d(),b.success("Academic year created successfully."),i.reload()},onError:o=>{const n=Object.values(o).join(`
`);b.error("Failed to create academic year: "+n)}})};return r?e.jsxs(e.Fragment,{children:[e.jsxs(w,{isOpen:r,onClose:d,title:t?"Edit Tahun Akademik":"Tambah Tahun Akademik",onSubmit:g,children:[e.jsxs("div",{className:"mb-3 flex flex-wrap justify-between",children:[e.jsx("label",{htmlFor:"start_year",className:"block text-sm font-medium text-gray-700",children:"Tahun Mulai"}),e.jsx("input",{type:"number",id:"start_year",name:"start_year",value:m.start_year,min:new Date().getFullYear(),disabled:!!t,onChange:h,className:`mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm ${t?"bg-gray-100":""} `,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"attendance_mode",className:"block text-sm font-medium text-gray-700",children:"Mode Kehadiran"}),e.jsxs("select",{name:"attendance_mode",value:m.attendance_mode,onChange:h,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Mode --"}),y.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:"Catatan (optional)"}),e.jsx("textarea",{name:"note",value:m.note,onChange:h,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:d,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:t?"Update":"Simpan"})]})]}),e.jsx(v,{isOpen:p,title:"Confirmation",message:"Are you sure you want to create new academic year?",buttons:[{label:"Cancel",onClick:()=>s(!1),variant:"neutral"},{label:"Confirm",onClick:()=>{x(),s(!1)},variant:"primary"}],onClose:()=>s(!1)})]}):null}export{E as default};
