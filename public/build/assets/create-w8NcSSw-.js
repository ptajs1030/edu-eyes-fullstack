import{r as o,u as N,j as e,H as k,L as w,a as C}from"./app-CRhh2Pn9.js";import{R as S}from"./rich-text-editor-DL4D0eAg.js";import{A}from"./app-layout-ymlhcoDm.js";import{t as m,T as L}from"./index-Bc9lomt1.js";/* empty css            */import"./button-BZPoPIXE.js";import"./index-NseENv5V.js";import"./index-DcPUus4B.js";import"./index-ukDarBtn.js";import"./createLucideIcon-COWQGMEl.js";import"./app-logo-icon-DI3jlOHR.js";const B=[{title:"Pengumuman",href:"/announcements"},{title:"Buat Pengumuman Baru",href:""}];function J(){const[l,x]=o.useState(""),[u,f]=o.useState(""),[c,b]=o.useState(""),[a,i]=o.useState([{url:""}]),[d,h]=o.useState(!1),{flash:n}=N().props;o.useEffect(()=>{n!=null&&n.success&&m.success(n.success),n!=null&&n.error&&m.error(n.error)},[n]);const p=()=>{i([...a,{url:""}])},g=t=>{const s=[...a];s.splice(t,1),i(s)},j=(t,s)=>{const r=[...a];r[t].url=s,i(r)},y=t=>{t.preventDefault(),h(!0);const s=a.filter(r=>r.url.trim()!=="").map(r=>({url:r.url}));C.post("/announcements",{title:l,short_content:u,content:c,attachments:s},{onSuccess:()=>{},onError:r=>{Object.values(r).flat().forEach(v=>m.error(v))},onFinish:()=>{h(!1)}})};return e.jsxs(A,{breadcrumbs:B,children:[e.jsx(k,{title:"Buat Pengumuman"}),e.jsx(L,{position:"top-right",richColors:!0}),e.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[e.jsx("h1",{className:"mb-6 text-xl font-bold",children:"Buat Pengumuman Baru"}),e.jsx("div",{className:"rounded-lg border p-4",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Judul"}),e.jsx("input",{type:"text",id:"title",value:l,maxLength:70,onChange:t=>x(t.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length,"/70 karakter"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"short_content",className:"block text-sm font-medium text-gray-700",children:"Ringkasan"}),e.jsx("textarea",{id:"short_content",value:u,onChange:t=>f(t.target.value),rows:3,maxLength:255,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0}),e.jsxs("span",{className:"text-xs text-gray-500",children:[u.length,"/255 karakter"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:["Konten ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{value:c,onChange:b,placeholder:"Ketik konten pengumuman di sini..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Lampiran"}),a.map((t,s)=>e.jsxs("div",{className:"mb-2 flex items-center",children:[e.jsx("input",{type:"url",value:t.url,onChange:r=>j(s,r.target.value),placeholder:"https://example.com/file.pdf",className:"block w-full flex-1 rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),e.jsx("button",{type:"button",onClick:()=>g(s),className:"ml-2 inline-flex items-center rounded-md border border-transparent bg-red-100 px-3 py-2 text-sm leading-4 font-medium text-red-700 hover:cursor-pointer hover:bg-red-200 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none",children:"Hapus"})]},s)),e.jsx("button",{type:"button",onClick:p,className:"rounded-md bg-sky-500 px-3 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-sky-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none",children:"Tambah Lampiran"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(w,{href:"/announcements",className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none",children:"Batal"}),e.jsx("button",{type:"submit",disabled:d,className:"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50",children:d?"Menyimpan...":"Simpan"})]})]})})]})]})}export{J as default};
