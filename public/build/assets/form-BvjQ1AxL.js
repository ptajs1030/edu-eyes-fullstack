<<<<<<<< HEAD:public/build/assets/form-C7xZOwPH.js
import{r as i,j as e,a as j}from"./app-Cn2t8gJw.js";import{F as P}from"./form-modal-CN0FeIhh.js";import{S as M}from"./searchable-select-COFik1hv.js";import{t as I}from"./index-BYKIGkqn.js";import"./proxy-BkAw2byc.js";import"./index-DYvuR1c0.js";function U({isOpen:m,onClose:p,student:r,classrooms:y,sexes:w,statuses:N,religions:k}){const[l,d]=i.useState({parent_id:null,class_id:null,full_name:"",nis:"",entry_year:new Date().getFullYear(),gender:"",status:"",religion:"",birth_place:"",date_of_birth:"",address:"",profile_picture:null}),[F,u]=i.useState(null),[b,x]=i.useState(!1),[f,h]=i.useState(null),[_,g]=i.useState(!1),v=i.useRef(null);i.useEffect(()=>{m&&r&&!b?(d({parent_id:r.parent_id,class_id:r.class_id,full_name:r.full_name,nis:r.nis||"",entry_year:r.entry_year,gender:r.gender,status:r.status,religion:r.religion,birth_place:r.birth_place,date_of_birth:r.date_of_birth,address:r.address,profile_picture:r.profile_picture}),r.profile_picture&&h(`/storage/${r.profile_picture}`),r.parent?u({id:r.parent_id,full_name:r.parent.full_name}):u(null),x(!0)):m&&!r&&!b&&(d({parent_id:null,class_id:null,full_name:"",nis:"",entry_year:new Date().getFullYear(),gender:"",status:"",religion:"",birth_place:"",date_of_birth:"",address:"",profile_picture:null}),u(null),x(!0))},[r,m,b]),i.useEffect(()=>{m||(x(!1),u(null),h(null),g(!1))},[m]),i.useEffect(()=>{l.parent_id===null&&u(null)},[l.parent_id]);const s=(a,t)=>{d(n=>({...n,[a]:t}))},S=a=>{let t=a.target.value;t=t.replace(/\D/g,""),d(n=>({...n,nis:t}))},C=a=>{var n;const t=(n=a.target.files)==null?void 0:n[0];if(t){const o=new FileReader;o.onloadend=()=>{h(o.result)},o.readAsDataURL(t),d(c=>({...c,profile_picture:t})),g(!1)}},L=()=>{h(null),d(a=>({...a,profile_picture:void 0})),g(!0),v.current&&(v.current.value="")},D=a=>{a.preventDefault(),l.status||(l.status="active");const t=new FormData;Object.entries(l).forEach(([o,c])=>{o!=="profile_picture"&&c!==null&&t.append(o,c)}),l.profile_picture instanceof File?t.append("profile_picture",l.profile_picture):_&&t.append("remove_profile_picture","1"),t.append("_method",r!=null&&r.id?"PUT":"POST");const n=r!=null&&r.id?`/students/${r.id}`:"/students";j.post(n,t,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p(),j.reload()},onError:o=>{const c=Object.values(o).join(`
`);I.error(`Failed: ${c}`)}})};return e.jsxs(P,{isOpen:m,onClose:p,title:r?"Edit Siswa":"Tambah Siswa Baru",onSubmit:D,children:[e.jsxs("div",{className:"mb-4 flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex h-32 w-32 items-center justify-center overflow-hidden rounded-full border-2 border-gray-300 bg-gray-100",children:f?e.jsx("img",{src:f,alt:"Profile preview",className:"h-full w-full object-cover"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(f||(r==null?void 0:r.profile_picture)&&!_)&&e.jsx("button",{type:"button",onClick:L,className:"absolute -top-2 -right-2 rounded-full bg-red-500 p-1 text-white hover:cursor-pointer hover:bg-red-600",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("label",{className:"mt-2 cursor-pointer text-sm font-medium text-blue-600 hover:text-blue-800",children:[e.jsx("span",{children:"Upload Photo"}),e.jsx("input",{type:"file",ref:v,className:"hidden",accept:"image/*",onChange:C})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Max 2MB (300x300)"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("input",{id:"full_name",name:"full_name",type:"text",maxLength:70,value:l.full_name,onChange:a=>s("full_name",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nis",className:"block text-sm font-medium text-gray-700",children:"NIS"}),e.jsx("input",{id:"nis",name:"nis",type:"text",inputMode:"numeric",pattern:"[0-9]*",minLength:4,maxLength:20,value:l.nis??"",onChange:S,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"parent_id",className:"block text-sm font-medium text-gray-700",children:"Orang Tua/Wali"}),e.jsx(M,{value:l.parent_id??null,onChange:a=>s("parent_id",a?Number(a):null),placeholder:"Search parent by name...",endpoint:route("parents.search"),initialOption:F,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"class_id",className:"block text-sm font-medium text-gray-700",children:"Kelas"}),e.jsxs("select",{id:"class_id",name:"class_id",value:l.class_id||"",onChange:a=>s("class_id",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",children:[e.jsx("option",{value:"",children:"--Pilih kelas--"}),y.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Jenis Kelamin"}),e.jsxs("select",{id:"gender",name:"gender",value:l.gender,onChange:a=>s("gender",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),w.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"religion",className:"block text-sm font-medium text-gray-700",children:"Agama"}),e.jsxs("select",{id:"religion",name:"religion",value:l.religion,onChange:a=>s("religion",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Religion"}),k.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"entry_year",className:"block text-sm font-medium text-gray-700",children:"Tahun Masuk"}),e.jsx("input",{id:"entry_year",name:"entry_year",type:"number",min:"1900",max:new Date().getFullYear()+1,value:l.entry_year,onChange:a=>d({...l,entry_year:parseInt(a.target.value)||new Date().getFullYear()}),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),r?e.jsx("select",{id:"status",name:"status",value:l.status,onChange:a=>s("status",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:N.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}):e.jsx("input",{type:"text",value:"active",disabled:!0,className:"w-full rounded border bg-gray-100 px-3 py-2"})]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"birth_place",className:"block text-sm font-medium text-gray-700",children:"Tempat Lahir"}),e.jsx("input",{id:"birth_place",name:"birth_place",type:"text",maxLength:70,value:l.birth_place,onChange:a=>s("birth_place",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"date_of_birth",className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),e.jsx("input",{id:"date_of_birth",name:"date_of_birth",type:"date",value:l.date_of_birth,onChange:a=>s("date_of_birth",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]})]}),e.jsx("div",{className:"mb-3"}),e.jsx("div",{className:"mb-3"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Alamat"}),e.jsx("textarea",{name:"address",value:l.address,onChange:a=>s("address",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,rows:3})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:p,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:r?"Update":"Create"})]})]})}export{U as default};
========
import{r as i,j as e,a as j}from"./app-BbluYI2S.js";import{F as P}from"./form-modal-CfPSo42Y.js";import{S as M}from"./searchable-select-K5jJYqJj.js";import{t as I}from"./index-D-s0NFwU.js";/* empty css            */import"./proxy-Df1lPe4n.js";import"./index-ZI_K5vUT.js";function Y({isOpen:m,onClose:p,student:r,classrooms:y,sexes:w,statuses:N,religions:k}){const[l,d]=i.useState({parent_id:null,class_id:null,full_name:"",nis:"",entry_year:new Date().getFullYear(),gender:"",status:"",religion:"",birth_place:"",date_of_birth:"",address:"",profile_picture:null}),[F,u]=i.useState(null),[b,x]=i.useState(!1),[f,h]=i.useState(null),[_,g]=i.useState(!1),v=i.useRef(null);i.useEffect(()=>{m&&r&&!b?(d({parent_id:r.parent_id,class_id:r.class_id,full_name:r.full_name,nis:r.nis||"",entry_year:r.entry_year,gender:r.gender,status:r.status,religion:r.religion,birth_place:r.birth_place,date_of_birth:r.date_of_birth,address:r.address,profile_picture:r.profile_picture}),r.profile_picture&&h(`/storage/${r.profile_picture}`),r.parent?u({id:r.parent_id,full_name:r.parent.full_name}):u(null),x(!0)):m&&!r&&!b&&(d({parent_id:null,class_id:null,full_name:"",nis:"",entry_year:new Date().getFullYear(),gender:"",status:"",religion:"",birth_place:"",date_of_birth:"",address:"",profile_picture:null}),u(null),x(!0))},[r,m,b]),i.useEffect(()=>{m||(x(!1),u(null),h(null),g(!1))},[m]),i.useEffect(()=>{l.parent_id===null&&u(null)},[l.parent_id]);const s=(a,t)=>{d(n=>({...n,[a]:t}))},S=a=>{let t=a.target.value;t=t.replace(/\D/g,""),d(n=>({...n,nis:t}))},C=a=>{var n;const t=(n=a.target.files)==null?void 0:n[0];if(t){const o=new FileReader;o.onloadend=()=>{h(o.result)},o.readAsDataURL(t),d(c=>({...c,profile_picture:t})),g(!1)}},L=()=>{h(null),d(a=>({...a,profile_picture:void 0})),g(!0),v.current&&(v.current.value="")},D=a=>{a.preventDefault(),l.status||(l.status="active");const t=new FormData;Object.entries(l).forEach(([o,c])=>{o!=="profile_picture"&&c!==null&&t.append(o,c)}),l.profile_picture instanceof File?t.append("profile_picture",l.profile_picture):_&&t.append("remove_profile_picture","1"),t.append("_method",r!=null&&r.id?"PUT":"POST");const n=r!=null&&r.id?`/students/${r.id}`:"/students";j.post(n,t,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p(),j.reload()},onError:o=>{const c=Object.values(o).join(`
`);I.error(`Failed: ${c}`)}})};return e.jsxs(P,{isOpen:m,onClose:p,title:r?"Edit Siswa":"Tambah Siswa Baru",onSubmit:D,children:[e.jsxs("div",{className:"mb-4 flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex h-32 w-32 items-center justify-center overflow-hidden rounded-full border-2 border-gray-300 bg-gray-100",children:f?e.jsx("img",{src:f,alt:"Profile preview",className:"h-full w-full object-cover"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(f||(r==null?void 0:r.profile_picture)&&!_)&&e.jsx("button",{type:"button",onClick:L,className:"absolute -top-2 -right-2 rounded-full bg-red-500 p-1 text-white hover:cursor-pointer hover:bg-red-600",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("label",{className:"mt-2 cursor-pointer text-sm font-medium text-blue-600 hover:text-blue-800",children:[e.jsx("span",{children:"Upload Photo"}),e.jsx("input",{type:"file",ref:v,className:"hidden",accept:"image/*",onChange:C})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Max 2MB (300x300)"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("input",{id:"full_name",name:"full_name",type:"text",maxLength:70,value:l.full_name,onChange:a=>s("full_name",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nis",className:"block text-sm font-medium text-gray-700",children:"NIS"}),e.jsx("input",{id:"nis",name:"nis",type:"text",inputMode:"numeric",pattern:"[0-9]*",minLength:4,maxLength:20,value:l.nis??"",onChange:S,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"parent_id",className:"block text-sm font-medium text-gray-700",children:"Orang Tua/Wali"}),e.jsx(M,{value:l.parent_id??null,onChange:a=>s("parent_id",a?Number(a):null),placeholder:"Search parent by name...",endpoint:route("parents.search"),initialOption:F,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"class_id",className:"block text-sm font-medium text-gray-700",children:"Kelas"}),e.jsxs("select",{id:"class_id",name:"class_id",value:l.class_id||"",onChange:a=>s("class_id",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",children:[e.jsx("option",{value:"",children:"--Pilih kelas--"}),y.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Jenis Kelamin"}),e.jsxs("select",{id:"gender",name:"gender",value:l.gender,onChange:a=>s("gender",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),w.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"religion",className:"block text-sm font-medium text-gray-700",children:"Agama"}),e.jsxs("select",{id:"religion",name:"religion",value:l.religion,onChange:a=>s("religion",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Religion"}),k.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"entry_year",className:"block text-sm font-medium text-gray-700",children:"Tahun Masuk"}),e.jsx("input",{id:"entry_year",name:"entry_year",type:"number",min:"1900",max:new Date().getFullYear()+1,value:l.entry_year,onChange:a=>d({...l,entry_year:parseInt(a.target.value)||new Date().getFullYear()}),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),r?e.jsx("select",{id:"status",name:"status",value:l.status,onChange:a=>s("status",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:N.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}):e.jsx("input",{type:"text",value:"active",disabled:!0,className:"w-full rounded border bg-gray-100 px-3 py-2"})]})]}),e.jsxs("div",{className:"mb-3 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"birth_place",className:"block text-sm font-medium text-gray-700",children:"Tempat Lahir"}),e.jsx("input",{id:"birth_place",name:"birth_place",type:"text",maxLength:70,value:l.birth_place,onChange:a=>s("birth_place",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("label",{htmlFor:"date_of_birth",className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),e.jsx("input",{id:"date_of_birth",name:"date_of_birth",type:"date",value:l.date_of_birth,onChange:a=>s("date_of_birth",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]})]}),e.jsx("div",{className:"mb-3"}),e.jsx("div",{className:"mb-3"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Alamat"}),e.jsx("textarea",{name:"address",value:l.address,onChange:a=>s("address",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,rows:3})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:p,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:r?"Update":"Create"})]})]})}export{Y as default};
>>>>>>>> main:public/build/assets/form-BvjQ1AxL.js
