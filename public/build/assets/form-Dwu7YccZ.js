import{r as u,j as e,a as d}from"./app-BoAFDmgT.js";import{A as g}from"./action-modal-EtwjdvcF.js";import{F as j}from"./form-modal-BVoP3Mmd.js";import{t as s}from"./index--niawfLs.js";/* empty css            */import"./proxy-Ci01SWfK.js";import"./index-KsdglAZs.js";function S({isOpen:c,closeModal:n,academicYear:t,attendanceModes:h}){const[l,m]=u.useState({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),[f,o]=u.useState(!1);u.useEffect(()=>{m(t?{start_year:t.start_year,attendance_mode:t.attendance_mode,note:t.note||""}:{start_year:new Date().getFullYear(),attendance_mode:"",note:""})},[t]);const i=a=>{const{name:r,value:p}=a.target;m(x=>({...x,[r]:p}))},b=a=>{a.preventDefault(),t?y():o(!0)},y=()=>{o(!1);const a={...l};t?d.post(`/academic-years/${t.id}`,{...a,_method:"PUT"},{onSuccess:()=>{n(),s.success("Academic year updated successfully."),d.reload()},onError:r=>{r.start_year?s.error("Failed to update academic year: "+r.start_year):s.error("Failed to update academic year")}}):d.post("/academic-years",a,{onSuccess:()=>{n(),s.success("Academic year created successfully."),d.reload()},onError:r=>{r.start_year?s.error("Failed to create academic year: "+r.start_year):s.error("Failed to create academic year")}})};return c?e.jsxs(e.Fragment,{children:[e.jsxs(j,{isOpen:c,onClose:n,title:t?"Edit Tahun Akademik":"Tambah Tahun Akademik",onSubmit:b,children:[e.jsxs("div",{className:"mb-3 flex flex-wrap justify-between",children:[e.jsx("label",{htmlFor:"start_year",className:"block text-sm font-medium text-gray-700",children:"Tahun Mulai"}),e.jsx("input",{type:"number",id:"start_year",name:"start_year",value:l.start_year,onChange:i,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"attendance_mode",className:"block text-sm font-medium text-gray-700",children:"Mode Kehadiran"}),e.jsxs("select",{name:"attendance_mode",value:l.attendance_mode,onChange:i,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Mode --"}),h.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:"Catatan (optional)"}),e.jsx("textarea",{name:"note",value:l.note,onChange:i,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:n,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:t?"Update":"Simpan"})]})]}),e.jsx(g,{isOpen:f,title:"Confirmation",message:"Are you sure you want to create new academic year?",buttons:[{label:"Cancel",onClick:()=>o(!1),variant:"neutral"},{label:"Confirm",onClick:()=>{y(),o(!1)},variant:"primary"}],onClose:()=>o(!1)})]}):null}export{S as default};
