import{q as T,r as a,j as t,$ as E,m as b}from"./app-CgSwIAHK.js";import{T as I,P as O}from"./table-BeJiZ3iB.js";import{A as R}from"./app-layout-DVvYVnOZ.js";import{T as $}from"./index-DWeuuU6n.js";import D from"./form-Dkcuh7YN.js";/* empty css            */import"./app-logo-icon-DGxN8R1F.js";import"./index-BweUmzyi.js";import"./index-BesGtwTe.js";import"./index-CrwitxQp.js";import"./action-modal-DURRli1_.js";import"./form-modal-CTimWkQz.js";const L=[{title:"Academic Years",href:"/academic-years"}];function K(){const{academicYears:r,attendanceModes:j,filters:c}=T().props,[f,p]=a.useState(!1),[g,y]=a.useState(null),[l,m]=a.useState([]),[u,S]=a.useState("start_year"),[n,x]=a.useState("desc"),h=(e=null)=>{y(e),p(!0)},N=e=>{m(s=>s.includes(e)?s.filter(d=>d!==e):[...s,e])},k=()=>{const e=r.data.filter(o=>l.includes(o.id)),s=`Title,Status
`,d=e.map(o=>`${o.title},${o.status}`).join(`
`),C=new Blob([s,d],{type:"text/csv"}),M=URL.createObjectURL(C),i=document.createElement("a");i.href=M,i.download="academic-years.csv",i.click()},A=e=>{b.get("/academic-years",{...c||{},search:e.target.value},{preserveState:!0,replace:!0})},v=e=>{e===u?x(n==="desc"?"asc":"desc"):(S(e),x("desc")),b.get("/academic-years",{...c,sort:e,direction:n},{preserveState:!0,replace:!0})},w=[{key:"title",label:"Title",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"attendance_mode",label:"Attendance Mode",sortable:!0},{key:"note",label:"Notes",sortable:!0},{key:"actions",label:"Actions",sortable:!1}];return t.jsxs(R,{breadcrumbs:L,children:[t.jsx(E,{title:"Academic Years"}),t.jsx($,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",defaultValue:c.search||"",onChange:A,placeholder:"Search by title...",className:"w-64 rounded border px-3 py-1"}),t.jsx("button",{onClick:k,className:"rounded bg-indigo-600 px-3 py-1 text-sm text-white hover:cursor-pointer",children:"Export Selected"})]}),t.jsx("button",{onClick:()=>h(),className:"rounded bg-green-600 px-3 py-1 text-sm text-white transition hover:cursor-pointer hover:bg-green-700",children:"Add Accademic Year"})]}),t.jsx(I,{headers:w,data:r.data,sortColumn:u,sortDirection:n,onSort:v,onSelectAll:e=>m(e?r.data.map(s=>s.id):[]),selectedIds:l,emptyMessage:"No academic years found.",rowRender:e=>t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>N(e.id)})}),t.jsx("td",{className:"p-3",children:e.title}),t.jsx("td",{className:"p-3",children:e.status}),t.jsx("td",{className:"p-3",children:e.attendance_mode}),t.jsx("td",{className:"p-3",children:e.note}),t.jsx("td",{className:"flex justify-center gap-2 p-3",children:t.jsx("button",{onClick:()=>h(e),className:"rounded bg-blue-500 px-3 py-1 text-sm text-white hover:cursor-pointer",children:"Edit"})})]},e.id)}),t.jsx(O,{links:r.links}),t.jsx(D,{isOpen:f,closeModal:()=>p(!1),academicYear:g,attendanceModes:j})]})]})}export{K as default};
