import{r as h,j as n,R as B,b as $e,u as Te,H as Ie,a as Pe}from"./app-DB1qWSiB.js";import{S as ge}from"./searchable-select-iSbGAjrE.js";import{A as ke}from"./app-layout-4a-WvE6U.js";import{t as me,T as Fe}from"./index-eWe7ANNH.js";import{$ as je,a as Me,w as Ce,e as Oe,o as L,b as Ae}from"./use-resolve-button-type-Bou1xX-F.js";import{K as X,L as Y,f as De,y as ne,n as ie,o as q,_ as ye,s as le,O as ve,u as ae,t as Le}from"./use-is-mounted-Ct0cGqUb.js";/* empty css            */import"./button-CuGTm6WK.js";import"./index-DmIcr91P.js";import"./index-BMaPF8jR.js";import"./index-DnhlAIka.js";import"./createLucideIcon-YMQpOxG_.js";import"./app-logo-icon-CISyq-u_.js";function Re({value:e,onChange:a,placeholder:i="Search...",options:s}){const[m,c]=h.useState(""),[d,p]=h.useState(!1),E=h.useRef(null),N=s.filter(u=>u.name.toLowerCase().includes(m.toLowerCase())&&!e.includes(u.id)),g=s.filter(u=>e.includes(u.id));h.useEffect(()=>{const u=f=>{E.current&&!E.current.contains(f.target)&&p(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const _=u=>{a([...e,u.id]),c(""),p(!1)},S=u=>{a(e.filter(f=>f!==u))};return n.jsxs("div",{className:"relative",ref:E,children:[n.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:g.map(u=>n.jsxs("div",{className:"flex items-center rounded bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[n.jsx("span",{children:u.name}),n.jsx("button",{type:"button",onClick:()=>S(u.id),className:"ml-1 text-gray-500 hover:text-red-500 hover:cursor-pointer",children:"Ã—"})]},u.id))}),n.jsx("div",{className:"flex border border-gray-300 rounded",children:n.jsx("input",{type:"text",value:m,onChange:u=>c(u.target.value),placeholder:i,className:"flex-1 px-3 py-2 outline-none",onFocus:()=>p(!0)})}),d&&n.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:N.length===0?n.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Tidak ditemukan"}):N.map(u=>n.jsx("div",{onClick:()=>_(u),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:u.name},u.id))})]})}let He="span";var _e=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(_e||{});function Ge(e,a){var i;let{features:s=1,...m}=e,c={ref:a,"aria-hidden":(s&2)===2?!0:(i=m["aria-hidden"])!=null?i:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Y()({ourProps:c,theirProps:m,slot:{},defaultTag:He,name:"Hidden"})}let Se=X(Ge),Ue=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Ke=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var O=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(O||{}),re=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(re||{}),qe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qe||{});function We(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ue)).sort((a,i)=>Math.sign((a.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}function Je(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ke)).sort((a,i)=>Math.sign((a.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}var Be=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Be||{}),Ve=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ve||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let ze=["textarea","input"].join(",");function Xe(e){var a,i;return(i=(a=e==null?void 0:e.matches)==null?void 0:a.call(e,ze))!=null?i:!1}function V(e,a=i=>i){return e.slice().sort((i,s)=>{let m=a(i),c=a(s);if(m===null||c===null)return 0;let d=m.compareDocumentPosition(c);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function W(e,a,{sorted:i=!0,relativeTo:s=null,skipElements:m=[]}={}){let c=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,d=Array.isArray(e)?i?V(e):e:a&64?Je(e):We(e);m.length>0&&d.length>1&&(d=d.filter(u=>!m.some(f=>f!=null&&"current"in f?(f==null?void 0:f.current)===u:f===u))),s=s??c.activeElement;let p=(()=>{if(a&5)return 1;if(a&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),E=(()=>{if(a&1)return 0;if(a&2)return Math.max(0,d.indexOf(s))-1;if(a&4)return Math.max(0,d.indexOf(s))+1;if(a&8)return d.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),N=a&32?{preventScroll:!0}:{},g=0,_=d.length,S;do{if(g>=_||g+_<=0)return 0;let u=E+g;if(a&16)u=(u+_)%_;else{if(u<0)return 3;if(u>=_)return 1}S=d[u],S==null||S.focus(N),g+=p}while(S!==c.activeElement);return a&6&&Xe(S)&&S.select(),2}function Ye({onFocus:e}){let[a,i]=h.useState(!0),s=De();return a?B.createElement(Se,{as:"button",type:"button",features:_e.Focusable,onFocus:m=>{m.preventDefault();let c,d=50;function p(){if(d--<=0){c&&cancelAnimationFrame(c);return}if(e()){if(cancelAnimationFrame(c),!s.current)return;i(!1);return}c=requestAnimationFrame(p)}c=requestAnimationFrame(p)}}):null}const we=h.createContext(null);function Qe(){return{groups:new Map,get(e,a){var i;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let m=(i=s.get(a))!=null?i:0;s.set(a,m+1);let c=Array.from(s.keys()).indexOf(a);function d(){let p=s.get(a);p>1?s.set(a,p-1):s.delete(a)}return[c,d]}}}function Ze({children:e}){let a=h.useRef(Qe());return h.createElement(we.Provider,{value:a},e)}function Ne(e){let a=h.useContext(we);if(!a)throw new Error("You must wrap your component in a <StableCollection>");let i=h.useId(),[s,m]=a.current.get(e,i);return h.useEffect(()=>m,[]),s}var et=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(et||{}),tt=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(tt||{}),rt=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(rt||{});let at={0(e,a){var i;let s=V(e.tabs,g=>g.current),m=V(e.panels,g=>g.current),c=s.filter(g=>{var _;return!((_=g.current)!=null&&_.hasAttribute("disabled"))}),d={...e,tabs:s,panels:m};if(a.index<0||a.index>s.length-1){let g=ae(Math.sign(a.index-e.selectedIndex),{[-1]:()=>1,0:()=>ae(Math.sign(a.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(c.length===0)return d;let _=ae(g,{0:()=>s.indexOf(c[0]),1:()=>s.indexOf(c[c.length-1])});return{...d,selectedIndex:_===-1?e.selectedIndex:_}}let p=s.slice(0,a.index),E=[...s.slice(a.index),...p].find(g=>c.includes(g));if(!E)return d;let N=(i=s.indexOf(E))!=null?i:e.selectedIndex;return N===-1&&(N=e.selectedIndex),{...d,selectedIndex:N}},1(e,a){if(e.tabs.includes(a.tab))return e;let i=e.tabs[e.selectedIndex],s=V([...e.tabs,a.tab],c=>c.current),m=e.selectedIndex;return e.info.current.isControlled||(m=s.indexOf(i),m===-1&&(m=e.selectedIndex)),{...e,tabs:s,selectedIndex:m}},2(e,a){return{...e,tabs:e.tabs.filter(i=>i!==a.tab)}},3(e,a){return e.panels.includes(a.panel)?e:{...e,panels:V([...e.panels,a.panel],i=>i.current)}},4(e,a){return{...e,panels:e.panels.filter(i=>i!==a.panel)}}},be=h.createContext(null);be.displayName="TabsDataContext";function z(e){let a=h.useContext(be);if(a===null){let i=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,z),i}return a}let fe=h.createContext(null);fe.displayName="TabsActionsContext";function pe(e){let a=h.useContext(fe);if(a===null){let i=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,pe),i}return a}function nt(e,a){return ae(a.type,at,e,a)}let st="div";function lt(e,a){let{defaultIndex:i=0,vertical:s=!1,manual:m=!1,onChange:c,selectedIndex:d=null,...p}=e;const E=s?"vertical":"horizontal",N=m?"manual":"auto";let g=d!==null,_=le({isControlled:g}),S=ne(a),[u,f]=h.useReducer(nt,{info:_,selectedIndex:d??i,tabs:[],panels:[]}),G=h.useMemo(()=>({selectedIndex:u.selectedIndex}),[u.selectedIndex]),R=le(c||(()=>{})),A=le(u.tabs),x=h.useMemo(()=>({orientation:E,activation:N,...u}),[E,N,u]),k=q($=>(f({type:1,tab:$}),()=>f({type:2,tab:$}))),I=q($=>(f({type:3,panel:$}),()=>f({type:4,panel:$}))),F=q($=>{M.current!==$&&R.current($),g||f({type:0,index:$})}),M=le(g?e.selectedIndex:u.selectedIndex),H=h.useMemo(()=>({registerTab:k,registerPanel:I,change:F}),[]);ie(()=>{f({type:0,index:d??i})},[d]),ie(()=>{if(M.current===void 0||u.tabs.length<=0)return;let $=V(u.tabs,D=>D.current);$.some((D,C)=>u.tabs[C]!==D)&&F($.indexOf(u.tabs[M.current]))});let Q={ref:S},U=Y();return B.createElement(Ze,null,B.createElement(fe.Provider,{value:H},B.createElement(be.Provider,{value:x},x.tabs.length<=0&&B.createElement(Ye,{onFocus:()=>{var $,D;for(let C of A.current)if((($=C.current)==null?void 0:$.tabIndex)===0)return(D=C.current)==null||D.focus(),!0;return!1}}),U({ourProps:Q,theirProps:p,slot:G,defaultTag:st,name:"Tabs"}))))}let it="div";function ot(e,a){let{orientation:i,selectedIndex:s}=z("Tab.List"),m=ne(a),c=h.useMemo(()=>({selectedIndex:s}),[s]),d=e,p={ref:m,role:"tablist","aria-orientation":i};return Y()({ourProps:p,theirProps:d,slot:c,defaultTag:it,name:"Tabs.List"})}let ut="button";function dt(e,a){var i,s;let m=h.useId(),{id:c=`headlessui-tabs-tab-${m}`,disabled:d=!1,autoFocus:p=!1,...E}=e,{orientation:N,activation:g,selectedIndex:_,tabs:S,panels:u}=z("Tab"),f=pe("Tab"),G=z("Tab"),[R,A]=h.useState(null),x=h.useRef(null),k=ne(x,a,A);ie(()=>f.registerTab(x),[f,x]);let I=Ne("tabs"),F=S.indexOf(x);F===-1&&(F=I);let M=F===_,H=q(y=>{var r;let o=y();if(o===re.Success&&g==="auto"){let l=(r=Ae(x))==null?void 0:r.activeElement,t=G.tabs.findIndex(b=>b.current===l);t!==-1&&f.change(t)}return o}),Q=q(y=>{let r=S.map(o=>o.current).filter(Boolean);if(y.key===L.Space||y.key===L.Enter){y.preventDefault(),y.stopPropagation(),f.change(F);return}switch(y.key){case L.Home:case L.PageUp:return y.preventDefault(),y.stopPropagation(),H(()=>W(r,O.First));case L.End:case L.PageDown:return y.preventDefault(),y.stopPropagation(),H(()=>W(r,O.Last))}if(H(()=>ae(N,{vertical(){return y.key===L.ArrowUp?W(r,O.Previous|O.WrapAround):y.key===L.ArrowDown?W(r,O.Next|O.WrapAround):re.Error},horizontal(){return y.key===L.ArrowLeft?W(r,O.Previous|O.WrapAround):y.key===L.ArrowRight?W(r,O.Next|O.WrapAround):re.Error}}))===re.Success)return y.preventDefault()}),U=h.useRef(!1),$=q(()=>{var y;U.current||(U.current=!0,(y=x.current)==null||y.focus({preventScroll:!0}),f.change(F),Le(()=>{U.current=!1}))}),D=q(y=>{y.preventDefault()}),{isFocusVisible:C,focusProps:Z}=je({autoFocus:p}),{isHovered:se,hoverProps:oe}=Me({isDisabled:d}),{pressed:ee,pressProps:ue}=Ce({disabled:d}),de=h.useMemo(()=>({selected:M,hover:se,active:ee,focus:C,autofocus:p,disabled:d}),[M,se,C,ee,p,d]),ce=ye({ref:k,onKeyDown:Q,onMouseDown:D,onClick:$,id:c,role:"tab",type:Oe(e,R),"aria-controls":(s=(i=u[F])==null?void 0:i.current)==null?void 0:s.id,"aria-selected":M,tabIndex:M?0:-1,disabled:d||void 0,autoFocus:p},Z,oe,ue);return Y()({ourProps:ce,theirProps:E,slot:de,defaultTag:ut,name:"Tabs.Tab"})}let ct="div";function mt(e,a){let{selectedIndex:i}=z("Tab.Panels"),s=ne(a),m=h.useMemo(()=>({selectedIndex:i}),[i]),c=e,d={ref:s};return Y()({ourProps:d,theirProps:c,slot:m,defaultTag:ct,name:"Tabs.Panels"})}let ht="div",bt=ve.RenderStrategy|ve.Static;function ft(e,a){var i,s,m,c;let d=h.useId(),{id:p=`headlessui-tabs-panel-${d}`,tabIndex:E=0,...N}=e,{selectedIndex:g,tabs:_,panels:S}=z("Tab.Panel"),u=pe("Tab.Panel"),f=h.useRef(null),G=ne(f,a);ie(()=>u.registerPanel(f),[u,f]);let R=Ne("panels"),A=S.indexOf(f);A===-1&&(A=R);let x=A===g,{isFocusVisible:k,focusProps:I}=je(),F=h.useMemo(()=>({selected:x,focus:k}),[x,k]),M=ye({ref:G,id:p,role:"tabpanel","aria-labelledby":(s=(i=_[A])==null?void 0:i.current)==null?void 0:s.id,tabIndex:x?E:-1},I),H=Y();return!x&&((m=N.unmount)==null||m)&&!((c=N.static)!=null&&c)?B.createElement(Se,{"aria-hidden":"true",...M}):H({ourProps:M,theirProps:N,slot:F,defaultTag:ht,features:bt,visible:x,name:"Tabs.Panel"})}let pt=X(dt),xt=X(lt),gt=X(ot),vt=X(mt),jt=X(ft),J=Object.assign(pt,{Group:xt,List:gt,Panels:vt,Panel:jt});const yt=()=>[{title:"Kelas",href:"/classrooms"},{title:"Jadwal",href:""}],he=["Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu","Minggu"];function At({classroom:e,days:a,shiftings:i,teachers:s,academicYear:m,subjectSchedulesByDay:c,subjects:d,refreshed_schedules:p}){const{data:E,setData:N,post:g,processing:_}=$e({days:a}),[S,u]=h.useState(()=>ee(p||c)),[f,G]=h.useState(!1),[R,A]=h.useState(0),[x,k]=h.useState(null),{flash:I}=Te().props,F=h.useMemo(()=>ue(s),[s]);h.useEffect(()=>{if(p){const r=ee(p);u(r),k(null)}},[p]),h.useEffect(()=>{I!=null&&I.success&&(me.success(I.success),k(null)),I!=null&&I.error&&me.error(I.error)},[I]);const M=r=>{A(r)},H=(r,o)=>{const l=[...E.days];l[r]={...l[r],shifting_id:o,teachers:o?l[r].teachers:[],selected_teachers:o?l[r].selected_teachers:[]},N("days",l)},Q=(r,o)=>{const l=[...E.days],t=o.filter(w=>w!==null).map(Number),b=t.map(w=>{var T;return{id:w,name:((T=s.find(v=>v.id===w))==null?void 0:T.full_name)||"Unknown"}});l[r]={...l[r],teachers:t,selected_teachers:b},N("days",l)},U=(r,o)=>{const l=S[r][o];if(!l.id||l.id.toString().includes("."))return;const t={...l};k({day:r,index:o,original:t}),u(b=>{const w={...b};return w[r]=w[r].map((T,v)=>({...T,editable:v===o&&!!T.id&&!T.id.toString().includes(".")})),w})},$=(r,o)=>{if(x){const l=S[r][o];!l.id||l.id.toString().includes(".")?Z(r,o):u(t=>{const b={...t};return b[r]=b[r].map(w=>({...w,editable:!1})),b[r][o]={...x.original,editable:!1},b})}k(null)},D=r=>{var l;const o=Date.now()+Math.random();u(t=>({...t,[r]:[...t[r]||[],{id:o,subject_id:null,teacher_id:null,start_hour:"",end_hour:"",editable:!0}]})),k({day:r,index:((l=S[r])==null?void 0:l.length)||0,original:{id:o,subject_id:null,teacher_id:null,start_hour:"",end_hour:"",editable:!0}})},C=(r,o,l,t)=>{u(b=>{const w={...b},T=[...w[r]||[]];let v=t;if((l==="start_hour"||l==="end_hour")&&typeof t=="string"&&t.length===5){const[P,j]=t.split(":"),K=Math.min(Math.max(parseInt(P||"0",10),0),23),te=Math.min(Math.max(parseInt(j||"0",10),0),59);v=`${String(K).padStart(2,"0")}:${String(te).padStart(2,"0")}`}return T[o]={...T[o],[l]:v},w[r]=T,w})},Z=(r,o)=>{u(l=>{const t=[...l[r]];return t.splice(o,1),{...l,[r]:t}}),x&&x.day===r&&x.index===o&&k(null)},se=r=>{r.preventDefault(),g(route("classrooms.schedule.shift.save",e.id))},oe=r=>{r.preventDefault();const o=de(S),l=ce(o);if(l.length>0){me.error(l[0]);return}G(!0),Pe.post(route("classrooms.schedule.subject.save",e.id),{schedules:o},{onFinish:()=>{G(!1)},preserveState:!1,preserveScroll:!0})};function ee(r){var l;const o={};for(let t=1;t<=7;t++)o[t]=((l=r[t])==null?void 0:l.map(b=>({id:b.id,subject_id:b.subject_id,teacher_id:b.teacher_id,start_hour:b.start_hour,end_hour:b.end_hour,editable:!1})))||[];return o}function ue(r){return r.map(o=>({id:o.id,name:o.full_name}))}function de(r){return Object.entries(r).flatMap(([o,l])=>l.filter(t=>t.subject_id&&t.teacher_id&&t.start_hour&&t.end_hour).map(t=>({id:t.id&&!t.id.toString().includes(".")?t.id:void 0,day:parseInt(o),subject_id:t.subject_id,teacher_id:t.teacher_id,start_hour:t.start_hour,end_hour:t.end_hour}))).sort((o,l)=>o.day-l.day||o.start_hour.localeCompare(l.start_hour))}function ce(r){const o={},l=/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;for(const t of r){if(!t.day&&t.day!==0)return[`Jadwal ke-${r.indexOf(t)+1} tidak memiliki hari yang ditentukan`];if(!t.subject_id)return[`Hari ${t.day}: Mata pelajaran harus dipilih`];if(!t.teacher_id)return[`Hari ${t.day}: Guru pengajar harus dipilih`];if(!t.start_hour||!t.end_hour)return[`Hari ${t.day}: Waktu mulai dan selesai harus diisi`];if(t.start_hour&&!l.test(t.start_hour))return[`Hari ${t.day}: Format waktu mulai tidak valid (HH:MM)`];if(t.end_hour&&!l.test(t.end_hour))return[`Hari ${t.day}: Format waktu selesai tidak valid (HH:MM)`];if(t.end_hour<=t.start_hour)return[`Hari ${t.day}: Waktu selesai harus setelah waktu mulai`];o[t.day]||(o[t.day]=[]),o[t.day].push(t)}for(const[t,b]of Object.entries(o)){const w=b;w.sort((v,P)=>v.start_hour.localeCompare(P.start_hour));for(let v=1;v<w.length;v++){const P=w[v-1],j=w[v];if(j.start_hour<P.end_hour)return[`Terjadi overlap jadwal pada ${he[parseInt(t)-1]}: ${P.start_hour}-${P.end_hour} dan ${j.start_hour}-${j.end_hour}`]}const T={};for(const v of w)v.teacher_id&&(T[v.teacher_id]||(T[v.teacher_id]=[]),T[v.teacher_id].push(v));for(const[v,P]of Object.entries(T)){P.sort((j,K)=>j.start_hour.localeCompare(K.start_hour));for(let j=1;j<P.length;j++){const K=P[j-1],te=P[j];if(te.start_hour<K.end_hour){const xe=s.find(Ee=>Ee.id===parseInt(v));return[`${xe?xe.full_name:`Guru ID ${v}`} memiliki jadwal bertumpuk pada ${he[parseInt(t)-1]}: ${K.start_hour}-${K.end_hour} dan ${te.start_hour}-${te.end_hour}`]}}}}return[]}const y=()=>{u(r=>{const o={};return Object.keys(r).forEach(l=>{o[parseInt(l)]=r[parseInt(l)].map(t=>({...t,editable:!1}))}),o}),k(null)};return n.jsxs(ke,{breadcrumbs:yt(),children:[n.jsx(Ie,{title:`Jadwal - ${e.name}`}),n.jsx(Fe,{position:"top-right",richColors:!0}),n.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[n.jsxs("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("h1",{className:"text-2xl font-bold",children:["Jadwal: ",e.name]}),n.jsx("button",{type:"submit",form:R===0?"shift-form":"subject-form",disabled:R===0?_:f,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-blue-700 disabled:opacity-50",children:_||f?"Menyimpan...":"Simpan Jadwal"})]}),n.jsxs(J.Group,{selectedIndex:R,onChange:M,children:[n.jsx(J.List,{className:"mb-6 flex rounded-lg bg-blue-100 p-1",children:["By Shifting","By Subject"].map(r=>n.jsx(J,{className:({selected:o})=>`flex-1 rounded-lg py-3 text-center text-sm font-medium transition-all hover:cursor-pointer ${o?"bg-white text-blue-700 shadow":"text-gray-600 hover:bg-blue-200"}`,children:r},r))}),n.jsxs(J.Panels,{children:[n.jsx(J.Panel,{children:n.jsx("form",{id:"shift-form",onSubmit:se,className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:E.days.map((r,o)=>n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"mb-3 text-lg font-semibold text-gray-800",children:r.day_name}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Shifting:"}),n.jsxs("select",{value:r.shifting_id||"",onChange:l=>H(o,l.target.value?parseInt(l.target.value):null),className:"w-full rounded-md border border-gray-300 bg-gray-50 p-2 text-sm focus:border-blue-500 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- No Schedule --"}),i.map(l=>n.jsxs("option",{value:l.id,children:[l.name," (",l.start_hour," - ",l.end_hour,")"]},l.id))]})]}),r.shifting_id&&n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Penanggung jawab:"}),n.jsx(Re,{value:r.teachers,onChange:l=>Q(o,l),placeholder:"Cari guru...",options:F})]})]},r.day))})}),n.jsx(J.Panel,{children:n.jsx("form",{id:"subject-form",onSubmit:oe,className:"space-y-6",children:[1,2,3,4,5,6,7].map(r=>{var o,l;return n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:he[r-1]}),n.jsx("button",{type:"button",onClick:()=>D(r),className:"inline-flex items-center rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-green-700",children:"+ Tambah"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-1",children:(o=S[r])==null?void 0:o.map((t,b)=>{var v,P;const w=(x==null?void 0:x.day)===r&&(x==null?void 0:x.index)===b,T=!t.id||t.id.toString().includes(".");return n.jsx("div",{className:"relative rounded-md border border-gray-300 bg-gray-50 p-4",children:n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Jam Mulai"}),n.jsx("input",{type:"time",value:t.start_hour,onChange:j=>C(r,b,"start_hour",j.target.value),className:`mt-1 w-full rounded-md border border-gray-300 p-2 text-sm shadow-sm ${t.editable?"cursor-text bg-white":"cursor-not-allowed bg-gray-100"}`,disabled:!t.editable,readOnly:!t.editable,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Jam Selesai"}),n.jsx("input",{type:"time",value:t.end_hour,onChange:j=>C(r,b,"end_hour",j.target.value),className:`mt-1 w-full rounded-md border border-gray-300 p-2 text-sm shadow-sm ${t.editable?"cursor-text bg-white":"cursor-not-allowed bg-gray-100"}`,disabled:!t.editable,readOnly:!t.editable,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Mata Pelajaran"}),n.jsx(ge,{value:t.subject_id,onChange:j=>C(r,b,"subject_id",j),placeholder:"Pilih mata pelajaran...",endpoint:route("subjects.search"),initialOption:t.subject_id?{id:t.subject_id,full_name:((v=d.find(j=>j.id===t.subject_id))==null?void 0:v.name)||""}:void 0,showInitialOptions:!0,required:!0,disabled:!t.editable})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pengajar"}),n.jsx(ge,{value:t.teacher_id,onChange:j=>C(r,b,"teacher_id",j),placeholder:"Select teacher...",endpoint:route("teachers.search"),initialOption:t.teacher_id?{id:t.teacher_id,full_name:((P=s.find(j=>j.id===t.teacher_id))==null?void 0:P.full_name)||""}:void 0,showInitialOptions:!0,required:!0,disabled:!t.editable})]}),n.jsx("div",{className:"mt-1 flex h-full items-center justify-start space-x-2 pt-6 md:pt-0",children:T?n.jsx("button",{type:"button",onClick:()=>Z(r,b),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-50",children:"Batal"}):w?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>$(r,b),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),n.jsx("button",{type:"button",onClick:y,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer",children:"Selesai"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>U(r,b),className:"rounded-md bg-yellow-400 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-yellow-600",disabled:x!==null,children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>Z(r,b),className:"rounded-md bg-red-500 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-red-700",children:"Hapus"})]})})]})},b)})}),((l=S[r])==null?void 0:l.length)===0&&n.jsx("div",{className:"py-4 text-center text-gray-500",children:"Tidak ada jadwal mata pelajaran untuk hari ini"})]},r)})})})]})]})]})]})}export{At as default};
