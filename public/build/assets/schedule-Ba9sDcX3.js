import{r as h,j as n,R as V,b as ke,u as Fe,H as Ce,a as $e}from"./app-B87CX-uN.js";import{S as ve}from"./searchable-select-BXMhNuer.js";import{A as Ae}from"./app-layout-DVONSsSU.js";import{t as he,T as Me}from"./index-AvwoBn1a.js";import{r as je,e as _e,o as R,$ as Se,a as Oe,w as De,n as ae,b as Re}from"./use-resolve-button-type-BJvjKHje.js";import{Y as X,K as Y,f as Le,A as ye,y as ne,n as ie,o as q,u as re,t as He,V as we,s as le}from"./use-is-mounted-B6dfXML8.js";/* empty css            */import"./button-CrdDLOym.js";import"./index-DHivLiSQ.js";import"./createLucideIcon-CiHbDcRM.js";import"./index-DkjqYkWd.js";import"./app-logo-icon-Dm0YTdU5.js";function Ge({value:e,onChange:a,placeholder:i="Search...",options:l}){const[m,c]=h.useState(""),[d,p]=h.useState(!1),E=h.useRef(null),N=l.filter(u=>u.name.toLowerCase().includes(m.toLowerCase())&&!e.includes(u.id)),g=l.filter(u=>e.includes(u.id));h.useEffect(()=>{const u=b=>{E.current&&!E.current.contains(b.target)&&p(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const S=u=>{a([...e,u.id]),c(""),p(!1)},y=u=>{a(e.filter(b=>b!==u))};return n.jsxs("div",{className:"relative",ref:E,children:[n.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:g.map(u=>n.jsxs("div",{className:"flex items-center rounded bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[n.jsx("span",{children:u.name}),n.jsx("button",{type:"button",onClick:()=>y(u.id),className:"ml-1 text-gray-500 hover:text-red-500 hover:cursor-pointer",children:"Ã—"})]},u.id))}),n.jsx("div",{className:"flex border border-gray-300 rounded",children:n.jsx("input",{type:"text",value:m,onChange:u=>c(u.target.value),placeholder:i,className:"flex-1 px-3 py-2 outline-none",onFocus:()=>p(!0)})}),d&&n.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border max-h-60 overflow-auto",children:N.length===0?n.jsx("div",{className:"py-2 px-3 text-gray-500",children:"Tidak ditemukan"}):N.map(u=>n.jsx("div",{onClick:()=>S(u),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:u.name},u.id))})]})}let Ue="span";var Ne=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ne||{});function We(e,a){var i;let{features:l=1,...m}=e,c={ref:a,"aria-hidden":(l&2)===2?!0:(i=m["aria-hidden"])!=null?i:void 0,hidden:(l&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(l&4)===4&&(l&2)!==2&&{display:"none"}}};return Y()({ourProps:c,theirProps:m,slot:{},defaultTag:Ue,name:"Hidden"})}let Ee=X(We),qe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Je=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var M=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(M||{}),te=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(te||{}),Ke=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Ke||{});function Ve(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(qe)).sort((a,i)=>Math.sign((a.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}function Be(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Je)).sort((a,i)=>Math.sign((a.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}var ze=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ze||{}),Xe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Xe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let Ye=["textarea","input"].join(",");function Qe(e){var a,i;return(i=(a=e==null?void 0:e.matches)==null?void 0:a.call(e,Ye))!=null?i:!1}function B(e,a=i=>i){return e.slice().sort((i,l)=>{let m=a(i),c=a(l);if(m===null||c===null)return 0;let d=m.compareDocumentPosition(c);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function J(e,a,{sorted:i=!0,relativeTo:l=null,skipElements:m=[]}={}){let c=Array.isArray(e)?e.length>0?je(e[0]):document:je(e),d=Array.isArray(e)?i?B(e):e:a&64?Be(e):Ve(e);m.length>0&&d.length>1&&(d=d.filter(u=>!m.some(b=>b!=null&&"current"in b?(b==null?void 0:b.current)===u:b===u))),l=l??(c==null?void 0:c.activeElement);let p=(()=>{if(a&5)return 1;if(a&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),E=(()=>{if(a&1)return 0;if(a&2)return Math.max(0,d.indexOf(l))-1;if(a&4)return Math.max(0,d.indexOf(l))+1;if(a&8)return d.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),N=a&32?{preventScroll:!0}:{},g=0,S=d.length,y;do{if(g>=S||g+S<=0)return 0;let u=E+g;if(a&16)u=(u+S)%S;else{if(u<0)return 3;if(u>=S)return 1}y=d[u],y==null||y.focus(N),g+=p}while(y!==_e(y));return a&6&&Qe(y)&&y.select(),2}function Ze({onFocus:e}){let[a,i]=h.useState(!0),l=Le();return a?V.createElement(Ee,{as:"button",type:"button",features:Ne.Focusable,onFocus:m=>{m.preventDefault();let c,d=50;function p(){if(d--<=0){c&&cancelAnimationFrame(c);return}if(e()){if(cancelAnimationFrame(c),!l.current)return;i(!1);return}c=requestAnimationFrame(p)}c=requestAnimationFrame(p)}}):null}const Ie=h.createContext(null);function et(){return{groups:new Map,get(e,a){var i;let l=this.groups.get(e);l||(l=new Map,this.groups.set(e,l));let m=(i=l.get(a))!=null?i:0;l.set(a,m+1);let c=Array.from(l.keys()).indexOf(a);function d(){let p=l.get(a);p>1?l.set(a,p-1):l.delete(a)}return[c,d]}}}function tt({children:e}){let a=h.useRef(et());return h.createElement(Ie.Provider,{value:a},e)}function Te(e){let a=h.useContext(Ie);if(!a)throw new Error("You must wrap your component in a <StableCollection>");let i=h.useId(),[l,m]=a.current.get(e,i);return h.useEffect(()=>m,[]),l}var rt=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(rt||{}),at=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(at||{}),nt=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(nt||{});let st={0(e,a){var i;let l=B(e.tabs,g=>g.current),m=B(e.panels,g=>g.current),c=l.filter(g=>{var S;return!((S=g.current)!=null&&S.hasAttribute("disabled"))}),d={...e,tabs:l,panels:m};if(a.index<0||a.index>l.length-1){let g=re(Math.sign(a.index-e.selectedIndex),{[-1]:()=>1,0:()=>re(Math.sign(a.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(c.length===0)return d;let S=re(g,{0:()=>l.indexOf(c[0]),1:()=>l.indexOf(c[c.length-1])});return{...d,selectedIndex:S===-1?e.selectedIndex:S}}let p=l.slice(0,a.index),E=[...l.slice(a.index),...p].find(g=>c.includes(g));if(!E)return d;let N=(i=l.indexOf(E))!=null?i:e.selectedIndex;return N===-1&&(N=e.selectedIndex),{...d,selectedIndex:N}},1(e,a){if(e.tabs.includes(a.tab))return e;let i=e.tabs[e.selectedIndex],l=B([...e.tabs,a.tab],c=>c.current),m=e.selectedIndex;return e.info.current.isControlled||(m=l.indexOf(i),m===-1&&(m=e.selectedIndex)),{...e,tabs:l,selectedIndex:m}},2(e,a){return{...e,tabs:e.tabs.filter(i=>i!==a.tab)}},3(e,a){return e.panels.includes(a.panel)?e:{...e,panels:B([...e.panels,a.panel],i=>i.current)}},4(e,a){return{...e,panels:e.panels.filter(i=>i!==a.panel)}}},fe=h.createContext(null);fe.displayName="TabsDataContext";function z(e){let a=h.useContext(fe);if(a===null){let i=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,z),i}return a}let pe=h.createContext(null);pe.displayName="TabsActionsContext";function xe(e){let a=h.useContext(pe);if(a===null){let i=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,xe),i}return a}function lt(e,a){return re(a.type,st,e,a)}let it="div";function ot(e,a){let{defaultIndex:i=0,vertical:l=!1,manual:m=!1,onChange:c,selectedIndex:d=null,...p}=e;const E=l?"vertical":"horizontal",N=m?"manual":"auto";let g=d!==null,S=le({isControlled:g}),y=ne(a),[u,b]=h.useReducer(lt,{info:S,selectedIndex:d??i,tabs:[],panels:[]}),G=ae({selectedIndex:u.selectedIndex}),L=le(c||(()=>{})),O=le(u.tabs),x=h.useMemo(()=>({orientation:E,activation:N,...u}),[E,N,u]),F=q(I=>(b({type:1,tab:I}),()=>b({type:2,tab:I}))),P=q(I=>(b({type:3,panel:I}),()=>b({type:4,panel:I}))),C=q(I=>{$.current!==I&&L.current(I),g||b({type:0,index:I})}),$=le(g?e.selectedIndex:u.selectedIndex),H=h.useMemo(()=>({registerTab:F,registerPanel:P,change:C}),[]);ie(()=>{b({type:0,index:d??i})},[d]),ie(()=>{if($.current===void 0||u.tabs.length<=0)return;let I=B(u.tabs,D=>D.current);I.some((D,A)=>u.tabs[A]!==D)&&C(I.indexOf(u.tabs[$.current]))});let Q={ref:y},U=Y();return V.createElement(tt,null,V.createElement(pe.Provider,{value:H},V.createElement(fe.Provider,{value:x},x.tabs.length<=0&&V.createElement(Ze,{onFocus:()=>{var I,D;for(let A of O.current)if(((I=A.current)==null?void 0:I.tabIndex)===0)return(D=A.current)==null||D.focus(),!0;return!1}}),U({ourProps:Q,theirProps:p,slot:G,defaultTag:it,name:"Tabs"}))))}let ut="div";function dt(e,a){let{orientation:i,selectedIndex:l}=z("Tab.List"),m=ne(a),c=ae({selectedIndex:l}),d=e,p={ref:m,role:"tablist","aria-orientation":i};return Y()({ourProps:p,theirProps:d,slot:c,defaultTag:ut,name:"Tabs.List"})}let ct="button";function mt(e,a){var i,l;let m=h.useId(),{id:c=`headlessui-tabs-tab-${m}`,disabled:d=!1,autoFocus:p=!1,...E}=e,{orientation:N,activation:g,selectedIndex:S,tabs:y,panels:u}=z("Tab"),b=xe("Tab"),G=z("Tab"),[L,O]=h.useState(null),x=h.useRef(null),F=ne(x,a,O);ie(()=>b.registerTab(x),[b,x]);let P=Te("tabs"),C=y.indexOf(x);C===-1&&(C=P);let $=C===S,H=q(_=>{let r=_();if(r===te.Success&&g==="auto"){let o=_e(x.current),s=G.tabs.findIndex(t=>t.current===o);s!==-1&&b.change(s)}return r}),Q=q(_=>{let r=y.map(o=>o.current).filter(Boolean);if(_.key===R.Space||_.key===R.Enter){_.preventDefault(),_.stopPropagation(),b.change(C);return}switch(_.key){case R.Home:case R.PageUp:return _.preventDefault(),_.stopPropagation(),H(()=>J(r,M.First));case R.End:case R.PageDown:return _.preventDefault(),_.stopPropagation(),H(()=>J(r,M.Last))}if(H(()=>re(N,{vertical(){return _.key===R.ArrowUp?J(r,M.Previous|M.WrapAround):_.key===R.ArrowDown?J(r,M.Next|M.WrapAround):te.Error},horizontal(){return _.key===R.ArrowLeft?J(r,M.Previous|M.WrapAround):_.key===R.ArrowRight?J(r,M.Next|M.WrapAround):te.Error}}))===te.Success)return _.preventDefault()}),U=h.useRef(!1),I=q(()=>{var _;U.current||(U.current=!0,(_=x.current)==null||_.focus({preventScroll:!0}),b.change(C),He(()=>{U.current=!1}))}),D=q(_=>{_.preventDefault()}),{isFocusVisible:A,focusProps:Z}=Se({autoFocus:p}),{isHovered:oe,hoverProps:ue}=Oe({isDisabled:d}),{pressed:se,pressProps:de}=De({disabled:d}),ce=ae({selected:$,hover:oe,active:se,focus:A,autofocus:p,disabled:d}),me=we({ref:F,onKeyDown:Q,onMouseDown:D,onClick:I,id:c,role:"tab",type:Re(e,L),"aria-controls":(l=(i=u[C])==null?void 0:i.current)==null?void 0:l.id,"aria-selected":$,tabIndex:$?0:-1,disabled:d||void 0,autoFocus:p},Z,ue,de);return Y()({ourProps:me,theirProps:E,slot:ce,defaultTag:ct,name:"Tabs.Tab"})}let ht="div";function bt(e,a){let{selectedIndex:i}=z("Tab.Panels"),l=ne(a),m=ae({selectedIndex:i}),c=e,d={ref:l};return Y()({ourProps:d,theirProps:c,slot:m,defaultTag:ht,name:"Tabs.Panels"})}let ft="div",pt=ye.RenderStrategy|ye.Static;function xt(e,a){var i,l,m,c;let d=h.useId(),{id:p=`headlessui-tabs-panel-${d}`,tabIndex:E=0,...N}=e,{selectedIndex:g,tabs:S,panels:y}=z("Tab.Panel"),u=xe("Tab.Panel"),b=h.useRef(null),G=ne(b,a);ie(()=>u.registerPanel(b),[u,b]);let L=Te("panels"),O=y.indexOf(b);O===-1&&(O=L);let x=O===g,{isFocusVisible:F,focusProps:P}=Se(),C=ae({selected:x,focus:F}),$=we({ref:G,id:p,role:"tabpanel","aria-labelledby":(l=(i=S[O])==null?void 0:i.current)==null?void 0:l.id,tabIndex:x?E:-1},P),H=Y();return!x&&((m=N.unmount)==null||m)&&!((c=N.static)!=null&&c)?V.createElement(Ee,{"aria-hidden":"true",...$}):H({ourProps:$,theirProps:N,slot:C,defaultTag:ft,features:pt,visible:x,name:"Tabs.Panel"})}let gt=X(mt),vt=X(ot),jt=X(dt),yt=X(bt),_t=X(xt),K=Object.assign(gt,{Group:vt,List:jt,Panels:yt,Panel:_t});const St=()=>[{title:"Kelas",href:"/classrooms"},{title:"Jadwal",href:""}],be=["Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu","Minggu"];function Dt({classroom:e,days:a,shiftings:i,teachers:l,academicYear:m,subjectSchedulesByDay:c,subjects:d,refreshed_schedules:p}){const{data:E,setData:N,post:g,processing:S}=ke({days:a}),[y,u]=h.useState(()=>se(p||c)),[b,G]=h.useState(!1),[L,O]=h.useState(0),[x,F]=h.useState(null),{flash:P}=Fe().props,C=h.useMemo(()=>de(l),[l]);h.useEffect(()=>{if(p){const r=se(p);u(r),F(null)}},[p]),h.useEffect(()=>{P!=null&&P.success&&(he.success(P.success),F(null)),P!=null&&P.error&&he.error(P.error)},[P]);const $=r=>{O(r)},H=(r,o)=>{const s=[...E.days];s[r]={...s[r],shifting_id:o,teachers:o?s[r].teachers:[],selected_teachers:o?s[r].selected_teachers:[]},N("days",s)},Q=(r,o)=>{const s=[...E.days],t=o.filter(w=>w!==null).map(Number),f=t.map(w=>{var T;return{id:w,name:((T=l.find(v=>v.id===w))==null?void 0:T.full_name)||"Unknown"}});s[r]={...s[r],teachers:t,selected_teachers:f},N("days",s)},U=(r,o)=>{const s=y[r][o];if(!s.id||s.id.toString().includes("."))return;const t={...s};F({day:r,index:o,original:t}),u(f=>{const w={...f};return w[r]=w[r].map((T,v)=>({...T,editable:v===o&&!!T.id&&!T.id.toString().includes(".")})),w})},I=(r,o)=>{if(x){const s=y[r][o];!s.id||s.id.toString().includes(".")?Z(r,o):u(t=>{const f={...t};return f[r]=f[r].map(w=>({...w,editable:!1})),f[r][o]={...x.original,editable:!1},f})}F(null)},D=r=>{var s;const o=Date.now()+Math.random();u(t=>({...t,[r]:[...t[r]||[],{id:o,subject_id:null,teacher_id:null,start_hour:"",end_hour:"",editable:!0}]})),F({day:r,index:((s=y[r])==null?void 0:s.length)||0,original:{id:o,subject_id:null,teacher_id:null,start_hour:"",end_hour:"",editable:!0}})},A=(r,o,s,t)=>{u(f=>{const w={...f},T=[...w[r]||[]];let v=t;if((s==="start_hour"||s==="end_hour")&&typeof t=="string"&&t.length===5){const[k,j]=t.split(":"),W=Math.min(Math.max(parseInt(k||"0",10),0),23),ee=Math.min(Math.max(parseInt(j||"0",10),0),59);v=`${String(W).padStart(2,"0")}:${String(ee).padStart(2,"0")}`}return T[o]={...T[o],[s]:v},w[r]=T,w})},Z=(r,o)=>{u(s=>{const t=[...s[r]];return t.splice(o,1),{...s,[r]:t}}),x&&x.day===r&&x.index===o&&F(null)},oe=r=>{r.preventDefault(),g(route("classrooms.schedule.shift.save",e.id))},ue=r=>{r.preventDefault();const o=ce(y),s=me(o);if(s.length>0){he.error(s[0]);return}G(!0),$e.post(route("classrooms.schedule.subject.save",e.id),{schedules:o},{onFinish:()=>{G(!1)},preserveState:!1,preserveScroll:!0})};function se(r){var s;const o={};for(let t=1;t<=7;t++)o[t]=((s=r[t])==null?void 0:s.map(f=>({id:f.id,subject_id:f.subject_id,teacher_id:f.teacher_id,start_hour:f.start_hour,end_hour:f.end_hour,editable:!1})))||[];return o}function de(r){return r.map(o=>({id:o.id,name:o.full_name}))}function ce(r){return Object.entries(r).flatMap(([o,s])=>s.filter(t=>t.subject_id&&t.teacher_id&&t.start_hour&&t.end_hour).map(t=>({id:t.id&&!t.id.toString().includes(".")?t.id:void 0,day:parseInt(o),subject_id:t.subject_id,teacher_id:t.teacher_id,start_hour:t.start_hour,end_hour:t.end_hour}))).sort((o,s)=>o.day-s.day||o.start_hour.localeCompare(s.start_hour))}function me(r){const o={},s=/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;for(const t of r){if(!t.day&&t.day!==0)return[`Jadwal ke-${r.indexOf(t)+1} tidak memiliki hari yang ditentukan`];if(!t.subject_id)return[`Hari ${t.day}: Mata pelajaran harus dipilih`];if(!t.teacher_id)return[`Hari ${t.day}: Guru pengajar harus dipilih`];if(!t.start_hour||!t.end_hour)return[`Hari ${t.day}: Waktu mulai dan selesai harus diisi`];if(t.start_hour&&!s.test(t.start_hour))return[`Hari ${t.day}: Format waktu mulai tidak valid (HH:MM)`];if(t.end_hour&&!s.test(t.end_hour))return[`Hari ${t.day}: Format waktu selesai tidak valid (HH:MM)`];if(t.end_hour<=t.start_hour)return[`Hari ${t.day}: Waktu selesai harus setelah waktu mulai`];o[t.day]||(o[t.day]=[]),o[t.day].push(t)}for(const[t,f]of Object.entries(o)){const w=f;w.sort((v,k)=>v.start_hour.localeCompare(k.start_hour));for(let v=1;v<w.length;v++){const k=w[v-1],j=w[v];if(j.start_hour<k.end_hour)return[`Terjadi overlap jadwal pada ${be[parseInt(t)-1]}: ${k.start_hour}-${k.end_hour} dan ${j.start_hour}-${j.end_hour}`]}const T={};for(const v of w)v.teacher_id&&(T[v.teacher_id]||(T[v.teacher_id]=[]),T[v.teacher_id].push(v));for(const[v,k]of Object.entries(T)){k.sort((j,W)=>j.start_hour.localeCompare(W.start_hour));for(let j=1;j<k.length;j++){const W=k[j-1],ee=k[j];if(ee.start_hour<W.end_hour){const ge=l.find(Pe=>Pe.id===parseInt(v));return[`${ge?ge.full_name:`Guru ID ${v}`} memiliki jadwal bertumpuk pada ${be[parseInt(t)-1]}: ${W.start_hour}-${W.end_hour} dan ${ee.start_hour}-${ee.end_hour}`]}}}}return[]}const _=()=>{u(r=>{const o={};return Object.keys(r).forEach(s=>{o[parseInt(s)]=r[parseInt(s)].map(t=>({...t,editable:!1}))}),o}),F(null)};return n.jsxs(Ae,{breadcrumbs:St(),children:[n.jsx(Ce,{title:`Jadwal - ${e.name}`}),n.jsx(Me,{position:"top-right",richColors:!0}),n.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[n.jsxs("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("h1",{className:"text-2xl font-bold",children:["Jadwal: ",e.name]}),n.jsx("button",{type:"submit",form:L===0?"shift-form":"subject-form",disabled:L===0?S:b,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-blue-700 disabled:opacity-50",children:S||b?"Menyimpan...":"Simpan Jadwal"})]}),n.jsxs(K.Group,{selectedIndex:L,onChange:$,children:[n.jsx(K.List,{className:"mb-6 flex rounded-lg bg-blue-100 p-1",children:["By Shifting","By Subject"].map(r=>n.jsx(K,{className:({selected:o})=>`flex-1 rounded-lg py-3 text-center text-sm font-medium transition-all hover:cursor-pointer ${o?"bg-white text-blue-700 shadow":"text-gray-600 hover:bg-blue-200"}`,children:r},r))}),n.jsxs(K.Panels,{children:[n.jsx(K.Panel,{children:n.jsx("form",{id:"shift-form",onSubmit:oe,className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:E.days.map((r,o)=>n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"mb-3 text-lg font-semibold text-gray-800",children:r.day_name}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Shifting:"}),n.jsxs("select",{value:r.shifting_id||"",onChange:s=>H(o,s.target.value?parseInt(s.target.value):null),className:"w-full rounded-md border border-gray-300 bg-gray-50 p-2 text-sm focus:border-blue-500 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- No Schedule --"}),i.map(s=>n.jsxs("option",{value:s.id,children:[s.name," (",s.start_hour," - ",s.end_hour,")"]},s.id))]})]}),r.shifting_id&&n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Penanggung jawab:"}),n.jsx(Ge,{value:r.teachers,onChange:s=>Q(o,s),placeholder:"Cari guru...",options:C})]})]},r.day))})}),n.jsx(K.Panel,{children:n.jsx("form",{id:"subject-form",onSubmit:ue,className:"space-y-6",children:[1,2,3,4,5,6,7].map(r=>{var o,s;return n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:be[r-1]}),n.jsx("button",{type:"button",onClick:()=>D(r),className:"inline-flex items-center rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-green-700",children:"+ Tambah"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-1",children:(o=y[r])==null?void 0:o.map((t,f)=>{var v,k;const w=(x==null?void 0:x.day)===r&&(x==null?void 0:x.index)===f,T=!t.id||t.id.toString().includes(".");return n.jsx("div",{className:"relative rounded-md border border-gray-300 bg-gray-50 p-4",children:n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Jam Mulai"}),n.jsx("input",{type:"time",value:t.start_hour,onChange:j=>A(r,f,"start_hour",j.target.value),className:`mt-1 w-full rounded-md border border-gray-300 p-2 text-sm shadow-sm ${t.editable?"cursor-text bg-white":"cursor-not-allowed bg-gray-100"}`,disabled:!t.editable,readOnly:!t.editable,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Jam Selesai"}),n.jsx("input",{type:"time",value:t.end_hour,onChange:j=>A(r,f,"end_hour",j.target.value),className:`mt-1 w-full rounded-md border border-gray-300 p-2 text-sm shadow-sm ${t.editable?"cursor-text bg-white":"cursor-not-allowed bg-gray-100"}`,disabled:!t.editable,readOnly:!t.editable,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Mata Pelajaran"}),n.jsx(ve,{value:t.subject_id,onChange:j=>A(r,f,"subject_id",j),placeholder:"Pilih mata pelajaran...",endpoint:route("subjects.search"),initialOption:t.subject_id?{id:t.subject_id,full_name:((v=d.find(j=>j.id===t.subject_id))==null?void 0:v.name)||""}:void 0,showInitialOptions:!0,required:!0,disabled:!t.editable})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pengajar"}),n.jsx(ve,{value:t.teacher_id,onChange:j=>A(r,f,"teacher_id",j),placeholder:"Select teacher...",endpoint:route("teachers.search"),initialOption:t.teacher_id?{id:t.teacher_id,full_name:((k=l.find(j=>j.id===t.teacher_id))==null?void 0:k.full_name)||""}:void 0,showInitialOptions:!0,required:!0,disabled:!t.editable})]}),n.jsx("div",{className:"mt-1 flex h-full items-center justify-start space-x-2 pt-6 md:pt-0",children:T?n.jsx("button",{type:"button",onClick:()=>Z(r,f),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-50",children:"Batal"}):w?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>I(r,f),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),n.jsx("button",{type:"button",onClick:_,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer",children:"Selesai"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>U(r,f),className:"rounded-md bg-yellow-400 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-yellow-600",disabled:x!==null,children:"Edit"}),n.jsx("button",{type:"button",onClick:()=>Z(r,f),className:"rounded-md bg-red-500 px-4 py-2 text-sm font-medium text-white hover:cursor-pointer hover:bg-red-700",children:"Hapus"})]})})]})},f)})}),((s=y[r])==null?void 0:s.length)===0&&n.jsx("div",{className:"py-4 text-center text-gray-500",children:"Tidak ada jadwal mata pelajaran untuk hari ini"})]},r)})})})]})]})]})]})}export{Dt as default};
