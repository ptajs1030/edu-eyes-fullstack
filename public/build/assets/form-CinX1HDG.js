import{r as l,j as e,a as u}from"./app-R0rMdquo.js";import{A as v}from"./action-modal-C5xzWGOx.js";import{F as k}from"./form-modal-XT4St2kO.js";import{t as f}from"./index-D97IkeqK.js";/* empty css            */import"./proxy-C1q8mDJX.js";import"./index-DrhDQZ7H.js";function E({isOpen:r,closeModal:m,academicYear:a,attendanceModes:p}){const[d,i]=l.useState({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),[h,b]=l.useState(!1),[y,n]=l.useState(!1);l.useEffect(()=>{r&&a&&!h?(i({start_year:a.start_year,attendance_mode:a.attendance_mode,note:a.note||""}),b(!0)):r&&!a&&!h&&(i({start_year:new Date().getFullYear(),attendance_mode:"",note:""}),b(!0))},[a,r,h]),l.useEffect(()=>{r||b(!1)},[r]);const c=t=>{const{name:s,value:o}=t.target;i(j=>({...j,[s]:o}))},g=t=>{t.preventDefault(),a?x():n(!0)},x=()=>{n(!1);const t={...d};a?u.post(`/academic-years/${a.id}`,{...t,_method:"PUT"},{onSuccess:()=>{m(),u.reload()},onError:s=>{const o=Object.values(s).join(`
`);f.error("Gagal memperbarui tahun ajaran: "+o)}}):u.post("/academic-years",t,{onSuccess:()=>{m(),f.success("Tahun ajaran berhasil ditambahkan."),u.reload()},onError:s=>{const o=Object.values(s).join(`
`);f.error("Gagal menambahkan tahun ajaran: "+o)}})};return r?e.jsxs(e.Fragment,{children:[e.jsxs(k,{isOpen:r,onClose:m,title:a?"Edit Tahun Akademik":"Tambah Tahun Akademik",onSubmit:g,children:[e.jsxs("div",{className:"mb-3 flex flex-wrap justify-between",children:[e.jsx("label",{htmlFor:"start_year",className:"block text-sm font-medium text-gray-700",children:"Tahun Mulai"}),e.jsx("input",{type:"number",id:"start_year",name:"start_year",value:d.start_year,min:new Date().getFullYear(),disabled:!!a,onChange:c,className:`mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm ${a?"bg-gray-100":""} `,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"attendance_mode",className:"block text-sm font-medium text-gray-700",children:"Mode Kehadiran"}),e.jsxs("select",{name:"attendance_mode",value:d.attendance_mode,onChange:c,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Mode --"}),p.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:"Catatan (optional)"}),e.jsx("textarea",{name:"note",value:d.note,onChange:c,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:m,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:a?"Ubah":"Simpan"})]})]}),e.jsx(v,{isOpen:y,title:"Konfirmasi",message:"Apakah Anda yakin ingin menambahkan tahun ajaran baru?",buttons:[{label:"Batal",onClick:()=>n(!1),variant:"neutral"},{label:"Ya",onClick:()=>{x(),n(!1)},variant:"primary"}],onClose:()=>n(!1)})]}):null}export{E as default};
