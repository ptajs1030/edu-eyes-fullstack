import{r as i,j as e}from"./app-BzKYgBxa.js";import{F as x}from"./form-modal-CxyTnpDm.js";import{S as h}from"./searchable-select-F4sjnHDK.js";import{s as f}from"./constants-BwyCeSHr.js";import{f as p,p as y}from"./parseISO-C9VBp7jN.js";/* empty css            */import"./proxy-ClNq0ceK.js";const S=({attendance:t,dayOffOptions:d,onClose:n,onSubmit:u})=>{const[r,m]=i.useState(t||{});i.useEffect(()=>{t&&(console.log(t),m({...t}))},[t]);const c=a=>{const s=d.find(l=>l.id===parseInt(a));m(l=>({...l,day_off_reason:s==null?void 0:s.description,day_off_reason_id:s==null?void 0:s.id}))},o=(a,s)=>{m(l=>a==="status"&&s!=="day_off"||a==="status"&&s!=="leave"?{...l,[a]:s,day_off_reason:null,leave_reason:null,day_off_reason_id:void 0}:{...l,[a]:s})},b=a=>{a.preventDefault(),u(r)};return t?e.jsxs(x,{isOpen:!0,onClose:n,title:"Ubah Data Kehadiran",onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal"}),e.jsx("input",{type:"text",value:t.submit_date?p(y(t.submit_date),"dd MMM yyyy"):"",disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mata Pelajaran"}),e.jsx("input",{type:"text",value:t.subject_name,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Waktu Pelajaran"}),e.jsx("input",{type:"text",value:`${t.subject_start_hour_formatted} - ${t.subject_end_hour_formatted}`,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Jam Absen"}),e.jsx("input",{type:"time",value:r.submit_hour_formatted||"",onChange:a=>o("submit_hour_formatted",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("select",{value:r.status||"",onChange:a=>o("status",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",children:f.subject.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),r.status==="day_off"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pilih Hari Libur"}),e.jsx(h,{value:(()=>{const a=d.find(s=>s.description===r.day_off_reason);return a?a.id.toString():""})(),onChange:c,placeholder:"Pilih alasan...",endpoint:route("dayOff.search"),initialOption:(()=>{const a=d.find(s=>s.description===r.day_off_reason);return a?{id:a.id,full_name:a.description}:void 0})(),showInitialOptions:!0})]}),r.status==="leave"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alasan Izin"}),e.jsx("input",{type:"text",value:r.leave_reason||"",onChange:a=>o("leave_reason",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",placeholder:"Tulis alasan izin..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catatan"}),e.jsx("textarea",{value:r.note||"",onChange:a=>o("note",a.target.value),rows:3,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:n,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:"Simpan"})]})]}):null};export{S as default};
