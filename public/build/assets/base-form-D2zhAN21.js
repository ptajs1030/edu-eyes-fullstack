import{r as c,j as e,a as g}from"./app-D67QsVqH.js";import{t as u}from"./index-BCGnqJu1.js";import{F as f}from"./form-modal-DHRqOJa-.js";/* empty css            */import"./index-CqeOUb94.js";import"./proxy-BAiqjtPn.js";function _({isOpen:p,onClose:l,user:s,statuses:b,role:t,routePrefix:i}){const[r,o]=c.useState({full_name:"",username:"",phone:"",email:"",password:"",password_confirmation:"",role_id:t.id,status:"active",...t.value==="admin"||t.value==="teacher"?{nip:"",position:""}:{},...t.value==="parent"?{job:""}:{},address:""});c.useEffect(()=>{o(s?{...s,password:"",password_confirmation:""}:{full_name:"",username:"",phone:"",email:"",password:"",password_confirmation:"",role_id:t.id,status:"active",...t.value==="admin"||t.value==="teacher"?{nip:"",position:""}:{},...t.value==="parent"?{job:""}:{},address:""})},[s,t.id]);const d=(a,m)=>{o(n=>({...n,[a]:m}))},h=a=>{a.preventDefault();const m={...r,_method:s!=null&&s.id?"PUT":"POST"},n=s!=null&&s.id?route(`${i}.update`,s.id):route(`${i}.store`);g.post(n,m,{preserveScroll:!0,onSuccess:()=>{l(),u.success(s?`${t.name} updated successfully`:`New ${t.name} created successfully`)},onError:x=>{const v=Object.values(x).join(`
`);u.error(`Operation failed: ${v}`)}})};return e.jsxs(f,{isOpen:p,onClose:l,title:s?`Edit ${t.name}`:`Add New ${t.name}`,onSubmit:h,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsx("input",{type:"text",value:t.name,disabled:!0,className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 p-2 shadow-sm"}),e.jsx("input",{type:"hidden",name:"role_id",value:t.id})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Full Name*"}),e.jsx("input",{id:"full_name",type:"text",value:r.full_name,onChange:a=>d("full_name",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username*"}),e.jsx("input",{id:"username",type:"text",value:r.username,onChange:a=>d("username",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),(t.value==="admin"||t.value==="teacher")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"nip",className:"block text-sm font-medium text-gray-700",children:"NIP"}),e.jsx("input",{id:"nip",type:"text",value:r.nip||"",onChange:a=>d("nip",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700",children:"Position"}),e.jsx("input",{id:"position",type:"text",value:r.position||"",onChange:a=>d("position",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]})]}),t.value==="parent"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"job",className:"block text-sm font-medium text-gray-700",children:"Job"}),e.jsx("input",{id:"job",type:"text",value:r.job||"",onChange:a=>d("job",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",value:r.phone||"",onChange:a=>d("phone",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:r.email||"",onChange:a=>d("email",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("textarea",{id:"address",value:r.address||"",onChange:a=>d("address",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",rows:3})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status*"}),e.jsx("select",{id:"status",value:r.status,onChange:a=>d("status",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0,children:b.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:s?"New Password":"Password*"}),e.jsx("input",{id:"password",type:"password",value:r.password||"",onChange:a=>d("password",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",placeholder:s?"Leave blank to keep current password":"",required:!s})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:s?"Confirm New Password":"Confirm Password*"}),e.jsx("input",{id:"password_confirmation",type:"password",value:r.password_confirmation||"",onChange:a=>d("password_confirmation",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!s})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:l,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:s?"Update":"Create"})]})]})}export{_ as default};
