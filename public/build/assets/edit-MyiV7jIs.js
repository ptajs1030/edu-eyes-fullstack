import{r as o,u as N,j as e,H as w,L as S,a as A}from"./app-BbluYI2S.js";import{R as C}from"./rich-text-editor-DjfZluEC.js";import{A as E}from"./app-layout-ChrIQ2w9.js";import{t as u,T as L}from"./index-D-s0NFwU.js";/* empty css            */import"./button-CcOSGNeD.js";import"./index-Ztq6TCdw.js";import"./index-B4QfF-lZ.js";import"./index-ZI_K5vUT.js";import"./createLucideIcon-BxwggfdC.js";import"./app-logo-icon-G_MRKjaF.js";const _=()=>[{title:"Pengumuman",href:"/announcements"},{title:"Edit",href:""}];function M({announcement:a}){const[l,b]=o.useState(a.title),[c,f]=o.useState(a.short_content),[d,p]=o.useState(a.content),[i,m]=o.useState(a.attachments),[h,x]=o.useState(!1),{flash:n}=N().props;o.useEffect(()=>{n!=null&&n.success&&u.success(n.success),n!=null&&n.error&&u.error(n.error)},[n]);const g=()=>{m([...i,{url:""}])},j=t=>{const s=[...i];s.splice(t,1),m(s)},y=(t,s)=>{const r=[...i];r[t].url=s,m(r)},v=t=>{t.preventDefault(),x(!0);const s=i.filter(r=>r.url.trim()!=="").map(r=>({url:r.url}));A.put(`/announcements/${a.id}`,{title:l,short_content:c,content:d,attachments:s},{onSuccess:()=>{},onError:r=>{Object.values(r).forEach(k=>{u.error(k)})},onFinish:()=>{x(!1)}})};return e.jsxs(E,{breadcrumbs:_(),children:[e.jsx(w,{title:"Edit Pengumuman"}),e.jsx(L,{position:"top-right",richColors:!0}),e.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[e.jsx("h1",{className:"mb-6 text-xl font-bold",children:"Edit Pengumuman"}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Judul"}),e.jsx("input",{type:"text",id:"title",value:l,maxLength:70,onChange:t=>b(t.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length,"/70 karakter"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"short_content",className:"block text-sm font-medium text-gray-700",children:"Ringkasan"}),e.jsx("textarea",{id:"short_content",value:c,onChange:t=>f(t.target.value),rows:3,maxLength:255,className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0}),e.jsxs("span",{className:"text-xs text-gray-500",children:[c.length,"/255 karakter"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:["Konten ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{value:d,onChange:p,placeholder:"Ketik konten pengumuman di sini..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Lampiran"}),i.map((t,s)=>e.jsxs("div",{className:"mb-2 flex items-center",children:[e.jsx("input",{type:"url",value:t.url,onChange:r=>y(s,r.target.value),placeholder:"https://example.com/file.pdf",className:"block w-full flex-1 rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),e.jsx("button",{type:"button",onClick:()=>j(s),className:"ml-2 inline-flex items-center rounded-md border border-transparent bg-red-100 px-3 py-2 text-sm leading-4 font-medium text-red-700 hover:cursor-pointer hover:bg-red-200 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none",children:"Hapus"})]},s)),e.jsx("button",{type:"button",onClick:g,className:"rounded-md bg-sky-500 px-3 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-sky-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none",children:"Tambah Lampiran"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(S,{href:"/announcements",className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none",children:"Batal"}),e.jsx("button",{type:"submit",disabled:h,className:"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50",children:h?"Menyimpan...":"Simpan Perubahan"})]})]})]})]})}export{M as default};
