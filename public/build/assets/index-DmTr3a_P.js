import{u as j,r as n,j as t,H as $,a as d}from"./app-x9ITRrwy.js";import{A as R}from"./action-modal-CKoTr1Pz.js";import{P as D}from"./pagination-DXJGrema.js";import{T as F}from"./table-MM3tGK0h.js";import{A as I}from"./app-layout-Bjw56Jj7.js";import{t as k,T as O}from"./index-BZrGXtxQ.js";import T from"./form-DKX2mztX.js";/* empty css            */import"./proxy-BLEjzyUF.js";import"./createLucideIcon-R1LtfOPn.js";import"./button-sNa4QLv-.js";import"./index-C0TBFQwA.js";import"./index-DdgjMu3s.js";import"./index-Cq_yryd7.js";import"./app-logo-icon-CVtrWIeB.js";import"./form-modal-B1vkh4cH.js";const H=[{title:"Pengguna",href:"/users"}];function se(){var g;const{users:i,roles:y,statuses:N,filters:o}=j().props,{flash:r}=j().props;n.useEffect(()=>{r!=null&&r.success&&k.success(r.success),r!=null&&r.error&&k.error(r.error)},[r]);const[C,h]=n.useState(!1),[m,S]=n.useState(null),[u,b]=n.useState([]),[a,c]=n.useState(null),f=(e=null)=>{S(e),h(!0)},v=async e=>{d.delete(`/users/${e}`,{onSuccess:()=>d.reload()})},w=e=>{b(s=>s.includes(e)?s.filter(p=>p!==e):[...s,e])},U=()=>{const e=i.data.filter(l=>u.includes(l.id)),s=`Name,Username,Role,Phone,Email,Status
`,p=e.map(l=>`${l.full_name},${l.username},${l.role.name},${l.phone},${l.email},${l.status}`).join(`
`),A=new Blob([s,p],{type:"text/csv"}),_=URL.createObjectURL(A),x=document.createElement("a");x.href=_,x.download="users.csv",x.click()},E=e=>{d.get(route("users.index"),{sort:e,direction:o.direction==="asc"?"desc":"asc"},{preserveState:!0})},P=[{key:"full_name",label:"Full Name",sortable:!0},{key:"nip",label:"NIP",sortable:!0},{key:"username",label:"Username",sortable:!0},{key:"role_id",label:"Role",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}];return t.jsxs(I,{breadcrumbs:H,children:[t.jsx($,{title:"Users"}),t.jsx(O,{position:"top-right",richColors:!0}),t.jsxs("div",{className:"flex flex-col gap-6 rounded-xl bg-white p-6 text-black shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",placeholder:"Cari pengguna...",defaultValue:o.search||"",onChange:e=>d.get(route("users.index"),{search:e.target.value},{preserveState:!0}),className:"w-64 rounded border px-3 py-1"}),t.jsx("button",{onClick:U,className:"rounded bg-indigo-600 px-3 py-1 text-sm font-medium text-white hover:cursor-pointer",children:"Ekspor yang dipilih"})]}),t.jsx("button",{onClick:()=>f(null),className:"rounded bg-green-600 px-3 py-1 text-sm font-medium text-white transition hover:cursor-pointer hover:bg-green-700",children:"Tambah Pengguna"})]}),t.jsx(F,{headers:P,data:i.data,sortColumn:o.sort??"",sortDirection:o.direction==="asc"||o.direction==="desc"?o.direction:"asc",onSort:E,onSelectAll:e=>b(e?i.data.map(s=>s.id):[]),selectedIds:u,rowRender:e=>{var s;return t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"w-[10px] p-3 text-sm",children:t.jsx("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>w(e.id)})}),t.jsx("td",{className:"p-3 text-sm",children:e.full_name}),t.jsx("td",{className:"p-3 text-sm",children:e.nip}),t.jsx("td",{className:"p-3 text-sm",children:e.username}),t.jsx("td",{className:"p-3 text-sm",children:((s=e.role)==null?void 0:s.name)||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.phone||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.email||"-"}),t.jsx("td",{className:"p-3 text-sm",children:e.status}),t.jsxs("td",{className:"flex gap-2 p-3 text-sm",children:[t.jsx("button",{onClick:()=>f(e),className:"rounded bg-blue-500 px-3 py-1 font-medium text-white hover:cursor-pointer",children:"Edit"}),t.jsx("button",{onClick:()=>c(e),className:"rounded bg-red-500 px-3 py-1 font-medium text-white hover:cursor-pointer",children:"Hapus"})]})]},e.id)}}),t.jsx(D,{links:i.links}),t.jsx(T,{isOpen:C,onClose:()=>h(!1),user:m?{...m,role_id:((g=m.role)==null?void 0:g.id)??null}:null,roles:y,statuses:N}),t.jsx(R,{isOpen:!!a,onClose:()=>c(null),title:"Confirm Deletion",message:t.jsxs("span",{children:["Are you sure you want to delete user ",t.jsx("strong",{children:a==null?void 0:a.full_name}),"?"]}),buttons:[{label:"Cancel",onClick:()=>c(null),variant:"neutral"},{label:"Delete",onClick:()=>{a&&(v(a.id),c(null))},variant:"danger"}]})]})]})}export{se as default};
