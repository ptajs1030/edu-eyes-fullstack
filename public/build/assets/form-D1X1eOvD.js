import{r as c,j as t,a as l}from"./app-CEJ31a_F.js";import{F as _}from"./form-modal-LwDjWFMD.js";import{S as g}from"./searchable-select-D2HMPKbX.js";import{t as b}from"./index-DzqOr-kh.js";/* empty css            */import"./proxy-Bae1zpGv.js";import"./index-D50m-0k2.js";function E({isOpen:x,onClose:r,classroom:e}){const[n,i]=c.useState({name:"",level:1,main_teacher_id:null}),[v,m]=c.useState(null);c.useEffect(()=>{e?(i({name:e.name,level:e.level,main_teacher_id:e.main_teacher_id}),e.main_teacher?m({id:e.main_teacher_id,full_name:e.main_teacher.full_name}):m(null)):(i({name:"",level:1,main_teacher_id:null}),m(null))},[e]);const d=(a,h)=>{i(s=>({...s,[a]:h}))},f=a=>{a.preventDefault();const{main_teacher:h,...s}=n,p={...s,_method:e!=null&&e.id?"PUT":"POST"};e!=null&&e.id?l.post(`/classrooms/${e.id}`,p,{preserveScroll:!0,onSuccess:()=>{r(),l.reload()},onError:o=>{const u=Object.values(o).join(`
`);b.error(`Failed to update classroom: ${u}`)}}):l.post("/classrooms",p,{preserveScroll:!0,onSuccess:()=>{r(),l.reload()},onError:o=>{const u=Object.values(o).join(`
`);b.error(`Failed to add new classroom: ${u}`)}})};return t.jsxs(_,{isOpen:x,onClose:r,title:e?"Edit Kelas":"Tambahkan Kelas Baru",onSubmit:f,children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:"Level"}),t.jsx("input",{id:"level",name:"level",type:"number",min:"1",value:n.level,onChange:a=>d("level",parseInt(a.target.value)||1),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nama Kelas"}),t.jsx("input",{id:"name",name:"name",type:"text",maxLength:70,value:n.name,onChange:a=>d("name",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"main_teacher_id",className:"block text-sm font-medium text-gray-700",children:"Wali Murid"}),t.jsx(g,{value:n.main_teacher_id,onChange:a=>d("main_teacher_id",a?Number(a):null),placeholder:"Search teacher by name...",endpoint:route("teachers.search"),initialOption:v,showInitialOptions:!0,maxInitialOptions:10})]}),t.jsxs("div",{className:"flex justify-end",children:[t.jsx("button",{type:"button",onClick:r,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:e?"Update":"Create"})]})]})}export{E as default};
