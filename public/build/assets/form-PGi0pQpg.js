import{r as u,j as e,m}from"./app--8tztu9u.js";import{F as b}from"./form-modal-BrNj-cLe.js";import{t as c}from"./index-CAEQJ3gJ.js";/* empty css            */import"./proxy-BUtDjAM8.js";import"./index-COSppDxn.js";function y({isOpen:p,onClose:o,user:s,roles:h,statuses:x}){const[l,d]=u.useState({full_name:"",username:"",phone:"",email:"",password:"",password_confirmation:"",role_id:null,status:"active"});u.useEffect(()=>{d(s?{id:s.id,full_name:s.full_name,username:s.username,phone:s.phone||"",email:s.email||"",password:"",password_confirmation:"",role_id:s.role_id,status:s.status}:{full_name:"",username:"",phone:"",email:"",password:"",password_confirmation:"",role_id:null,status:"active"})},[s]);const t=(a,n)=>{d(r=>({...r,[a]:n}))},f=a=>{a.preventDefault();const n={...l,_method:s!=null&&s.id?"PUT":"POST"};s!=null&&s.id?m.post(`/users/${s.id}`,n,{preserveScroll:!0,onSuccess:()=>{o(),m.reload()},onError:r=>{const i=Object.values(r).join(`
`);c.error(`Failed to update user: ${i}`)}}):m.post("/users",n,{preserveScroll:!0,onSuccess:()=>{o(),m.reload()},onError:r=>{const i=Object.values(r).join(`
`);c.error(`Failed to add new user: ${i}`)}})};return e.jsxs(b,{isOpen:p,onClose:o,title:s?"Edit User":"Add New User",onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Full Name*"}),e.jsx("input",{id:"full_name",name:"full_name",type:"text",value:l.full_name,onChange:a=>t("full_name",a.target.value),className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username*"}),e.jsx("input",{id:"username",name:"username",type:"text",value:l.username,onChange:a=>t("username",a.target.value),className:"w-full rounded border p-2",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:l.phone,onChange:a=>t("phone",a.target.value),className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",value:l.email,onChange:a=>t("email",a.target.value),className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"role_id",className:"block text-sm font-medium text-gray-700",children:"Role*"}),e.jsxs("select",{id:"role_id",name:"role_id",value:l.role_id||"",onChange:a=>t("role_id",a.target.value?parseInt(a.target.value):null),className:"w-full rounded border p-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),h.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status*"}),e.jsx("select",{id:"status",name:"status",value:l.status,onChange:a=>t("status",a.target.value),className:"w-full rounded border p-2",required:!0,children:x.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),e.jsx("input",{id:"password",name:"password",type:"password",value:l.password,onChange:a=>t("password",a.target.value),className:"w-full rounded border p-2",placeholder:s?"Leave blank to keep current password":""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password*"}),e.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:"password",value:l.password_confirmation,onChange:a=>t("password_confirmation",a.target.value),className:"w-full rounded border p-2"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:o,className:"mr-2 rounded bg-gray-500 px-4 py-2 text-white hover:cursor-pointer",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-white hover:cursor-pointer",children:s?"Update":"Create"})]})]})}export{y as default};
