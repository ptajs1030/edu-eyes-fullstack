import{r as n,j as t,a as d}from"./app-DY4zhPys.js";import{F as j}from"./form-modal-DqjbrZGA.js";import{S as y}from"./searchable-select-BZYlmlcp.js";import{t as v}from"./index-CcW1jwVX.js";/* empty css            */import"./proxy-D27ju17p.js";import"./index-njoTjClQ.js";function C({isOpen:r,onClose:l,classroom:e}){const[i,m]=n.useState({name:"",level:1,main_teacher_id:null}),[s,u]=n.useState(!1),[_,o]=n.useState(null);n.useEffect(()=>{r&&e&&!s?(m({name:e.name,level:e.level,main_teacher_id:e.main_teacher_id}),e.main_teacher?o({id:e.main_teacher_id,full_name:e.main_teacher.full_name}):o(null),u(!0)):r&&!e&&!s&&(m({name:"",level:1,main_teacher_id:null}),o(null),u(!0))},[e,r,s]),n.useEffect(()=>{r||u(!1)},[r]);const c=(a,x)=>{m(h=>({...h,[a]:x}))},g=a=>{a.preventDefault();const{main_teacher:x,...h}=i,f={...h,_method:e!=null&&e.id?"PUT":"POST"};e!=null&&e.id?d.post(`/classrooms/${e.id}`,f,{preserveScroll:!0,onSuccess:()=>{l(),d.reload()},onError:b=>{const p=Object.values(b).join(`
`);v.error(`Failed to update classroom: ${p}`)}}):d.post("/classrooms",f,{preserveScroll:!0,onSuccess:()=>{l(),d.reload()},onError:b=>{const p=Object.values(b).join(`
`);v.error(`Failed to add new classroom: ${p}`)}})};return t.jsxs(j,{isOpen:r,onClose:l,title:e?"Edit Kelas":"Tambahkan Kelas Baru",onSubmit:g,children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:"Level"}),t.jsx("input",{id:"level",name:"level",type:"number",min:"1",value:i.level,onChange:a=>c("level",parseInt(a.target.value)||1),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nama Kelas"}),t.jsx("input",{id:"name",name:"name",type:"text",maxLength:70,value:i.name,onChange:a=>c("name",a.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm",required:!0})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"main_teacher_id",className:"block text-sm font-medium text-gray-700",children:"Wali Murid"}),t.jsx(y,{value:i.main_teacher_id,onChange:a=>c("main_teacher_id",a?Number(a):null),placeholder:"Search teacher by name...",endpoint:route("teachers.search"),initialOption:_,showInitialOptions:!0,maxInitialOptions:10})]}),t.jsxs("div",{className:"flex justify-end",children:[t.jsx("button",{type:"button",onClick:l,className:"mr-2 rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:cursor-pointer hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:cursor-pointer hover:bg-blue-700",children:e?"Update":"Create"})]})]})}export{C as default};
